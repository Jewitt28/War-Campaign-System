<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>WAR Campaign System – Abstract Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #1a1a1a;
  color: #eee;
  font-family: system-ui, Arial;
  height: 100%;
}

#topbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: #111;
  border-bottom: 1px solid #333;
  padding: 8px;
  z-index: 1000;
  display: flex;
  gap: 8px;
}

#topbar button, #topbar select {
  background: #222;
  color: #eee;
  border: 1px solid #444;
  padding: 6px 10px;
  cursor: pointer;
}

#map-wrap {
  position: absolute;
  top: 46px;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
}

#map {
  position: absolute;
  width: 2000px;
  height: 1200px;
  transform-origin: 0 0;
}

/* Theatre backgrounds */
.theatre {
  position: absolute;
  border: 1px dashed #444;
  background: rgba(255,255,255,0.02);
}

#WE { left: 100px;  top: 100px;  width: 500px; height: 350px; }
#EE { left: 650px;  top: 100px;  width: 500px; height: 350px; }
#NA { left: 300px;  top: 520px;  width: 500px; height: 300px; }
#PA { left: 950px;  top: 520px;  width: 650px; height: 300px; }

.theatre h3 {
  margin: 6px;
  font-size: 14px;
  color: #aaa;
}

/* Pins */
.pin {
  position: absolute;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  border: 2px solid #000;
  cursor: pointer;
}

.faction-allies  { background: #c9b27c; }
.faction-axis    { background: #666; }
.faction-ussr    { background: #b22222; }
.faction-neutral { background: #888; }

/* Side panel */
#panel {
  position: fixed;
  right: 0;
  top: 46px;
  width: 280px;
  bottom: 0;
  background: #141414;
  border-left: 1px solid #333;
  padding: 10px;
  display: none;
}

#panel h2 {
  margin-top: 0;
  font-size: 16px;
}
</style>
</head>

<body>

<div id="topbar">
  <button onclick="zoomWorld()">World</button>
  <button onclick="zoom('WE')">Western Europe</button>
  <button onclick="zoom('EE')">Eastern Europe</button>
  <button onclick="zoom('NA')">North Africa</button>
  <button onclick="zoom('PA')">Pacific</button>

  <select onchange="mode=this.value; updateVisibility();">
    <option value="GM">GM Mode</option>
    <option value="PLAYER">Player Mode</option>
  </select>
</div>

<div id="map-wrap">
  <div id="map">

    <div id="WE" class="theatre"><h3>Western Europe</h3></div>
    <div id="EE" class="theatre"><h3>Eastern Europe</h3></div>
    <div id="NA" class="theatre"><h3>North Africa</h3></div>
    <div id="PA" class="theatre"><h3>Pacific</h3></div>

  </div>
</div>

<div id="panel">
  <h2 id="panelTitle"></h2>
  <div id="panelContent"></div>
</div>

<script>
const map = document.getElementById("map");
const panel = document.getElementById("panel");
let mode = "GM";

/* Camera zooms */
const zooms = {
  WE: { x: -80,  y: -80,  s: 1.8 },
  EE: { x: -580, y: -80,  s: 1.8 },
  NA: { x: -200, y: -420, s: 1.8 },
  PA: { x: -850, y: -420, s: 1.6 }
};

function zoomWorld() {
  map.style.transform = "translate(0,0) scale(1)";
}

function zoom(t) {
  const z = zooms[t];
  map.style.transform = `translate(${z.x}px, ${z.y}px) scale(${z.s})`;
}

/* Territory list (abstract positions inside theatres) */
const territories = [
  // WE
  {id:"WE-01",name:"Southern England",x:200,y:180,theatre:"WE"},
  {id:"WE-02",name:"Normandy",x:260,y:230,theatre:"WE"},
  {id:"WE-03",name:"Paris Basin",x:300,y:260,theatre:"WE"},
  {id:"WE-04",name:"Low Countries",x:320,y:220,theatre:"WE"},
  {id:"WE-05",name:"Ruhr",x:360,y:230,theatre:"WE"},
  {id:"WE-06",name:"Western Germany",x:380,y:260,theatre:"WE"},

  // EE
  {id:"EE-01",name:"Western Poland",x:700,y:220,theatre:"EE"},
  {id:"EE-02",name:"Eastern Poland",x:740,y:220,theatre:"EE"},
  {id:"EE-03",name:"Baltics",x:740,y:180,theatre:"EE"},
  {id:"EE-08",name:"Moscow",x:820,y:200,theatre:"EE"},

  // NA
  {id:"NA-TUN",name:"Tunis",x:360,y:580,theatre:"NA"},
  {id:"NA-TRP",name:"Tripoli",x:420,y:580,theatre:"NA"},
  {id:"NA-TBRK",name:"Tobruk",x:480,y:580,theatre:"NA"},
  {id:"NA-ELAL",name:"El Alamein",x:520,y:580,theatre:"NA"},

  // PA
  {id:"PA-MID",name:"Midway",x:1020,y:620,theatre:"PA"},
  {id:"PA-GUAM",name:"Guam",x:1100,y:620,theatre:"PA"},
  {id:"PA-PHIL",name:"Philippines",x:1140,y:660,theatre:"PA"},
  {id:"PA-SOLO",name:"Solomons",x:1180,y:700,theatre:"PA"}
];

territories.forEach(t => {
  t.faction = "neutral";
  t.visibility = "Known";
});

/* Render pins */
territories.forEach(t => {
  const p = document.createElement("div");
  p.className = "pin faction-neutral";
  p.style.left = t.x + "px";
  p.style.top = t.y + "px";
  p.dataset.visibility = t.visibility;
  p.onclick = () => openPanel(t);
  map.appendChild(p);
});

function openPanel(t) {
  panel.style.display = "block";
  document.getElementById("panelTitle").textContent = t.id + " – " + t.name;
  document.getElementById("panelContent").innerHTML =
    `<p><b>Theatre:</b> ${t.theatre}</p>
     <p><b>Faction:</b> ${t.faction}</p>`;
}

function updateVisibility() {
  document.querySelectorAll(".pin").forEach(p => {
    if (mode === "PLAYER" && p.dataset.visibility === "Unknown") {
      p.style.display = "none";
    } else {
      p.style.display = "block";
    }
  });
}
</script>

</body>
</html>
