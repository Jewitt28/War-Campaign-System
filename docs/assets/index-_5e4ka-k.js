(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))r(d);new MutationObserver(d=>{for(const y of d)if(y.type==="childList")for(const b of y.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&r(b)}).observe(document,{childList:!0,subtree:!0});function u(d){const y={};return d.integrity&&(y.integrity=d.integrity),d.referrerPolicy&&(y.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?y.credentials="include":d.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function r(d){if(d.ep)return;d.ep=!0;const y=u(d);fetch(d.href,y)}})();function Ag(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var fc={exports:{}},Oa={};var Ny;function Cg(){if(Ny)return Oa;Ny=1;var o=Symbol.for("react.transitional.element"),f=Symbol.for("react.fragment");function u(r,d,y){var b=null;if(y!==void 0&&(b=""+y),d.key!==void 0&&(b=""+d.key),"key"in d){y={};for(var v in d)v!=="key"&&(y[v]=d[v])}else y=d;return d=y.ref,{$$typeof:o,type:r,key:b,ref:d!==void 0?d:null,props:y}}return Oa.Fragment=f,Oa.jsx=u,Oa.jsxs=u,Oa}var Ry;function Dg(){return Ry||(Ry=1,fc.exports=Cg()),fc.exports}var a=Dg(),yc={exports:{}},Be={};var Ay;function Bg(){if(Ay)return Be;Ay=1;var o=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),b=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.iterator;function D(p){return p===null||typeof p!="object"?null:(p=L&&p[L]||p["@@iterator"],typeof p=="function"?p:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,Q={};function B(p,N,$){this.props=p,this.context=N,this.refs=Q,this.updater=$||Z}B.prototype.isReactComponent={},B.prototype.setState=function(p,N){if(typeof p!="object"&&typeof p!="function"&&p!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,p,N,"setState")},B.prototype.forceUpdate=function(p){this.updater.enqueueForceUpdate(this,p,"forceUpdate")};function V(){}V.prototype=B.prototype;function z(p,N,$){this.props=p,this.context=N,this.refs=Q,this.updater=$||Z}var C=z.prototype=new V;C.constructor=z,R(C,B.prototype),C.isPureReactComponent=!0;var ae=Array.isArray;function Ae(){}var G={H:null,A:null,T:null,S:null},ve=Object.prototype.hasOwnProperty;function be(p,N,$){var P=$.ref;return{$$typeof:o,type:p,key:N,ref:P!==void 0?P:null,props:$}}function we(p,N){return be(p.type,N,p.props)}function Oe(p){return typeof p=="object"&&p!==null&&p.$$typeof===o}function ue(p){var N={"=":"=0",":":"=2"};return"$"+p.replace(/[=:]/g,function($){return N[$]})}var Ue=/\/+/g;function Pe(p,N){return typeof p=="object"&&p!==null&&p.key!=null?ue(""+p.key):N.toString(36)}function Xe(p){switch(p.status){case"fulfilled":return p.value;case"rejected":throw p.reason;default:switch(typeof p.status=="string"?p.then(Ae,Ae):(p.status="pending",p.then(function(N){p.status==="pending"&&(p.status="fulfilled",p.value=N)},function(N){p.status==="pending"&&(p.status="rejected",p.reason=N)})),p.status){case"fulfilled":return p.value;case"rejected":throw p.reason}}throw p}function M(p,N,$,P,se){var re=typeof p;(re==="undefined"||re==="boolean")&&(p=null);var Se=!1;if(p===null)Se=!0;else switch(re){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(p.$$typeof){case o:case f:Se=!0;break;case E:return Se=p._init,M(Se(p._payload),N,$,P,se)}}if(Se)return se=se(p),Se=P===""?"."+Pe(p,0):P,ae(se)?($="",Se!=null&&($=Se.replace(Ue,"$&/")+"/"),M(se,N,$,"",function(Ke){return Ke})):se!=null&&(Oe(se)&&(se=we(se,$+(se.key==null||p&&p.key===se.key?"":(""+se.key).replace(Ue,"$&/")+"/")+Se)),N.push(se)),1;Se=0;var ze=P===""?".":P+":";if(ae(p))for(var De=0;De<p.length;De++)P=p[De],re=ze+Pe(P,De),Se+=M(P,N,$,re,se);else if(De=D(p),typeof De=="function")for(p=De.call(p),De=0;!(P=p.next()).done;)P=P.value,re=ze+Pe(P,De++),Se+=M(P,N,$,re,se);else if(re==="object"){if(typeof p.then=="function")return M(Xe(p),N,$,P,se);throw N=String(p),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.")}return Se}function J(p,N,$){if(p==null)return p;var P=[],se=0;return M(p,P,"","",function(re){return N.call($,re,se++)}),P}function ie(p){if(p._status===-1){var N=p._result;N=N(),N.then(function($){(p._status===0||p._status===-1)&&(p._status=1,p._result=$)},function($){(p._status===0||p._status===-1)&&(p._status=2,p._result=$)}),p._status===-1&&(p._status=0,p._result=N)}if(p._status===1)return p._result.default;throw p._result}var de=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var N=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(N))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},Ee={map:J,forEach:function(p,N,$){J(p,function(){N.apply(this,arguments)},$)},count:function(p){var N=0;return J(p,function(){N++}),N},toArray:function(p){return J(p,function(N){return N})||[]},only:function(p){if(!Oe(p))throw Error("React.Children.only expected to receive a single React element child.");return p}};return Be.Activity=x,Be.Children=Ee,Be.Component=B,Be.Fragment=u,Be.Profiler=d,Be.PureComponent=z,Be.StrictMode=r,Be.Suspense=m,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,Be.__COMPILER_RUNTIME={__proto__:null,c:function(p){return G.H.useMemoCache(p)}},Be.cache=function(p){return function(){return p.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(p,N,$){if(p==null)throw Error("The argument must be a React element, but you passed "+p+".");var P=R({},p.props),se=p.key;if(N!=null)for(re in N.key!==void 0&&(se=""+N.key),N)!ve.call(N,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&N.ref===void 0||(P[re]=N[re]);var re=arguments.length-2;if(re===1)P.children=$;else if(1<re){for(var Se=Array(re),ze=0;ze<re;ze++)Se[ze]=arguments[ze+2];P.children=Se}return be(p.type,se,P)},Be.createContext=function(p){return p={$$typeof:b,_currentValue:p,_currentValue2:p,_threadCount:0,Provider:null,Consumer:null},p.Provider=p,p.Consumer={$$typeof:y,_context:p},p},Be.createElement=function(p,N,$){var P,se={},re=null;if(N!=null)for(P in N.key!==void 0&&(re=""+N.key),N)ve.call(N,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(se[P]=N[P]);var Se=arguments.length-2;if(Se===1)se.children=$;else if(1<Se){for(var ze=Array(Se),De=0;De<Se;De++)ze[De]=arguments[De+2];se.children=ze}if(p&&p.defaultProps)for(P in Se=p.defaultProps,Se)se[P]===void 0&&(se[P]=Se[P]);return be(p,re,se)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(p){return{$$typeof:v,render:p}},Be.isValidElement=Oe,Be.lazy=function(p){return{$$typeof:E,_payload:{_status:-1,_result:p},_init:ie}},Be.memo=function(p,N){return{$$typeof:g,type:p,compare:N===void 0?null:N}},Be.startTransition=function(p){var N=G.T,$={};G.T=$;try{var P=p(),se=G.S;se!==null&&se($,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(Ae,de)}catch(re){de(re)}finally{N!==null&&$.types!==null&&(N.types=$.types),G.T=N}},Be.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},Be.use=function(p){return G.H.use(p)},Be.useActionState=function(p,N,$){return G.H.useActionState(p,N,$)},Be.useCallback=function(p,N){return G.H.useCallback(p,N)},Be.useContext=function(p){return G.H.useContext(p)},Be.useDebugValue=function(){},Be.useDeferredValue=function(p,N){return G.H.useDeferredValue(p,N)},Be.useEffect=function(p,N){return G.H.useEffect(p,N)},Be.useEffectEvent=function(p){return G.H.useEffectEvent(p)},Be.useId=function(){return G.H.useId()},Be.useImperativeHandle=function(p,N,$){return G.H.useImperativeHandle(p,N,$)},Be.useInsertionEffect=function(p,N){return G.H.useInsertionEffect(p,N)},Be.useLayoutEffect=function(p,N){return G.H.useLayoutEffect(p,N)},Be.useMemo=function(p,N){return G.H.useMemo(p,N)},Be.useOptimistic=function(p,N){return G.H.useOptimistic(p,N)},Be.useReducer=function(p,N,$){return G.H.useReducer(p,N,$)},Be.useRef=function(p){return G.H.useRef(p)},Be.useState=function(p){return G.H.useState(p)},Be.useSyncExternalStore=function(p,N,$){return G.H.useSyncExternalStore(p,N,$)},Be.useTransition=function(){return G.H.useTransition()},Be.version="19.2.3",Be}var Cy;function Mc(){return Cy||(Cy=1,yc.exports=Bg()),yc.exports}var Y=Mc();const ks=Ag(Y);var hc={exports:{}},Na={},pc={exports:{}},gc={};var Dy;function Mg(){return Dy||(Dy=1,(function(o){function f(M,J){var ie=M.length;M.push(J);e:for(;0<ie;){var de=ie-1>>>1,Ee=M[de];if(0<d(Ee,J))M[de]=J,M[ie]=Ee,ie=de;else break e}}function u(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var J=M[0],ie=M.pop();if(ie!==J){M[0]=ie;e:for(var de=0,Ee=M.length,p=Ee>>>1;de<p;){var N=2*(de+1)-1,$=M[N],P=N+1,se=M[P];if(0>d($,ie))P<Ee&&0>d(se,$)?(M[de]=se,M[P]=ie,de=P):(M[de]=$,M[N]=ie,de=N);else if(P<Ee&&0>d(se,ie))M[de]=se,M[P]=ie,de=P;else break e}}return J}function d(M,J){var ie=M.sortIndex-J.sortIndex;return ie!==0?ie:M.id-J.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;o.unstable_now=function(){return y.now()}}else{var b=Date,v=b.now();o.unstable_now=function(){return b.now()-v}}var m=[],g=[],E=1,x=null,L=3,D=!1,Z=!1,R=!1,Q=!1,B=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function C(M){for(var J=u(g);J!==null;){if(J.callback===null)r(g);else if(J.startTime<=M)r(g),J.sortIndex=J.expirationTime,f(m,J);else break;J=u(g)}}function ae(M){if(R=!1,C(M),!Z)if(u(m)!==null)Z=!0,Ae||(Ae=!0,ue());else{var J=u(g);J!==null&&Xe(ae,J.startTime-M)}}var Ae=!1,G=-1,ve=5,be=-1;function we(){return Q?!0:!(o.unstable_now()-be<ve)}function Oe(){if(Q=!1,Ae){var M=o.unstable_now();be=M;var J=!0;try{e:{Z=!1,R&&(R=!1,V(G),G=-1),D=!0;var ie=L;try{t:{for(C(M),x=u(m);x!==null&&!(x.expirationTime>M&&we());){var de=x.callback;if(typeof de=="function"){x.callback=null,L=x.priorityLevel;var Ee=de(x.expirationTime<=M);if(M=o.unstable_now(),typeof Ee=="function"){x.callback=Ee,C(M),J=!0;break t}x===u(m)&&r(m),C(M)}else r(m);x=u(m)}if(x!==null)J=!0;else{var p=u(g);p!==null&&Xe(ae,p.startTime-M),J=!1}}break e}finally{x=null,L=ie,D=!1}J=void 0}}finally{J?ue():Ae=!1}}}var ue;if(typeof z=="function")ue=function(){z(Oe)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,Pe=Ue.port2;Ue.port1.onmessage=Oe,ue=function(){Pe.postMessage(null)}}else ue=function(){B(Oe,0)};function Xe(M,J){G=B(function(){M(o.unstable_now())},J)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(M){M.callback=null},o.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<M?Math.floor(1e3/M):5},o.unstable_getCurrentPriorityLevel=function(){return L},o.unstable_next=function(M){switch(L){case 1:case 2:case 3:var J=3;break;default:J=L}var ie=L;L=J;try{return M()}finally{L=ie}},o.unstable_requestPaint=function(){Q=!0},o.unstable_runWithPriority=function(M,J){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ie=L;L=M;try{return J()}finally{L=ie}},o.unstable_scheduleCallback=function(M,J,ie){var de=o.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?de+ie:de):ie=de,M){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=ie+Ee,M={id:E++,callback:J,priorityLevel:M,startTime:ie,expirationTime:Ee,sortIndex:-1},ie>de?(M.sortIndex=ie,f(g,M),u(m)===null&&M===u(g)&&(R?(V(G),G=-1):R=!0,Xe(ae,ie-de))):(M.sortIndex=Ee,f(m,M),Z||D||(Z=!0,Ae||(Ae=!0,ue()))),M},o.unstable_shouldYield=we,o.unstable_wrapCallback=function(M){var J=L;return function(){var ie=L;L=J;try{return M.apply(this,arguments)}finally{L=ie}}}})(gc)),gc}var By;function _g(){return By||(By=1,pc.exports=Mg()),pc.exports}var mc={exports:{}},wt={};var My;function zg(){if(My)return wt;My=1;var o=Mc();function f(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var r={d:{f:u,r:function(){throw Error(f(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},d=Symbol.for("react.portal");function y(m,g,E){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:x==null?null:""+x,children:m,containerInfo:g,implementation:E}}var b=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return wt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,wt.createPortal=function(m,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(f(299));return y(m,g,null,E)},wt.flushSync=function(m){var g=b.T,E=r.p;try{if(b.T=null,r.p=2,m)return m()}finally{b.T=g,r.p=E,r.d.f()}},wt.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},wt.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},wt.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var E=g.as,x=v(E,g.crossOrigin),L=typeof g.integrity=="string"?g.integrity:void 0,D=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:L,fetchPriority:D}):E==="script"&&r.d.X(m,{crossOrigin:x,integrity:L,fetchPriority:D,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},wt.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=v(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},wt.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,x=v(E,g.crossOrigin);r.d.L(m,E,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},wt.preloadModule=function(m,g){if(typeof m=="string")if(g){var E=v(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},wt.requestFormReset=function(m){r.d.r(m)},wt.unstable_batchedUpdates=function(m,g){return m(g)},wt.useFormState=function(m,g,E){return b.H.useFormState(m,g,E)},wt.useFormStatus=function(){return b.H.useHostTransitionStatus()},wt.version="19.2.3",wt}var _y;function Ug(){if(_y)return mc.exports;_y=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(f){console.error(f)}}return o(),mc.exports=zg(),mc.exports}var zy;function Lg(){if(zy)return Na;zy=1;var o=_g(),f=Mc(),u=Ug();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function y(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function b(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(y(e)!==e)throw Error(r(188))}function g(e){var t=e.alternate;if(!t){if(t=y(e),t===null)throw Error(r(188));return t!==e?null:e}for(var n=e,l=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(l=i.return,l!==null){n=l;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return m(i),e;if(s===l)return m(i),t;s=s.sibling}throw Error(r(188))}if(n.return!==l.return)n=i,l=s;else{for(var c=!1,h=i.child;h;){if(h===n){c=!0,n=i,l=s;break}if(h===l){c=!0,l=i,n=s;break}h=h.sibling}if(!c){for(h=s.child;h;){if(h===n){c=!0,n=s,l=i;break}if(h===l){c=!0,l=s,n=i;break}h=h.sibling}if(!c)throw Error(r(189))}}if(n.alternate!==l)throw Error(r(190))}if(n.tag!==3)throw Error(r(188));return n.stateNode.current===n?e:t}function E(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=E(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,L=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),V=Symbol.for("react.consumer"),z=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),be=Symbol.for("react.activity"),we=Symbol.for("react.memo_cache_sentinel"),Oe=Symbol.iterator;function ue(e){return e===null||typeof e!="object"?null:(e=Oe&&e[Oe]||e["@@iterator"],typeof e=="function"?e:null)}var Ue=Symbol.for("react.client.reference");function Pe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ue?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case B:return"Profiler";case Q:return"StrictMode";case ae:return"Suspense";case Ae:return"SuspenseList";case be:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Z:return"Portal";case z:return e.displayName||"Context";case V:return(e._context.displayName||"Context")+".Consumer";case C:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case G:return t=e.displayName||null,t!==null?t:Pe(e.type)||"Memo";case ve:t=e._payload,e=e._init;try{return Pe(e(t))}catch{}}return null}var Xe=Array.isArray,M=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},de=[],Ee=-1;function p(e){return{current:e}}function N(e){0>Ee||(e.current=de[Ee],de[Ee]=null,Ee--)}function $(e,t){Ee++,de[Ee]=e.current,e.current=t}var P=p(null),se=p(null),re=p(null),Se=p(null);function ze(e,t){switch($(re,t),$(se,e),$(P,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Kf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Kf(t),e=Wf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}N(P),$(P,e)}function De(){N(P),N(se),N(re)}function Ke(e){e.memoizedState!==null&&$(Se,e);var t=P.current,n=Wf(t,e.type);t!==n&&($(se,e),$(P,n))}function X(e){se.current===e&&(N(P),N(se)),Se.current===e&&(N(Se),xa._currentValue=ie)}var pe,We;function Le(e){if(pe===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);pe=t&&t[1]||"",We=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+e+We}var mt=!1;function $e(e,t){if(!e||mt)return"";mt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(q){var I=q}Reflect.construct(e,[],W)}else{try{W.call()}catch(q){I=q}e.call(W.prototype)}}else{try{throw Error()}catch(q){I=q}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(q){if(q&&I&&typeof q.stack=="string")return[q.stack,I.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=l.DetermineComponentFrameRoot(),c=s[0],h=s[1];if(c&&h){var S=c.split(`
`),U=h.split(`
`);for(i=l=0;l<S.length&&!S[l].includes("DetermineComponentFrameRoot");)l++;for(;i<U.length&&!U[i].includes("DetermineComponentFrameRoot");)i++;if(l===S.length||i===U.length)for(l=S.length-1,i=U.length-1;1<=l&&0<=i&&S[l]!==U[i];)i--;for(;1<=l&&0<=i;l--,i--)if(S[l]!==U[i]){if(l!==1||i!==1)do if(l--,i--,0>i||S[l]!==U[i]){var F=`
`+S[l].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=l&&0<=i);break}}}finally{mt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Le(n):""}function vt(e,t){switch(e.tag){case 26:case 27:case 5:return Le(e.type);case 16:return Le("Lazy");case 13:return e.child!==t&&t!==null?Le("Suspense Fallback"):Le("Suspense");case 19:return Le("SuspenseList");case 0:case 15:return $e(e.type,!1);case 11:return $e(e.type.render,!1);case 1:return $e(e.type,!0);case 31:return Le("Activity");default:return""}}function oe(e){try{var t="",n=null;do t+=vt(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var yt=Object.prototype.hasOwnProperty,H=o.unstable_scheduleCallback,ne=o.unstable_cancelCallback,le=o.unstable_shouldYield,te=o.unstable_requestPaint,ee=o.unstable_now,fe=o.unstable_getCurrentPriorityLevel,Te=o.unstable_ImmediatePriority,Ne=o.unstable_UserBlockingPriority,je=o.unstable_NormalPriority,ge=o.unstable_LowPriority,w=o.unstable_IdlePriority,he=o.log,Ye=o.unstable_setDisableYieldValue,ot=null,ke=null;function at(e){if(typeof he=="function"&&Ye(e),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(ot,e)}catch{}}var Re=Math.clz32?Math.clz32:k,Wt=Math.log,xt=Math.LN2;function k(e){return e>>>=0,e===0?32:31-(Wt(e)/xt|0)|0}var Ce=256,rt=262144,Nt=4194304;function Rt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Rn(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var i=0,s=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var h=l&134217727;return h!==0?(l=h&~s,l!==0?i=Rt(l):(c&=h,c!==0?i=Rt(c):n||(n=h&~e,n!==0&&(i=Rt(n))))):(h=l&~s,h!==0?i=Rt(h):c!==0?i=Rt(c):n||(n=l&~e,n!==0&&(i=Rt(n)))),i===0?0:t!==0&&t!==i&&(t&s)===0&&(s=i&-i,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:i}function vl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function to(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _i(){var e=Nt;return Nt<<=1,(Nt&62914560)===0&&(Nt=4194304),e}function zi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function A(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Fe(e,t,n,l,i,s){var c=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var h=e.entanglements,S=e.expirationTimes,U=e.hiddenUpdates;for(n=c&~n;0<n;){var F=31-Re(n),W=1<<F;h[F]=0,S[F]=-1;var I=U[F];if(I!==null)for(U[F]=null,F=0;F<I.length;F++){var q=I[F];q!==null&&(q.lane&=-536870913)}n&=~W}l!==0&&ht(e,l,0),s!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=s&~(c&~t))}function ht(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Re(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function Fn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-Re(n),i=1<<l;i&t|e[l]&t&&(e[l]|=t),n&=~i}}function Ui(e,t){var n=t&-t;return n=(n&42)!==0?1:bl(n),(n&(e.suspendedLanes|t))!==0?0:n}function bl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Sl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ht(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:by(e.type))}function Da(e,t){var n=J.p;try{return J.p=e,t()}finally{J.p=n}}var Sn=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Sn,qt="__reactProps$"+Sn,Gl="__reactContainer$"+Sn,no="__reactEvents$"+Sn,mh="__reactListeners$"+Sn,vh="__reactHandles$"+Sn,Uc="__reactResources$"+Sn,Li="__reactMarker$"+Sn;function lo(e){delete e[Bt],delete e[qt],delete e[no],delete e[mh],delete e[vh]}function ql(e){var t=e[Bt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Gl]||n[Bt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ly(e);e!==null;){if(n=e[Bt])return n;e=ly(e)}return t}e=n,n=e.parentNode}return null}function Yl(e){if(e=e[Bt]||e[Gl]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function wi(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function kl(e){var t=e[Uc];return t||(t=e[Uc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ct(e){e[Li]=!0}var Lc=new Set,wc={};function xl(e,t){Vl(e,t),Vl(e+"Capture",t)}function Vl(e,t){for(wc[e]=t,e=0;e<t.length;e++)Lc.add(t[e])}var bh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hc={},Ic={};function Sh(e){return yt.call(Ic,e)?!0:yt.call(Hc,e)?!1:bh.test(e)?Ic[e]=!0:(Hc[e]=!0,!1)}function Ba(e,t,n){if(Sh(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ma(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function An(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function an(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function xh(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var i=l.get,s=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(c){n=""+c,s.call(this,c)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(c){n=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function io(e){if(!e._valueTracker){var t=Gc(e)?"checked":"value";e._valueTracker=xh(e,t,""+e[t])}}function qc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=Gc(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function _a(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Th=/[\n"\\]/g;function sn(e){return e.replace(Th,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ao(e,t,n,l,i,s,c,h){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),t!=null?c==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+an(t)):e.value!==""+an(t)&&(e.value=""+an(t)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),t!=null?so(e,c,an(t)):n!=null?so(e,c,an(n)):l!=null&&e.removeAttribute("value"),i==null&&s!=null&&(e.defaultChecked=!!s),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.name=""+an(h):e.removeAttribute("name")}function Yc(e,t,n,l,i,s,c,h){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){io(e);return}n=n!=null?""+an(n):"",t=t!=null?""+an(t):n,h||t===e.value||(e.value=t),e.defaultValue=t}l=l??i,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=h?e.checked:!!l,e.defaultChecked=!!l,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c),io(e)}function so(e,t,n){t==="number"&&_a(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Xl(e,t,n,l){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&l&&(e[n].defaultSelected=!0)}else{for(n=""+an(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,l&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function kc(e,t,n){if(t!=null&&(t=""+an(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+an(n):""}function Vc(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(r(92));if(Xe(l)){if(1<l.length)throw Error(r(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=an(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),io(e)}function Fl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Eh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xc(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||Eh.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Fc(e,t,n){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var i in t)l=t[i],t.hasOwnProperty(i)&&n[i]!==l&&Xc(e,i,l)}else for(var s in t)t.hasOwnProperty(s)&&Xc(e,s,t[s])}function oo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Oh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function za(e){return Oh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Cn(){}var ro=null;function co(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ql=null,Zl=null;function Qc(e){var t=Yl(e);if(t&&(e=t.stateNode)){var n=e[qt]||null;e:switch(e=t.stateNode,t.type){case"input":if(ao(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+sn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var i=l[qt]||null;if(!i)throw Error(r(90));ao(l,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&qc(l)}break e;case"textarea":kc(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Xl(e,!!n.multiple,t,!1)}}}var uo=!1;function Zc(e,t,n){if(uo)return e(t,n);uo=!0;try{var l=e(t);return l}finally{if(uo=!1,(Ql!==null||Zl!==null)&&(xs(),Ql&&(t=Ql,e=Zl,Zl=Ql=null,Qc(t),e)))for(t=0;t<e.length;t++)Qc(e[t])}}function Hi(e,t){var n=e.stateNode;if(n===null)return null;var l=n[qt]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(r(231,t,typeof n));return n}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fo=!1;if(Dn)try{var Ii={};Object.defineProperty(Ii,"passive",{get:function(){fo=!0}}),window.addEventListener("test",Ii,Ii),window.removeEventListener("test",Ii,Ii)}catch{fo=!1}var Qn=null,yo=null,Ua=null;function Kc(){if(Ua)return Ua;var e,t=yo,n=t.length,l,i="value"in Qn?Qn.value:Qn.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var c=n-e;for(l=1;l<=c&&t[n-l]===i[s-l];l++);return Ua=i.slice(e,1<l?1-l:void 0)}function La(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wa(){return!0}function Wc(){return!1}function Yt(e){function t(n,l,i,s,c){this._reactName=n,this._targetInst=i,this.type=l,this.nativeEvent=s,this.target=c,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(n=e[h],this[h]=n?n(s):s[h]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wa:Wc,this.isPropagationStopped=Wc,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),t}var Tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ha=Yt(Tl),Gi=x({},Tl,{view:0,detail:0}),Nh=Yt(Gi),ho,po,qi,Ia=x({},Gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qi&&(qi&&e.type==="mousemove"?(ho=e.screenX-qi.screenX,po=e.screenY-qi.screenY):po=ho=0,qi=e),ho)},movementY:function(e){return"movementY"in e?e.movementY:po}}),$c=Yt(Ia),Rh=x({},Ia,{dataTransfer:0}),Ah=Yt(Rh),Ch=x({},Gi,{relatedTarget:0}),go=Yt(Ch),Dh=x({},Tl,{animationName:0,elapsedTime:0,pseudoElement:0}),Bh=Yt(Dh),Mh=x({},Tl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_h=Yt(Mh),zh=x({},Tl,{data:0}),Jc=Yt(zh),Uh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wh[e])?!!t[e]:!1}function mo(){return Hh}var Ih=x({},Gi,{key:function(e){if(e.key){var t=Uh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=La(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mo,charCode:function(e){return e.type==="keypress"?La(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?La(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Gh=Yt(Ih),qh=x({},Ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pc=Yt(qh),Yh=x({},Gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mo}),kh=Yt(Yh),Vh=x({},Tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xh=Yt(Vh),Fh=x({},Ia,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qh=Yt(Fh),Zh=x({},Tl,{newState:0,oldState:0}),Kh=Yt(Zh),Wh=[9,13,27,32],vo=Dn&&"CompositionEvent"in window,Yi=null;Dn&&"documentMode"in document&&(Yi=document.documentMode);var $h=Dn&&"TextEvent"in window&&!Yi,eu=Dn&&(!vo||Yi&&8<Yi&&11>=Yi),tu=" ",nu=!1;function lu(e,t){switch(e){case"keyup":return Wh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kl=!1;function Jh(e,t){switch(e){case"compositionend":return iu(t);case"keypress":return t.which!==32?null:(nu=!0,tu);case"textInput":return e=t.data,e===tu&&nu?null:e;default:return null}}function Ph(e,t){if(Kl)return e==="compositionend"||!vo&&lu(e,t)?(e=Kc(),Ua=yo=Qn=null,Kl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eu&&t.locale!=="ko"?null:t.data;default:return null}}var ep={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function au(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ep[e.type]:t==="textarea"}function su(e,t,n,l){Ql?Zl?Zl.push(l):Zl=[l]:Ql=l,t=As(t,"onChange"),0<t.length&&(n=new Ha("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var ki=null,Vi=null;function tp(e){kf(e,0)}function Ga(e){var t=wi(e);if(qc(t))return e}function ou(e,t){if(e==="change")return t}var ru=!1;if(Dn){var bo;if(Dn){var So="oninput"in document;if(!So){var cu=document.createElement("div");cu.setAttribute("oninput","return;"),So=typeof cu.oninput=="function"}bo=So}else bo=!1;ru=bo&&(!document.documentMode||9<document.documentMode)}function uu(){ki&&(ki.detachEvent("onpropertychange",du),Vi=ki=null)}function du(e){if(e.propertyName==="value"&&Ga(Vi)){var t=[];su(t,Vi,e,co(e)),Zc(tp,t)}}function np(e,t,n){e==="focusin"?(uu(),ki=t,Vi=n,ki.attachEvent("onpropertychange",du)):e==="focusout"&&uu()}function lp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ga(Vi)}function ip(e,t){if(e==="click")return Ga(t)}function ap(e,t){if(e==="input"||e==="change")return Ga(t)}function sp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $t=typeof Object.is=="function"?Object.is:sp;function Xi(e,t){if($t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var i=n[l];if(!yt.call(t,i)||!$t(e[i],t[i]))return!1}return!0}function fu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yu(e,t){var n=fu(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fu(n)}}function hu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=_a(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_a(e.document)}return t}function xo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var op=Dn&&"documentMode"in document&&11>=document.documentMode,Wl=null,To=null,Fi=null,Eo=!1;function gu(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Eo||Wl==null||Wl!==_a(l)||(l=Wl,"selectionStart"in l&&xo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Fi&&Xi(Fi,l)||(Fi=l,l=As(To,"onSelect"),0<l.length&&(t=new Ha("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=Wl)))}function El(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $l={animationend:El("Animation","AnimationEnd"),animationiteration:El("Animation","AnimationIteration"),animationstart:El("Animation","AnimationStart"),transitionrun:El("Transition","TransitionRun"),transitionstart:El("Transition","TransitionStart"),transitioncancel:El("Transition","TransitionCancel"),transitionend:El("Transition","TransitionEnd")},jo={},mu={};Dn&&(mu=document.createElement("div").style,"AnimationEvent"in window||(delete $l.animationend.animation,delete $l.animationiteration.animation,delete $l.animationstart.animation),"TransitionEvent"in window||delete $l.transitionend.transition);function jl(e){if(jo[e])return jo[e];if(!$l[e])return e;var t=$l[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in mu)return jo[e]=t[n];return e}var vu=jl("animationend"),bu=jl("animationiteration"),Su=jl("animationstart"),rp=jl("transitionrun"),cp=jl("transitionstart"),up=jl("transitioncancel"),xu=jl("transitionend"),Tu=new Map,Oo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oo.push("scrollEnd");function gn(e,t){Tu.set(e,t),xl(t,[e])}var qa=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},on=[],Jl=0,No=0;function Ya(){for(var e=Jl,t=No=Jl=0;t<e;){var n=on[t];on[t++]=null;var l=on[t];on[t++]=null;var i=on[t];on[t++]=null;var s=on[t];if(on[t++]=null,l!==null&&i!==null){var c=l.pending;c===null?i.next=i:(i.next=c.next,c.next=i),l.pending=i}s!==0&&Eu(n,i,s)}}function ka(e,t,n,l){on[Jl++]=e,on[Jl++]=t,on[Jl++]=n,on[Jl++]=l,No|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Ro(e,t,n,l){return ka(e,t,n,l),Va(e)}function Ol(e,t){return ka(e,null,null,t),Va(e)}function Eu(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var i=!1,s=e.return;s!==null;)s.childLanes|=n,l=s.alternate,l!==null&&(l.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(i=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,i&&t!==null&&(i=31-Re(n),e=s.hiddenUpdates,l=e[i],l===null?e[i]=[t]:l.push(t),t.lane=n|536870912),s):null}function Va(e){if(50<ha)throw ha=0,Lr=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Pl={};function dp(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(e,t,n,l){return new dp(e,t,n,l)}function Ao(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bn(e,t){var n=e.alternate;return n===null?(n=Jt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ju(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Xa(e,t,n,l,i,s){var c=0;if(l=e,typeof e=="function")Ao(e)&&(c=1);else if(typeof e=="string")c=gg(e,n,P.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case be:return e=Jt(31,n,t,i),e.elementType=be,e.lanes=s,e;case R:return Nl(n.children,i,s,t);case Q:c=8,i|=24;break;case B:return e=Jt(12,n,t,i|2),e.elementType=B,e.lanes=s,e;case ae:return e=Jt(13,n,t,i),e.elementType=ae,e.lanes=s,e;case Ae:return e=Jt(19,n,t,i),e.elementType=Ae,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:c=10;break e;case V:c=9;break e;case C:c=11;break e;case G:c=14;break e;case ve:c=16,l=null;break e}c=29,n=Error(r(130,e===null?"null":typeof e,"")),l=null}return t=Jt(c,n,t,i),t.elementType=e,t.type=l,t.lanes=s,t}function Nl(e,t,n,l){return e=Jt(7,e,l,t),e.lanes=n,e}function Co(e,t,n){return e=Jt(6,e,null,t),e.lanes=n,e}function Ou(e){var t=Jt(18,null,null,0);return t.stateNode=e,t}function Do(e,t,n){return t=Jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Nu=new WeakMap;function rn(e,t){if(typeof e=="object"&&e!==null){var n=Nu.get(e);return n!==void 0?n:(t={value:e,source:t,stack:oe(t)},Nu.set(e,t),t)}return{value:e,source:t,stack:oe(t)}}var ei=[],ti=0,Fa=null,Qi=0,cn=[],un=0,Zn=null,xn=1,Tn="";function Mn(e,t){ei[ti++]=Qi,ei[ti++]=Fa,Fa=e,Qi=t}function Ru(e,t,n){cn[un++]=xn,cn[un++]=Tn,cn[un++]=Zn,Zn=e;var l=xn;e=Tn;var i=32-Re(l)-1;l&=~(1<<i),n+=1;var s=32-Re(t)+i;if(30<s){var c=i-i%5;s=(l&(1<<c)-1).toString(32),l>>=c,i-=c,xn=1<<32-Re(t)+i|n<<i|l,Tn=s+e}else xn=1<<s|n<<i|l,Tn=e}function Bo(e){e.return!==null&&(Mn(e,1),Ru(e,1,0))}function Mo(e){for(;e===Fa;)Fa=ei[--ti],ei[ti]=null,Qi=ei[--ti],ei[ti]=null;for(;e===Zn;)Zn=cn[--un],cn[un]=null,Tn=cn[--un],cn[un]=null,xn=cn[--un],cn[un]=null}function Au(e,t){cn[un++]=xn,cn[un++]=Tn,cn[un++]=Zn,xn=t.id,Tn=t.overflow,Zn=e}var Mt=null,ct=null,Ve=!1,Kn=null,dn=!1,_o=Error(r(519));function Wn(e){var t=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zi(rn(t,e)),_o}function Cu(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[Bt]=e,t[qt]=l,n){case"dialog":Ie("cancel",t),Ie("close",t);break;case"iframe":case"object":case"embed":Ie("load",t);break;case"video":case"audio":for(n=0;n<ga.length;n++)Ie(ga[n],t);break;case"source":Ie("error",t);break;case"img":case"image":case"link":Ie("error",t),Ie("load",t);break;case"details":Ie("toggle",t);break;case"input":Ie("invalid",t),Yc(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ie("invalid",t);break;case"textarea":Ie("invalid",t),Vc(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||Qf(t.textContent,n)?(l.popover!=null&&(Ie("beforetoggle",t),Ie("toggle",t)),l.onScroll!=null&&Ie("scroll",t),l.onScrollEnd!=null&&Ie("scrollend",t),l.onClick!=null&&(t.onclick=Cn),t=!0):t=!1,t||Wn(e,!0)}function Du(e){for(Mt=e.return;Mt;)switch(Mt.tag){case 5:case 31:case 13:dn=!1;return;case 27:case 3:dn=!0;return;default:Mt=Mt.return}}function ni(e){if(e!==Mt)return!1;if(!Ve)return Du(e),Ve=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||$r(e.type,e.memoizedProps)),n=!n),n&&ct&&Wn(e),Du(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));ct=ny(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));ct=ny(e)}else t===27?(t=ct,ul(e.type)?(e=nc,nc=null,ct=e):ct=t):ct=Mt?yn(e.stateNode.nextSibling):null;return!0}function Rl(){ct=Mt=null,Ve=!1}function zo(){var e=Kn;return e!==null&&(Ft===null?Ft=e:Ft.push.apply(Ft,e),Kn=null),e}function Zi(e){Kn===null?Kn=[e]:Kn.push(e)}var Uo=p(null),Al=null,_n=null;function $n(e,t,n){$(Uo,t._currentValue),t._currentValue=n}function zn(e){e._currentValue=Uo.current,N(Uo)}function Lo(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function wo(e,t,n,l){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var s=i.dependencies;if(s!==null){var c=i.child;s=s.firstContext;e:for(;s!==null;){var h=s;s=i;for(var S=0;S<t.length;S++)if(h.context===t[S]){s.lanes|=n,h=s.alternate,h!==null&&(h.lanes|=n),Lo(s.return,n,e),l||(c=null);break e}s=h.next}}else if(i.tag===18){if(c=i.return,c===null)throw Error(r(341));c.lanes|=n,s=c.alternate,s!==null&&(s.lanes|=n),Lo(c,n,e),c=null}else c=i.child;if(c!==null)c.return=i;else for(c=i;c!==null;){if(c===e){c=null;break}if(i=c.sibling,i!==null){i.return=c.return,c=i;break}c=c.return}i=c}}function li(e,t,n,l){e=null;for(var i=t,s=!1;i!==null;){if(!s){if((i.flags&524288)!==0)s=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var c=i.alternate;if(c===null)throw Error(r(387));if(c=c.memoizedProps,c!==null){var h=i.type;$t(i.pendingProps.value,c.value)||(e!==null?e.push(h):e=[h])}}else if(i===Se.current){if(c=i.alternate,c===null)throw Error(r(387));c.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(xa):e=[xa])}i=i.return}e!==null&&wo(t,e,n,l),t.flags|=262144}function Qa(e){for(e=e.firstContext;e!==null;){if(!$t(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cl(e){Al=e,_n=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _t(e){return Bu(Al,e)}function Za(e,t){return Al===null&&Cl(e),Bu(e,t)}function Bu(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},_n===null){if(e===null)throw Error(r(308));_n=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else _n=_n.next=t;return n}var fp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},yp=o.unstable_scheduleCallback,hp=o.unstable_NormalPriority,Tt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ho(){return{controller:new fp,data:new Map,refCount:0}}function Ki(e){e.refCount--,e.refCount===0&&yp(hp,function(){e.controller.abort()})}var Wi=null,Io=0,ii=0,ai=null;function pp(e,t){if(Wi===null){var n=Wi=[];Io=0,ii=Yr(),ai={status:"pending",value:void 0,then:function(l){n.push(l)}}}return Io++,t.then(Mu,Mu),t}function Mu(){if(--Io===0&&Wi!==null){ai!==null&&(ai.status="fulfilled");var e=Wi;Wi=null,ii=0,ai=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function gp(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var i=0;i<n.length;i++)(0,n[i])(t)},function(i){for(l.status="rejected",l.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),l}var _u=M.S;M.S=function(e,t){mf=ee(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&pp(e,t),_u!==null&&_u(e,t)};var Dl=p(null);function Go(){var e=Dl.current;return e!==null?e:st.pooledCache}function Ka(e,t){t===null?$(Dl,Dl.current):$(Dl,t.pool)}function zu(){var e=Go();return e===null?null:{parent:Tt._currentValue,pool:e}}var si=Error(r(460)),qo=Error(r(474)),Wa=Error(r(542)),$a={then:function(){}};function Uu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Lu(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Cn,Cn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Hu(e),e;default:if(typeof t.status=="string")t.then(Cn,Cn);else{if(e=st,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=l}},function(l){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Hu(e),e}throw Ml=t,si}}function Bl(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ml=n,si):n}}var Ml=null;function wu(){if(Ml===null)throw Error(r(459));var e=Ml;return Ml=null,e}function Hu(e){if(e===si||e===Wa)throw Error(r(483))}var oi=null,$i=0;function Ja(e){var t=$i;return $i+=1,oi===null&&(oi=[]),Lu(oi,e,t)}function Ji(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Pa(e,t){throw t.$$typeof===L?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Iu(e){function t(O,T){if(e){var _=O.deletions;_===null?(O.deletions=[T],O.flags|=16):_.push(T)}}function n(O,T){if(!e)return null;for(;T!==null;)t(O,T),T=T.sibling;return null}function l(O){for(var T=new Map;O!==null;)O.key!==null?T.set(O.key,O):T.set(O.index,O),O=O.sibling;return T}function i(O,T){return O=Bn(O,T),O.index=0,O.sibling=null,O}function s(O,T,_){return O.index=_,e?(_=O.alternate,_!==null?(_=_.index,_<T?(O.flags|=67108866,T):_):(O.flags|=67108866,T)):(O.flags|=1048576,T)}function c(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function h(O,T,_,K){return T===null||T.tag!==6?(T=Co(_,O.mode,K),T.return=O,T):(T=i(T,_),T.return=O,T)}function S(O,T,_,K){var me=_.type;return me===R?F(O,T,_.props.children,K,_.key):T!==null&&(T.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ve&&Bl(me)===T.type)?(T=i(T,_.props),Ji(T,_),T.return=O,T):(T=Xa(_.type,_.key,_.props,null,O.mode,K),Ji(T,_),T.return=O,T)}function U(O,T,_,K){return T===null||T.tag!==4||T.stateNode.containerInfo!==_.containerInfo||T.stateNode.implementation!==_.implementation?(T=Do(_,O.mode,K),T.return=O,T):(T=i(T,_.children||[]),T.return=O,T)}function F(O,T,_,K,me){return T===null||T.tag!==7?(T=Nl(_,O.mode,K,me),T.return=O,T):(T=i(T,_),T.return=O,T)}function W(O,T,_){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Co(""+T,O.mode,_),T.return=O,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case D:return _=Xa(T.type,T.key,T.props,null,O.mode,_),Ji(_,T),_.return=O,_;case Z:return T=Do(T,O.mode,_),T.return=O,T;case ve:return T=Bl(T),W(O,T,_)}if(Xe(T)||ue(T))return T=Nl(T,O.mode,_,null),T.return=O,T;if(typeof T.then=="function")return W(O,Ja(T),_);if(T.$$typeof===z)return W(O,Za(O,T),_);Pa(O,T)}return null}function I(O,T,_,K){var me=T!==null?T.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return me!==null?null:h(O,T,""+_,K);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case D:return _.key===me?S(O,T,_,K):null;case Z:return _.key===me?U(O,T,_,K):null;case ve:return _=Bl(_),I(O,T,_,K)}if(Xe(_)||ue(_))return me!==null?null:F(O,T,_,K,null);if(typeof _.then=="function")return I(O,T,Ja(_),K);if(_.$$typeof===z)return I(O,T,Za(O,_),K);Pa(O,_)}return null}function q(O,T,_,K,me){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return O=O.get(_)||null,h(T,O,""+K,me);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case D:return O=O.get(K.key===null?_:K.key)||null,S(T,O,K,me);case Z:return O=O.get(K.key===null?_:K.key)||null,U(T,O,K,me);case ve:return K=Bl(K),q(O,T,_,K,me)}if(Xe(K)||ue(K))return O=O.get(_)||null,F(T,O,K,me,null);if(typeof K.then=="function")return q(O,T,_,Ja(K),me);if(K.$$typeof===z)return q(O,T,_,Za(T,K),me);Pa(T,K)}return null}function ce(O,T,_,K){for(var me=null,Qe=null,ye=T,_e=T=0,qe=null;ye!==null&&_e<_.length;_e++){ye.index>_e?(qe=ye,ye=null):qe=ye.sibling;var Ze=I(O,ye,_[_e],K);if(Ze===null){ye===null&&(ye=qe);break}e&&ye&&Ze.alternate===null&&t(O,ye),T=s(Ze,T,_e),Qe===null?me=Ze:Qe.sibling=Ze,Qe=Ze,ye=qe}if(_e===_.length)return n(O,ye),Ve&&Mn(O,_e),me;if(ye===null){for(;_e<_.length;_e++)ye=W(O,_[_e],K),ye!==null&&(T=s(ye,T,_e),Qe===null?me=ye:Qe.sibling=ye,Qe=ye);return Ve&&Mn(O,_e),me}for(ye=l(ye);_e<_.length;_e++)qe=q(ye,O,_e,_[_e],K),qe!==null&&(e&&qe.alternate!==null&&ye.delete(qe.key===null?_e:qe.key),T=s(qe,T,_e),Qe===null?me=qe:Qe.sibling=qe,Qe=qe);return e&&ye.forEach(function(pl){return t(O,pl)}),Ve&&Mn(O,_e),me}function xe(O,T,_,K){if(_==null)throw Error(r(151));for(var me=null,Qe=null,ye=T,_e=T=0,qe=null,Ze=_.next();ye!==null&&!Ze.done;_e++,Ze=_.next()){ye.index>_e?(qe=ye,ye=null):qe=ye.sibling;var pl=I(O,ye,Ze.value,K);if(pl===null){ye===null&&(ye=qe);break}e&&ye&&pl.alternate===null&&t(O,ye),T=s(pl,T,_e),Qe===null?me=pl:Qe.sibling=pl,Qe=pl,ye=qe}if(Ze.done)return n(O,ye),Ve&&Mn(O,_e),me;if(ye===null){for(;!Ze.done;_e++,Ze=_.next())Ze=W(O,Ze.value,K),Ze!==null&&(T=s(Ze,T,_e),Qe===null?me=Ze:Qe.sibling=Ze,Qe=Ze);return Ve&&Mn(O,_e),me}for(ye=l(ye);!Ze.done;_e++,Ze=_.next())Ze=q(ye,O,_e,Ze.value,K),Ze!==null&&(e&&Ze.alternate!==null&&ye.delete(Ze.key===null?_e:Ze.key),T=s(Ze,T,_e),Qe===null?me=Ze:Qe.sibling=Ze,Qe=Ze);return e&&ye.forEach(function(Rg){return t(O,Rg)}),Ve&&Mn(O,_e),me}function it(O,T,_,K){if(typeof _=="object"&&_!==null&&_.type===R&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case D:e:{for(var me=_.key;T!==null;){if(T.key===me){if(me=_.type,me===R){if(T.tag===7){n(O,T.sibling),K=i(T,_.props.children),K.return=O,O=K;break e}}else if(T.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ve&&Bl(me)===T.type){n(O,T.sibling),K=i(T,_.props),Ji(K,_),K.return=O,O=K;break e}n(O,T);break}else t(O,T);T=T.sibling}_.type===R?(K=Nl(_.props.children,O.mode,K,_.key),K.return=O,O=K):(K=Xa(_.type,_.key,_.props,null,O.mode,K),Ji(K,_),K.return=O,O=K)}return c(O);case Z:e:{for(me=_.key;T!==null;){if(T.key===me)if(T.tag===4&&T.stateNode.containerInfo===_.containerInfo&&T.stateNode.implementation===_.implementation){n(O,T.sibling),K=i(T,_.children||[]),K.return=O,O=K;break e}else{n(O,T);break}else t(O,T);T=T.sibling}K=Do(_,O.mode,K),K.return=O,O=K}return c(O);case ve:return _=Bl(_),it(O,T,_,K)}if(Xe(_))return ce(O,T,_,K);if(ue(_)){if(me=ue(_),typeof me!="function")throw Error(r(150));return _=me.call(_),xe(O,T,_,K)}if(typeof _.then=="function")return it(O,T,Ja(_),K);if(_.$$typeof===z)return it(O,T,Za(O,_),K);Pa(O,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,T!==null&&T.tag===6?(n(O,T.sibling),K=i(T,_),K.return=O,O=K):(n(O,T),K=Co(_,O.mode,K),K.return=O,O=K),c(O)):n(O,T)}return function(O,T,_,K){try{$i=0;var me=it(O,T,_,K);return oi=null,me}catch(ye){if(ye===si||ye===Wa)throw ye;var Qe=Jt(29,ye,null,O.mode);return Qe.lanes=K,Qe.return=O,Qe}}}var _l=Iu(!0),Gu=Iu(!1),Jn=!1;function Yo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ko(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Pn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function el(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Je&2)!==0){var i=l.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),l.pending=t,t=Va(e),Eu(e,null,n),t}return ka(e,l,t,n),Va(e)}function Pi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Fn(e,n)}}function Vo(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var c={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?i=s=c:s=s.next=c,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:l.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Xo=!1;function ea(){if(Xo){var e=ai;if(e!==null)throw e}}function ta(e,t,n,l){Xo=!1;var i=e.updateQueue;Jn=!1;var s=i.firstBaseUpdate,c=i.lastBaseUpdate,h=i.shared.pending;if(h!==null){i.shared.pending=null;var S=h,U=S.next;S.next=null,c===null?s=U:c.next=U,c=S;var F=e.alternate;F!==null&&(F=F.updateQueue,h=F.lastBaseUpdate,h!==c&&(h===null?F.firstBaseUpdate=U:h.next=U,F.lastBaseUpdate=S))}if(s!==null){var W=i.baseState;c=0,F=U=S=null,h=s;do{var I=h.lane&-536870913,q=I!==h.lane;if(q?(Ge&I)===I:(l&I)===I){I!==0&&I===ii&&(Xo=!0),F!==null&&(F=F.next={lane:0,tag:h.tag,payload:h.payload,callback:null,next:null});e:{var ce=e,xe=h;I=t;var it=n;switch(xe.tag){case 1:if(ce=xe.payload,typeof ce=="function"){W=ce.call(it,W,I);break e}W=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=xe.payload,I=typeof ce=="function"?ce.call(it,W,I):ce,I==null)break e;W=x({},W,I);break e;case 2:Jn=!0}}I=h.callback,I!==null&&(e.flags|=64,q&&(e.flags|=8192),q=i.callbacks,q===null?i.callbacks=[I]:q.push(I))}else q={lane:I,tag:h.tag,payload:h.payload,callback:h.callback,next:null},F===null?(U=F=q,S=W):F=F.next=q,c|=I;if(h=h.next,h===null){if(h=i.shared.pending,h===null)break;q=h,h=q.next,q.next=null,i.lastBaseUpdate=q,i.shared.pending=null}}while(!0);F===null&&(S=W),i.baseState=S,i.firstBaseUpdate=U,i.lastBaseUpdate=F,s===null&&(i.shared.lanes=0),al|=c,e.lanes=c,e.memoizedState=W}}function qu(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function Yu(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)qu(n[e],t)}var ri=p(null),es=p(0);function ku(e,t){e=kn,$(es,e),$(ri,t),kn=e|t.baseLanes}function Fo(){$(es,kn),$(ri,ri.current)}function Qo(){kn=es.current,N(ri),N(es)}var Pt=p(null),fn=null;function tl(e){var t=e.alternate;$(bt,bt.current&1),$(Pt,e),fn===null&&(t===null||ri.current!==null||t.memoizedState!==null)&&(fn=e)}function Zo(e){$(bt,bt.current),$(Pt,e),fn===null&&(fn=e)}function Vu(e){e.tag===22?($(bt,bt.current),$(Pt,e),fn===null&&(fn=e)):nl()}function nl(){$(bt,bt.current),$(Pt,Pt.current)}function en(e){N(Pt),fn===e&&(fn=null),N(bt)}var bt=p(0);function ts(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||ec(n)||tc(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Un=0,Me=null,nt=null,Et=null,ns=!1,ci=!1,zl=!1,ls=0,na=0,ui=null,mp=0;function pt(){throw Error(r(321))}function Ko(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$t(e[n],t[n]))return!1;return!0}function Wo(e,t,n,l,i,s){return Un=s,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=e===null||e.memoizedState===null?Rd:dr,zl=!1,s=n(l,i),zl=!1,ci&&(s=Fu(t,n,l,i)),Xu(e),s}function Xu(e){M.H=aa;var t=nt!==null&&nt.next!==null;if(Un=0,Et=nt=Me=null,ns=!1,na=0,ui=null,t)throw Error(r(300));e===null||jt||(e=e.dependencies,e!==null&&Qa(e)&&(jt=!0))}function Fu(e,t,n,l){Me=e;var i=0;do{if(ci&&(ui=null),na=0,ci=!1,25<=i)throw Error(r(301));if(i+=1,Et=nt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}M.H=Ad,s=t(n,l)}while(ci);return s}function vp(){var e=M.H,t=e.useState()[0];return t=typeof t.then=="function"?la(t):t,e=e.useState()[0],(nt!==null?nt.memoizedState:null)!==e&&(Me.flags|=1024),t}function $o(){var e=ls!==0;return ls=0,e}function Jo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Po(e){if(ns){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ns=!1}Un=0,Et=nt=Me=null,ci=!1,na=ls=0,ui=null}function It(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Me.memoizedState=Et=e:Et=Et.next=e,Et}function St(){if(nt===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=Et===null?Me.memoizedState:Et.next;if(t!==null)Et=t,nt=e;else{if(e===null)throw Me.alternate===null?Error(r(467)):Error(r(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Et===null?Me.memoizedState=Et=e:Et=Et.next=e}return Et}function is(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function la(e){var t=na;return na+=1,ui===null&&(ui=[]),e=Lu(ui,e,t),t=Me,(Et===null?t.memoizedState:Et.next)===null&&(t=t.alternate,M.H=t===null||t.memoizedState===null?Rd:dr),e}function as(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return la(e);if(e.$$typeof===z)return _t(e)}throw Error(r(438,String(e)))}function er(e){var t=null,n=Me.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=Me.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=is(),Me.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=we;return t.index++,n}function Ln(e,t){return typeof t=="function"?t(e):t}function ss(e){var t=St();return tr(t,nt,e)}function tr(e,t,n){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=n;var i=e.baseQueue,s=l.pending;if(s!==null){if(i!==null){var c=i.next;i.next=s.next,s.next=c}t.baseQueue=i=s,l.pending=null}if(s=e.baseState,i===null)e.memoizedState=s;else{t=i.next;var h=c=null,S=null,U=t,F=!1;do{var W=U.lane&-536870913;if(W!==U.lane?(Ge&W)===W:(Un&W)===W){var I=U.revertLane;if(I===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),W===ii&&(F=!0);else if((Un&I)===I){U=U.next,I===ii&&(F=!0);continue}else W={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},S===null?(h=S=W,c=s):S=S.next=W,Me.lanes|=I,al|=I;W=U.action,zl&&n(s,W),s=U.hasEagerState?U.eagerState:n(s,W)}else I={lane:W,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},S===null?(h=S=I,c=s):S=S.next=I,Me.lanes|=W,al|=W;U=U.next}while(U!==null&&U!==t);if(S===null?c=s:S.next=h,!$t(s,e.memoizedState)&&(jt=!0,F&&(n=ai,n!==null)))throw n;e.memoizedState=s,e.baseState=c,e.baseQueue=S,l.lastRenderedState=s}return i===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function nr(e){var t=St(),n=t.queue;if(n===null)throw Error(r(311));n.lastRenderedReducer=e;var l=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var c=i=i.next;do s=e(s,c.action),c=c.next;while(c!==i);$t(s,t.memoizedState)||(jt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,l]}function Qu(e,t,n){var l=Me,i=St(),s=Ve;if(s){if(n===void 0)throw Error(r(407));n=n()}else n=t();var c=!$t((nt||i).memoizedState,n);if(c&&(i.memoizedState=n,jt=!0),i=i.queue,ar(Wu.bind(null,l,i,e),[e]),i.getSnapshot!==t||c||Et!==null&&Et.memoizedState.tag&1){if(l.flags|=2048,di(9,{destroy:void 0},Ku.bind(null,l,i,n,t),null),st===null)throw Error(r(349));s||(Un&127)!==0||Zu(l,t,n)}return n}function Zu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Me.updateQueue,t===null?(t=is(),Me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ku(e,t,n,l){t.value=n,t.getSnapshot=l,$u(t)&&Ju(e)}function Wu(e,t,n){return n(function(){$u(t)&&Ju(e)})}function $u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$t(e,n)}catch{return!0}}function Ju(e){var t=Ol(e,2);t!==null&&Qt(t,e,2)}function lr(e){var t=It();if(typeof e=="function"){var n=e;if(e=n(),zl){at(!0);try{n()}finally{at(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:e},t}function Pu(e,t,n,l){return e.baseState=n,tr(e,nt,typeof l=="function"?l:Ln)}function bp(e,t,n,l,i){if(cs(e))throw Error(r(485));if(e=t.action,e!==null){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){s.listeners.push(c)}};M.T!==null?n(!0):s.isTransition=!1,l(s),n=t.pending,n===null?(s.next=t.pending=s,ed(t,s)):(s.next=n.next,t.pending=n.next=s)}}function ed(e,t){var n=t.action,l=t.payload,i=e.state;if(t.isTransition){var s=M.T,c={};M.T=c;try{var h=n(i,l),S=M.S;S!==null&&S(c,h),td(e,t,h)}catch(U){ir(e,t,U)}finally{s!==null&&c.types!==null&&(s.types=c.types),M.T=s}}else try{s=n(i,l),td(e,t,s)}catch(U){ir(e,t,U)}}function td(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){nd(e,t,l)},function(l){return ir(e,t,l)}):nd(e,t,n)}function nd(e,t,n){t.status="fulfilled",t.value=n,ld(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,ed(e,n)))}function ir(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,ld(t),t=t.next;while(t!==l)}e.action=null}function ld(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function id(e,t){return t}function ad(e,t){if(Ve){var n=st.formState;if(n!==null){e:{var l=Me;if(Ve){if(ct){t:{for(var i=ct,s=dn;i.nodeType!==8;){if(!s){i=null;break t}if(i=yn(i.nextSibling),i===null){i=null;break t}}s=i.data,i=s==="F!"||s==="F"?i:null}if(i){ct=yn(i.nextSibling),l=i.data==="F!";break e}}Wn(l)}l=!1}l&&(t=n[0])}}return n=It(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:id,lastRenderedState:t},n.queue=l,n=jd.bind(null,Me,l),l.dispatch=n,l=lr(!1),s=ur.bind(null,Me,!1,l.queue),l=It(),i={state:t,dispatch:null,action:e,pending:null},l.queue=i,n=bp.bind(null,Me,i,s,n),i.dispatch=n,l.memoizedState=e,[t,n,!1]}function sd(e){var t=St();return od(t,nt,e)}function od(e,t,n){if(t=tr(e,t,id)[0],e=ss(Ln)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=la(t)}catch(c){throw c===si?Wa:c}else l=t;t=St();var i=t.queue,s=i.dispatch;return n!==t.memoizedState&&(Me.flags|=2048,di(9,{destroy:void 0},Sp.bind(null,i,n),null)),[l,s,e]}function Sp(e,t){e.action=t}function rd(e){var t=St(),n=nt;if(n!==null)return od(t,n,e);St(),t=t.memoizedState,n=St();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function di(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=Me.updateQueue,t===null&&(t=is(),Me.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function cd(){return St().memoizedState}function os(e,t,n,l){var i=It();Me.flags|=e,i.memoizedState=di(1|t,{destroy:void 0},n,l===void 0?null:l)}function rs(e,t,n,l){var i=St();l=l===void 0?null:l;var s=i.memoizedState.inst;nt!==null&&l!==null&&Ko(l,nt.memoizedState.deps)?i.memoizedState=di(t,s,n,l):(Me.flags|=e,i.memoizedState=di(1|t,s,n,l))}function ud(e,t){os(8390656,8,e,t)}function ar(e,t){rs(2048,8,e,t)}function xp(e){Me.flags|=4;var t=Me.updateQueue;if(t===null)t=is(),Me.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function dd(e){var t=St().memoizedState;return xp({ref:t,nextImpl:e}),function(){if((Je&2)!==0)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function fd(e,t){return rs(4,2,e,t)}function yd(e,t){return rs(4,4,e,t)}function hd(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pd(e,t,n){n=n!=null?n.concat([e]):null,rs(4,4,hd.bind(null,t,e),n)}function sr(){}function gd(e,t){var n=St();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&Ko(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function md(e,t){var n=St();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&Ko(t,l[1]))return l[0];if(l=e(),zl){at(!0);try{e()}finally{at(!1)}}return n.memoizedState=[l,t],l}function or(e,t,n){return n===void 0||(Un&1073741824)!==0&&(Ge&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=bf(),Me.lanes|=e,al|=e,n)}function vd(e,t,n,l){return $t(n,t)?n:ri.current!==null?(e=or(e,n,l),$t(e,t)||(jt=!0),e):(Un&42)===0||(Un&1073741824)!==0&&(Ge&261930)===0?(jt=!0,e.memoizedState=n):(e=bf(),Me.lanes|=e,al|=e,t)}function bd(e,t,n,l,i){var s=J.p;J.p=s!==0&&8>s?s:8;var c=M.T,h={};M.T=h,ur(e,!1,t,n);try{var S=i(),U=M.S;if(U!==null&&U(h,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var F=gp(S,l);ia(e,t,F,ln(e))}else ia(e,t,l,ln(e))}catch(W){ia(e,t,{then:function(){},status:"rejected",reason:W},ln())}finally{J.p=s,c!==null&&h.types!==null&&(c.types=h.types),M.T=c}}function Tp(){}function rr(e,t,n,l){if(e.tag!==5)throw Error(r(476));var i=Sd(e).queue;bd(e,i,t,ie,n===null?Tp:function(){return xd(e),n(l)})}function Sd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:ie},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function xd(e){var t=Sd(e);t.next===null&&(t=e.alternate.memoizedState),ia(e,t.next.queue,{},ln())}function cr(){return _t(xa)}function Td(){return St().memoizedState}function Ed(){return St().memoizedState}function Ep(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=ln();e=Pn(n);var l=el(t,e,n);l!==null&&(Qt(l,t,n),Pi(l,t,n)),t={cache:Ho()},e.payload=t;return}t=t.return}}function jp(e,t,n){var l=ln();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},cs(e)?Od(t,n):(n=Ro(e,t,n,l),n!==null&&(Qt(n,e,l),Nd(n,t,l)))}function jd(e,t,n){var l=ln();ia(e,t,n,l)}function ia(e,t,n,l){var i={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(cs(e))Od(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var c=t.lastRenderedState,h=s(c,n);if(i.hasEagerState=!0,i.eagerState=h,$t(h,c))return ka(e,t,i,0),st===null&&Ya(),!1}catch{}if(n=Ro(e,t,i,l),n!==null)return Qt(n,e,l),Nd(n,t,l),!0}return!1}function ur(e,t,n,l){if(l={lane:2,revertLane:Yr(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},cs(e)){if(t)throw Error(r(479))}else t=Ro(e,n,l,2),t!==null&&Qt(t,e,2)}function cs(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function Od(e,t){ci=ns=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Nd(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Fn(e,n)}}var aa={readContext:_t,use:as,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};aa.useEffectEvent=pt;var Rd={readContext:_t,use:as,useCallback:function(e,t){return It().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:ud,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,os(4194308,4,hd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return os(4194308,4,e,t)},useInsertionEffect:function(e,t){os(4,2,e,t)},useMemo:function(e,t){var n=It();t=t===void 0?null:t;var l=e();if(zl){at(!0);try{e()}finally{at(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=It();if(n!==void 0){var i=n(t);if(zl){at(!0);try{n(t)}finally{at(!1)}}}else i=t;return l.memoizedState=l.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},l.queue=e,e=e.dispatch=jp.bind(null,Me,e),[l.memoizedState,e]},useRef:function(e){var t=It();return e={current:e},t.memoizedState=e},useState:function(e){e=lr(e);var t=e.queue,n=jd.bind(null,Me,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:sr,useDeferredValue:function(e,t){var n=It();return or(n,e,t)},useTransition:function(){var e=lr(!1);return e=bd.bind(null,Me,e.queue,!0,!1),It().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=Me,i=It();if(Ve){if(n===void 0)throw Error(r(407));n=n()}else{if(n=t(),st===null)throw Error(r(349));(Ge&127)!==0||Zu(l,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ud(Wu.bind(null,l,s,e),[e]),l.flags|=2048,di(9,{destroy:void 0},Ku.bind(null,l,s,n,t),null),n},useId:function(){var e=It(),t=st.identifierPrefix;if(Ve){var n=Tn,l=xn;n=(l&~(1<<32-Re(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=ls++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=mp++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:cr,useFormState:ad,useActionState:ad,useOptimistic:function(e){var t=It();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ur.bind(null,Me,!0,n),n.dispatch=t,[e,t]},useMemoCache:er,useCacheRefresh:function(){return It().memoizedState=Ep.bind(null,Me)},useEffectEvent:function(e){var t=It(),n={impl:e};return t.memoizedState=n,function(){if((Je&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}},dr={readContext:_t,use:as,useCallback:gd,useContext:_t,useEffect:ar,useImperativeHandle:pd,useInsertionEffect:fd,useLayoutEffect:yd,useMemo:md,useReducer:ss,useRef:cd,useState:function(){return ss(Ln)},useDebugValue:sr,useDeferredValue:function(e,t){var n=St();return vd(n,nt.memoizedState,e,t)},useTransition:function(){var e=ss(Ln)[0],t=St().memoizedState;return[typeof e=="boolean"?e:la(e),t]},useSyncExternalStore:Qu,useId:Td,useHostTransitionStatus:cr,useFormState:sd,useActionState:sd,useOptimistic:function(e,t){var n=St();return Pu(n,nt,e,t)},useMemoCache:er,useCacheRefresh:Ed};dr.useEffectEvent=dd;var Ad={readContext:_t,use:as,useCallback:gd,useContext:_t,useEffect:ar,useImperativeHandle:pd,useInsertionEffect:fd,useLayoutEffect:yd,useMemo:md,useReducer:nr,useRef:cd,useState:function(){return nr(Ln)},useDebugValue:sr,useDeferredValue:function(e,t){var n=St();return nt===null?or(n,e,t):vd(n,nt.memoizedState,e,t)},useTransition:function(){var e=nr(Ln)[0],t=St().memoizedState;return[typeof e=="boolean"?e:la(e),t]},useSyncExternalStore:Qu,useId:Td,useHostTransitionStatus:cr,useFormState:rd,useActionState:rd,useOptimistic:function(e,t){var n=St();return nt!==null?Pu(n,nt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:er,useCacheRefresh:Ed};Ad.useEffectEvent=dd;function fr(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:x({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yr={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=ln(),i=Pn(l);i.payload=t,n!=null&&(i.callback=n),t=el(e,i,l),t!==null&&(Qt(t,e,l),Pi(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=ln(),i=Pn(l);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=el(e,i,l),t!==null&&(Qt(t,e,l),Pi(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ln(),l=Pn(n);l.tag=2,t!=null&&(l.callback=t),t=el(e,l,n),t!==null&&(Qt(t,e,n),Pi(t,e,n))}};function Cd(e,t,n,l,i,s,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,s,c):t.prototype&&t.prototype.isPureReactComponent?!Xi(n,l)||!Xi(i,s):!0}function Dd(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&yr.enqueueReplaceState(t,t.state,null)}function Ul(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=x({},n));for(var i in e)n[i]===void 0&&(n[i]=e[i])}return n}function Bd(e){qa(e)}function Md(e){console.error(e)}function _d(e){qa(e)}function us(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function zd(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function hr(e,t,n){return n=Pn(n),n.tag=3,n.payload={element:null},n.callback=function(){us(e,t)},n}function Ud(e){return e=Pn(e),e.tag=3,e}function Ld(e,t,n,l){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=l.value;e.payload=function(){return i(s)},e.callback=function(){zd(t,n,l)}}var c=n.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){zd(t,n,l),typeof i!="function"&&(sl===null?sl=new Set([this]):sl.add(this));var h=l.stack;this.componentDidCatch(l.value,{componentStack:h!==null?h:""})})}function Op(e,t,n,l,i){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&li(t,n,i,!0),n=Pt.current,n!==null){switch(n.tag){case 31:case 13:return fn===null?Ts():n.alternate===null&&gt===0&&(gt=3),n.flags&=-257,n.flags|=65536,n.lanes=i,l===$a?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),Ir(e,l,i)),!1;case 22:return n.flags|=65536,l===$a?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),Ir(e,l,i)),!1}throw Error(r(435,n.tag))}return Ir(e,l,i),Ts(),!1}if(Ve)return t=Pt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,l!==_o&&(e=Error(r(422),{cause:l}),Zi(rn(e,n)))):(l!==_o&&(t=Error(r(423),{cause:l}),Zi(rn(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,l=rn(l,n),i=hr(e.stateNode,l,i),Vo(e,i),gt!==4&&(gt=2)),!1;var s=Error(r(520),{cause:l});if(s=rn(s,n),ya===null?ya=[s]:ya.push(s),gt!==4&&(gt=2),t===null)return!0;l=rn(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=hr(n.stateNode,l,e),Vo(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(sl===null||!sl.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,i=Ud(i),Ld(i,e,n,l),Vo(n,i),!1}n=n.return}while(n!==null);return!1}var pr=Error(r(461)),jt=!1;function zt(e,t,n,l){t.child=e===null?Gu(t,null,n,l):_l(t,e.child,n,l)}function wd(e,t,n,l,i){n=n.render;var s=t.ref;if("ref"in l){var c={};for(var h in l)h!=="ref"&&(c[h]=l[h])}else c=l;return Cl(t),l=Wo(e,t,n,c,s,i),h=$o(),e!==null&&!jt?(Jo(e,t,i),wn(e,t,i)):(Ve&&h&&Bo(t),t.flags|=1,zt(e,t,l,i),t.child)}function Hd(e,t,n,l,i){if(e===null){var s=n.type;return typeof s=="function"&&!Ao(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,Id(e,t,s,l,i)):(e=Xa(n.type,null,l,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Er(e,i)){var c=s.memoizedProps;if(n=n.compare,n=n!==null?n:Xi,n(c,l)&&e.ref===t.ref)return wn(e,t,i)}return t.flags|=1,e=Bn(s,l),e.ref=t.ref,e.return=t,t.child=e}function Id(e,t,n,l,i){if(e!==null){var s=e.memoizedProps;if(Xi(s,l)&&e.ref===t.ref)if(jt=!1,t.pendingProps=l=s,Er(e,i))(e.flags&131072)!==0&&(jt=!0);else return t.lanes=e.lanes,wn(e,t,i)}return gr(e,t,n,l,i)}function Gd(e,t,n,l){var i=l.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(s=s!==null?s.baseLanes|n:n,e!==null){for(l=t.child=e.child,i=0;l!==null;)i=i|l.lanes|l.childLanes,l=l.sibling;l=i&~s}else l=0,t.child=null;return qd(e,t,s,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ka(t,s!==null?s.cachePool:null),s!==null?ku(t,s):Fo(),Vu(t);else return l=t.lanes=536870912,qd(e,t,s!==null?s.baseLanes|n:n,n,l)}else s!==null?(Ka(t,s.cachePool),ku(t,s),nl(),t.memoizedState=null):(e!==null&&Ka(t,null),Fo(),nl());return zt(e,t,i,n),t.child}function sa(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function qd(e,t,n,l,i){var s=Go();return s=s===null?null:{parent:Tt._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&Ka(t,null),Fo(),Vu(t),e!==null&&li(e,t,l,!0),t.childLanes=i,null}function ds(e,t){return t=ys({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Yd(e,t,n){return _l(t,e.child,null,n),e=ds(t,t.pendingProps),e.flags|=2,en(t),t.memoizedState=null,e}function Np(e,t,n){var l=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ve){if(l.mode==="hidden")return e=ds(t,l),t.lanes=536870912,sa(null,e);if(Zo(t),(e=ct)?(e=ty(e,dn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zn!==null?{id:xn,overflow:Tn}:null,retryLane:536870912,hydrationErrors:null},n=Ou(e),n.return=t,t.child=n,Mt=t,ct=null)):e=null,e===null)throw Wn(t);return t.lanes=536870912,null}return ds(t,l)}var s=e.memoizedState;if(s!==null){var c=s.dehydrated;if(Zo(t),i)if(t.flags&256)t.flags&=-257,t=Yd(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(r(558));else if(jt||li(e,t,n,!1),i=(n&e.childLanes)!==0,jt||i){if(l=st,l!==null&&(c=Ui(l,n),c!==0&&c!==s.retryLane))throw s.retryLane=c,Ol(e,c),Qt(l,e,c),pr;Ts(),t=Yd(e,t,n)}else e=s.treeContext,ct=yn(c.nextSibling),Mt=t,Ve=!0,Kn=null,dn=!1,e!==null&&Au(t,e),t=ds(t,l),t.flags|=4096;return t}return e=Bn(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function fs(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(r(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function gr(e,t,n,l,i){return Cl(t),n=Wo(e,t,n,l,void 0,i),l=$o(),e!==null&&!jt?(Jo(e,t,i),wn(e,t,i)):(Ve&&l&&Bo(t),t.flags|=1,zt(e,t,n,i),t.child)}function kd(e,t,n,l,i,s){return Cl(t),t.updateQueue=null,n=Fu(t,l,n,i),Xu(e),l=$o(),e!==null&&!jt?(Jo(e,t,s),wn(e,t,s)):(Ve&&l&&Bo(t),t.flags|=1,zt(e,t,n,s),t.child)}function Vd(e,t,n,l,i){if(Cl(t),t.stateNode===null){var s=Pl,c=n.contextType;typeof c=="object"&&c!==null&&(s=_t(c)),s=new n(l,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=yr,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=l,s.state=t.memoizedState,s.refs={},Yo(t),c=n.contextType,s.context=typeof c=="object"&&c!==null?_t(c):Pl,s.state=t.memoizedState,c=n.getDerivedStateFromProps,typeof c=="function"&&(fr(t,n,c,l),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(c=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),c!==s.state&&yr.enqueueReplaceState(s,s.state,null),ta(t,l,s,i),ea(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){s=t.stateNode;var h=t.memoizedProps,S=Ul(n,h);s.props=S;var U=s.context,F=n.contextType;c=Pl,typeof F=="object"&&F!==null&&(c=_t(F));var W=n.getDerivedStateFromProps;F=typeof W=="function"||typeof s.getSnapshotBeforeUpdate=="function",h=t.pendingProps!==h,F||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(h||U!==c)&&Dd(t,s,l,c),Jn=!1;var I=t.memoizedState;s.state=I,ta(t,l,s,i),ea(),U=t.memoizedState,h||I!==U||Jn?(typeof W=="function"&&(fr(t,n,W,l),U=t.memoizedState),(S=Jn||Cd(t,n,S,l,I,U,c))?(F||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=U),s.props=l,s.state=U,s.context=c,l=S):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{s=t.stateNode,ko(e,t),c=t.memoizedProps,F=Ul(n,c),s.props=F,W=t.pendingProps,I=s.context,U=n.contextType,S=Pl,typeof U=="object"&&U!==null&&(S=_t(U)),h=n.getDerivedStateFromProps,(U=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(c!==W||I!==S)&&Dd(t,s,l,S),Jn=!1,I=t.memoizedState,s.state=I,ta(t,l,s,i),ea();var q=t.memoizedState;c!==W||I!==q||Jn||e!==null&&e.dependencies!==null&&Qa(e.dependencies)?(typeof h=="function"&&(fr(t,n,h,l),q=t.memoizedState),(F=Jn||Cd(t,n,F,l,I,q,S)||e!==null&&e.dependencies!==null&&Qa(e.dependencies))?(U||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(l,q,S),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(l,q,S)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||c===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=q),s.props=l,s.state=q,s.context=S,l=F):(typeof s.componentDidUpdate!="function"||c===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),l=!1)}return s=l,fs(e,t),l=(t.flags&128)!==0,s||l?(s=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&l?(t.child=_l(t,e.child,null,i),t.child=_l(t,null,n,i)):zt(e,t,n,i),t.memoizedState=s.state,e=t.child):e=wn(e,t,i),e}function Xd(e,t,n,l){return Rl(),t.flags|=256,zt(e,t,n,l),t.child}var mr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vr(e){return{baseLanes:e,cachePool:zu()}}function br(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=nn),e}function Fd(e,t,n){var l=t.pendingProps,i=!1,s=(t.flags&128)!==0,c;if((c=s)||(c=e!==null&&e.memoizedState===null?!1:(bt.current&2)!==0),c&&(i=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ve){if(i?tl(t):nl(),(e=ct)?(e=ty(e,dn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zn!==null?{id:xn,overflow:Tn}:null,retryLane:536870912,hydrationErrors:null},n=Ou(e),n.return=t,t.child=n,Mt=t,ct=null)):e=null,e===null)throw Wn(t);return tc(e)?t.lanes=32:t.lanes=536870912,null}var h=l.children;return l=l.fallback,i?(nl(),i=t.mode,h=ys({mode:"hidden",children:h},i),l=Nl(l,i,n,null),h.return=t,l.return=t,h.sibling=l,t.child=h,l=t.child,l.memoizedState=vr(n),l.childLanes=br(e,c,n),t.memoizedState=mr,sa(null,l)):(tl(t),Sr(t,h))}var S=e.memoizedState;if(S!==null&&(h=S.dehydrated,h!==null)){if(s)t.flags&256?(tl(t),t.flags&=-257,t=xr(e,t,n)):t.memoizedState!==null?(nl(),t.child=e.child,t.flags|=128,t=null):(nl(),h=l.fallback,i=t.mode,l=ys({mode:"visible",children:l.children},i),h=Nl(h,i,n,null),h.flags|=2,l.return=t,h.return=t,l.sibling=h,t.child=l,_l(t,e.child,null,n),l=t.child,l.memoizedState=vr(n),l.childLanes=br(e,c,n),t.memoizedState=mr,t=sa(null,l));else if(tl(t),tc(h)){if(c=h.nextSibling&&h.nextSibling.dataset,c)var U=c.dgst;c=U,l=Error(r(419)),l.stack="",l.digest=c,Zi({value:l,source:null,stack:null}),t=xr(e,t,n)}else if(jt||li(e,t,n,!1),c=(n&e.childLanes)!==0,jt||c){if(c=st,c!==null&&(l=Ui(c,n),l!==0&&l!==S.retryLane))throw S.retryLane=l,Ol(e,l),Qt(c,e,l),pr;ec(h)||Ts(),t=xr(e,t,n)}else ec(h)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,ct=yn(h.nextSibling),Mt=t,Ve=!0,Kn=null,dn=!1,e!==null&&Au(t,e),t=Sr(t,l.children),t.flags|=4096);return t}return i?(nl(),h=l.fallback,i=t.mode,S=e.child,U=S.sibling,l=Bn(S,{mode:"hidden",children:l.children}),l.subtreeFlags=S.subtreeFlags&65011712,U!==null?h=Bn(U,h):(h=Nl(h,i,n,null),h.flags|=2),h.return=t,l.return=t,l.sibling=h,t.child=l,sa(null,l),l=t.child,h=e.child.memoizedState,h===null?h=vr(n):(i=h.cachePool,i!==null?(S=Tt._currentValue,i=i.parent!==S?{parent:S,pool:S}:i):i=zu(),h={baseLanes:h.baseLanes|n,cachePool:i}),l.memoizedState=h,l.childLanes=br(e,c,n),t.memoizedState=mr,sa(e.child,l)):(tl(t),n=e.child,e=n.sibling,n=Bn(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=n,t.memoizedState=null,n)}function Sr(e,t){return t=ys({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ys(e,t){return e=Jt(22,e,null,t),e.lanes=0,e}function xr(e,t,n){return _l(t,e.child,null,n),e=Sr(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qd(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Lo(e.return,t,n)}function Tr(e,t,n,l,i,s){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:i,treeForkCount:s}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=l,c.tail=n,c.tailMode=i,c.treeForkCount=s)}function Zd(e,t,n){var l=t.pendingProps,i=l.revealOrder,s=l.tail;l=l.children;var c=bt.current,h=(c&2)!==0;if(h?(c=c&1|2,t.flags|=128):c&=1,$(bt,c),zt(e,t,l,n),l=Ve?Qi:0,!h&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qd(e,n,t);else if(e.tag===19)Qd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&ts(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Tr(t,!1,i,n,s,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ts(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Tr(t,!0,n,null,s,l);break;case"together":Tr(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function wn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),al|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(li(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,n=Bn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Bn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Er(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Qa(e)))}function Rp(e,t,n){switch(t.tag){case 3:ze(t,t.stateNode.containerInfo),$n(t,Tt,e.memoizedState.cache),Rl();break;case 27:case 5:Ke(t);break;case 4:ze(t,t.stateNode.containerInfo);break;case 10:$n(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Zo(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(tl(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Fd(e,t,n):(tl(t),e=wn(e,t,n),e!==null?e.sibling:null);tl(t);break;case 19:var i=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(li(e,t,n,!1),l=(n&t.childLanes)!==0),i){if(l)return Zd(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$(bt,bt.current),l)break;return null;case 22:return t.lanes=0,Gd(e,t,n,t.pendingProps);case 24:$n(t,Tt,e.memoizedState.cache)}return wn(e,t,n)}function Kd(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)jt=!0;else{if(!Er(e,n)&&(t.flags&128)===0)return jt=!1,Rp(e,t,n);jt=(e.flags&131072)!==0}else jt=!1,Ve&&(t.flags&1048576)!==0&&Ru(t,Qi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Bl(t.elementType),t.type=e,typeof e=="function")Ao(e)?(l=Ul(e,l),t.tag=1,t=Vd(null,t,e,l,n)):(t.tag=0,t=gr(null,t,e,l,n));else{if(e!=null){var i=e.$$typeof;if(i===C){t.tag=11,t=wd(null,t,e,l,n);break e}else if(i===G){t.tag=14,t=Hd(null,t,e,l,n);break e}}throw t=Pe(e)||e,Error(r(306,t,""))}}return t;case 0:return gr(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,i=Ul(l,t.pendingProps),Vd(e,t,l,i,n);case 3:e:{if(ze(t,t.stateNode.containerInfo),e===null)throw Error(r(387));l=t.pendingProps;var s=t.memoizedState;i=s.element,ko(e,t),ta(t,l,null,n);var c=t.memoizedState;if(l=c.cache,$n(t,Tt,l),l!==s.cache&&wo(t,[Tt],n,!0),ea(),l=c.element,s.isDehydrated)if(s={element:l,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Xd(e,t,l,n);break e}else if(l!==i){i=rn(Error(r(424)),t),Zi(i),t=Xd(e,t,l,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,ct=yn(e.firstChild),Mt=t,Ve=!0,Kn=null,dn=!0,n=Gu(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rl(),l===i){t=wn(e,t,n);break e}zt(e,t,l,n)}t=t.child}return t;case 26:return fs(e,t),e===null?(n=oy(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ve||(n=t.type,e=t.pendingProps,l=Cs(re.current).createElement(n),l[Bt]=t,l[qt]=e,Ut(l,n,e),Ct(l),t.stateNode=l):t.memoizedState=oy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ke(t),e===null&&Ve&&(l=t.stateNode=iy(t.type,t.pendingProps,re.current),Mt=t,dn=!0,i=ct,ul(t.type)?(nc=i,ct=yn(l.firstChild)):ct=i),zt(e,t,t.pendingProps.children,n),fs(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ve&&((i=l=ct)&&(l=lg(l,t.type,t.pendingProps,dn),l!==null?(t.stateNode=l,Mt=t,ct=yn(l.firstChild),dn=!1,i=!0):i=!1),i||Wn(t)),Ke(t),i=t.type,s=t.pendingProps,c=e!==null?e.memoizedProps:null,l=s.children,$r(i,s)?l=null:c!==null&&$r(i,c)&&(t.flags|=32),t.memoizedState!==null&&(i=Wo(e,t,vp,null,null,n),xa._currentValue=i),fs(e,t),zt(e,t,l,n),t.child;case 6:return e===null&&Ve&&((e=n=ct)&&(n=ig(n,t.pendingProps,dn),n!==null?(t.stateNode=n,Mt=t,ct=null,e=!0):e=!1),e||Wn(t)),null;case 13:return Fd(e,t,n);case 4:return ze(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=_l(t,null,l,n):zt(e,t,l,n),t.child;case 11:return wd(e,t,t.type,t.pendingProps,n);case 7:return zt(e,t,t.pendingProps,n),t.child;case 8:return zt(e,t,t.pendingProps.children,n),t.child;case 12:return zt(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,$n(t,t.type,l.value),zt(e,t,l.children,n),t.child;case 9:return i=t.type._context,l=t.pendingProps.children,Cl(t),i=_t(i),l=l(i),t.flags|=1,zt(e,t,l,n),t.child;case 14:return Hd(e,t,t.type,t.pendingProps,n);case 15:return Id(e,t,t.type,t.pendingProps,n);case 19:return Zd(e,t,n);case 31:return Np(e,t,n);case 22:return Gd(e,t,n,t.pendingProps);case 24:return Cl(t),l=_t(Tt),e===null?(i=Go(),i===null&&(i=st,s=Ho(),i.pooledCache=s,s.refCount++,s!==null&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:l,cache:i},Yo(t),$n(t,Tt,i)):((e.lanes&n)!==0&&(ko(e,t),ta(t,null,null,n),ea()),i=e.memoizedState,s=t.memoizedState,i.parent!==l?(i={parent:l,cache:l},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),$n(t,Tt,l)):(l=s.cache,$n(t,Tt,l),l!==i.cache&&wo(t,[Tt],n,!0))),zt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function Hn(e){e.flags|=4}function jr(e,t,n,l,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Ef())e.flags|=8192;else throw Ml=$a,qo}else e.flags&=-16777217}function Wd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!fy(t))if(Ef())e.flags|=8192;else throw Ml=$a,qo}function hs(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?_i():536870912,e.lanes|=t,pi|=t)}function oa(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,l|=i.subtreeFlags&65011712,l|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,l|=i.subtreeFlags,l|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function Ap(e,t,n){var l=t.pendingProps;switch(Mo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return ut(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),zn(Tt),De(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ni(t)?Hn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,zo())),ut(t),null;case 26:var i=t.type,s=t.memoizedState;return e===null?(Hn(t),s!==null?(ut(t),Wd(t,s)):(ut(t),jr(t,i,null,l,n))):s?s!==e.memoizedState?(Hn(t),ut(t),Wd(t,s)):(ut(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Hn(t),ut(t),jr(t,i,e,l,n)),null;case 27:if(X(t),n=re.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Hn(t);else{if(!l){if(t.stateNode===null)throw Error(r(166));return ut(t),null}e=P.current,ni(t)?Cu(t):(e=iy(i,l,n),t.stateNode=e,Hn(t))}return ut(t),null;case 5:if(X(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Hn(t);else{if(!l){if(t.stateNode===null)throw Error(r(166));return ut(t),null}if(s=P.current,ni(t))Cu(t);else{var c=Cs(re.current);switch(s){case 1:s=c.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=c.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=c.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=c.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":s=c.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?s.multiple=!0:l.size&&(s.size=l.size);break;default:s=typeof l.is=="string"?c.createElement(i,{is:l.is}):c.createElement(i)}}s[Bt]=t,s[qt]=l;e:for(c=t.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}t.stateNode=s;e:switch(Ut(s,i,l),i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Hn(t)}}return ut(t),jr(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Hn(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(r(166));if(e=re.current,ni(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,i=Mt,i!==null)switch(i.tag){case 27:case 5:l=i.memoizedProps}e[Bt]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||Qf(e.nodeValue,n)),e||Wn(t,!0)}else e=Cs(e).createTextNode(l),e[Bt]=t,t.stateNode=e}return ut(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=ni(t),n!==null){if(e===null){if(!l)throw Error(r(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Bt]=t}else Rl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ut(t),e=!1}else n=zo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(en(t),t):(en(t),null);if((t.flags&128)!==0)throw Error(r(558))}return ut(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=ni(t),l!==null&&l.dehydrated!==null){if(e===null){if(!i)throw Error(r(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));i[Bt]=t}else Rl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ut(t),i=!1}else i=zo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(en(t),t):(en(t),null)}return en(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,i=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(i=l.alternate.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==i&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),hs(t,t.updateQueue),ut(t),null);case 4:return De(),e===null&&Fr(t.stateNode.containerInfo),ut(t),null;case 10:return zn(t.type),ut(t),null;case 19:if(N(bt),l=t.memoizedState,l===null)return ut(t),null;if(i=(t.flags&128)!==0,s=l.rendering,s===null)if(i)oa(l,!1);else{if(gt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=ts(e),s!==null){for(t.flags|=128,oa(l,!1),e=s.updateQueue,t.updateQueue=e,hs(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ju(n,e),n=n.sibling;return $(bt,bt.current&1|2),Ve&&Mn(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&ee()>bs&&(t.flags|=128,i=!0,oa(l,!1),t.lanes=4194304)}else{if(!i)if(e=ts(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,hs(t,e),oa(l,!0),l.tail===null&&l.tailMode==="hidden"&&!s.alternate&&!Ve)return ut(t),null}else 2*ee()-l.renderingStartTime>bs&&n!==536870912&&(t.flags|=128,i=!0,oa(l,!1),t.lanes=4194304);l.isBackwards?(s.sibling=t.child,t.child=s):(e=l.last,e!==null?e.sibling=s:t.child=s,l.last=s)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=ee(),e.sibling=null,n=bt.current,$(bt,i?n&1|2:n&1),Ve&&Mn(t,l.treeForkCount),e):(ut(t),null);case 22:case 23:return en(t),Qo(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),n=t.updateQueue,n!==null&&hs(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&N(Dl),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),zn(Tt),ut(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function Cp(e,t){switch(Mo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zn(Tt),De(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return X(t),null;case 31:if(t.memoizedState!==null){if(en(t),t.alternate===null)throw Error(r(340));Rl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(en(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));Rl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return N(bt),null;case 4:return De(),null;case 10:return zn(t.type),null;case 22:case 23:return en(t),Qo(),e!==null&&N(Dl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return zn(Tt),null;case 25:return null;default:return null}}function $d(e,t){switch(Mo(t),t.tag){case 3:zn(Tt),De();break;case 26:case 27:case 5:X(t);break;case 4:De();break;case 31:t.memoizedState!==null&&en(t);break;case 13:en(t);break;case 19:N(bt);break;case 10:zn(t.type);break;case 22:case 23:en(t),Qo(),e!==null&&N(Dl);break;case 24:zn(Tt)}}function ra(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var i=l.next;n=i;do{if((n.tag&e)===e){l=void 0;var s=n.create,c=n.inst;l=s(),c.destroy=l}n=n.next}while(n!==i)}}catch(h){tt(t,t.return,h)}}function ll(e,t,n){try{var l=t.updateQueue,i=l!==null?l.lastEffect:null;if(i!==null){var s=i.next;l=s;do{if((l.tag&e)===e){var c=l.inst,h=c.destroy;if(h!==void 0){c.destroy=void 0,i=t;var S=n,U=h;try{U()}catch(F){tt(i,S,F)}}}l=l.next}while(l!==s)}}catch(F){tt(t,t.return,F)}}function Jd(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Yu(t,n)}catch(l){tt(e,e.return,l)}}}function Pd(e,t,n){n.props=Ul(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){tt(e,t,l)}}function ca(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(i){tt(e,t,i)}}function En(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(i){tt(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){tt(e,t,i)}else n.current=null}function ef(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(i){tt(e,e.return,i)}}function Or(e,t,n){try{var l=e.stateNode;$p(l,e.type,n,t),l[qt]=t}catch(i){tt(e,e.return,i)}}function tf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ul(e.type)||e.tag===4}function Nr(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ul(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rr(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cn));else if(l!==4&&(l===27&&ul(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Rr(e,t,n),e=e.sibling;e!==null;)Rr(e,t,n),e=e.sibling}function ps(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&ul(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(ps(e,t,n),e=e.sibling;e!==null;)ps(e,t,n),e=e.sibling}function nf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ut(t,l,n),t[Bt]=e,t[qt]=n}catch(s){tt(e,e.return,s)}}var In=!1,Ot=!1,Ar=!1,lf=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function Dp(e,t){if(e=e.containerInfo,Kr=Ls,e=pu(e),xo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var i=l.anchorOffset,s=l.focusNode;l=l.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var c=0,h=-1,S=-1,U=0,F=0,W=e,I=null;t:for(;;){for(var q;W!==n||i!==0&&W.nodeType!==3||(h=c+i),W!==s||l!==0&&W.nodeType!==3||(S=c+l),W.nodeType===3&&(c+=W.nodeValue.length),(q=W.firstChild)!==null;)I=W,W=q;for(;;){if(W===e)break t;if(I===n&&++U===i&&(h=c),I===s&&++F===l&&(S=c),(q=W.nextSibling)!==null)break;W=I,I=W.parentNode}W=q}n=h===-1||S===-1?null:{start:h,end:S}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wr={focusedElem:e,selectionRange:n},Ls=!1,Dt=t;Dt!==null;)if(t=Dt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Dt=e;else for(;Dt!==null;){switch(t=Dt,s=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)i=e[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&s!==null){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,l=n.stateNode;try{var ce=Ul(n.type,i);e=l.getSnapshotBeforeUpdate(ce,s),l.__reactInternalSnapshotBeforeUpdate=e}catch(xe){tt(n,n.return,xe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Pr(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pr(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,Dt=e;break}Dt=t.return}}function af(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:qn(e,n),l&4&&ra(5,n);break;case 1:if(qn(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(c){tt(n,n.return,c)}else{var i=Ul(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){tt(n,n.return,c)}}l&64&&Jd(n),l&512&&ca(n,n.return);break;case 3:if(qn(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Yu(e,t)}catch(c){tt(n,n.return,c)}}break;case 27:t===null&&l&4&&nf(n);case 26:case 5:qn(e,n),t===null&&l&4&&ef(n),l&512&&ca(n,n.return);break;case 12:qn(e,n);break;case 31:qn(e,n),l&4&&rf(e,n);break;case 13:qn(e,n),l&4&&cf(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Ip.bind(null,n),ag(e,n))));break;case 22:if(l=n.memoizedState!==null||In,!l){t=t!==null&&t.memoizedState!==null||Ot,i=In;var s=Ot;In=l,(Ot=t)&&!s?Yn(e,n,(n.subtreeFlags&8772)!==0):qn(e,n),In=i,Ot=s}break;case 30:break;default:qn(e,n)}}function sf(e){var t=e.alternate;t!==null&&(e.alternate=null,sf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&lo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var dt=null,kt=!1;function Gn(e,t,n){for(n=n.child;n!==null;)of(e,t,n),n=n.sibling}function of(e,t,n){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(ot,n)}catch{}switch(n.tag){case 26:Ot||En(n,t),Gn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ot||En(n,t);var l=dt,i=kt;ul(n.type)&&(dt=n.stateNode,kt=!1),Gn(e,t,n),va(n.stateNode),dt=l,kt=i;break;case 5:Ot||En(n,t);case 6:if(l=dt,i=kt,dt=null,Gn(e,t,n),dt=l,kt=i,dt!==null)if(kt)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(n.stateNode)}catch(s){tt(n,t,s)}else try{dt.removeChild(n.stateNode)}catch(s){tt(n,t,s)}break;case 18:dt!==null&&(kt?(e=dt,Pf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Ei(e)):Pf(dt,n.stateNode));break;case 4:l=dt,i=kt,dt=n.stateNode.containerInfo,kt=!0,Gn(e,t,n),dt=l,kt=i;break;case 0:case 11:case 14:case 15:ll(2,n,t),Ot||ll(4,n,t),Gn(e,t,n);break;case 1:Ot||(En(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&Pd(n,t,l)),Gn(e,t,n);break;case 21:Gn(e,t,n);break;case 22:Ot=(l=Ot)||n.memoizedState!==null,Gn(e,t,n),Ot=l;break;default:Gn(e,t,n)}}function rf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ei(e)}catch(n){tt(t,t.return,n)}}}function cf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ei(e)}catch(n){tt(t,t.return,n)}}function Bp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new lf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new lf),t;default:throw Error(r(435,e.tag))}}function gs(e,t){var n=Bp(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var i=Gp.bind(null,e,l);l.then(i,i)}})}function Vt(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var i=n[l],s=e,c=t,h=c;e:for(;h!==null;){switch(h.tag){case 27:if(ul(h.type)){dt=h.stateNode,kt=!1;break e}break;case 5:dt=h.stateNode,kt=!1;break e;case 3:case 4:dt=h.stateNode.containerInfo,kt=!0;break e}h=h.return}if(dt===null)throw Error(r(160));of(s,c,i),dt=null,kt=!1,s=i.alternate,s!==null&&(s.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)uf(t,e),t=t.sibling}var mn=null;function uf(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vt(t,e),Xt(e),l&4&&(ll(3,e,e.return),ra(3,e),ll(5,e,e.return));break;case 1:Vt(t,e),Xt(e),l&512&&(Ot||n===null||En(n,n.return)),l&64&&In&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var i=mn;if(Vt(t,e),Xt(e),l&512&&(Ot||n===null||En(n,n.return)),l&4){var s=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(l){case"title":s=i.getElementsByTagName("title")[0],(!s||s[Li]||s[Bt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=i.createElement(l),i.head.insertBefore(s,i.querySelector("head > title"))),Ut(s,l,n),s[Bt]=e,Ct(s),l=s;break e;case"link":var c=uy("link","href",i).get(l+(n.href||""));if(c){for(var h=0;h<c.length;h++)if(s=c[h],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){c.splice(h,1);break t}}s=i.createElement(l),Ut(s,l,n),i.head.appendChild(s);break;case"meta":if(c=uy("meta","content",i).get(l+(n.content||""))){for(h=0;h<c.length;h++)if(s=c[h],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){c.splice(h,1);break t}}s=i.createElement(l),Ut(s,l,n),i.head.appendChild(s);break;default:throw Error(r(468,l))}s[Bt]=e,Ct(s),l=s}e.stateNode=l}else dy(i,e.type,e.stateNode);else e.stateNode=cy(i,l,e.memoizedProps);else s!==l?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,l===null?dy(i,e.type,e.stateNode):cy(i,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Or(e,e.memoizedProps,n.memoizedProps)}break;case 27:Vt(t,e),Xt(e),l&512&&(Ot||n===null||En(n,n.return)),n!==null&&l&4&&Or(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vt(t,e),Xt(e),l&512&&(Ot||n===null||En(n,n.return)),e.flags&32){i=e.stateNode;try{Fl(i,"")}catch(ce){tt(e,e.return,ce)}}l&4&&e.stateNode!=null&&(i=e.memoizedProps,Or(e,i,n!==null?n.memoizedProps:i)),l&1024&&(Ar=!0);break;case 6:if(Vt(t,e),Xt(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(ce){tt(e,e.return,ce)}}break;case 3:if(Ms=null,i=mn,mn=Ds(t.containerInfo),Vt(t,e),mn=i,Xt(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{Ei(t.containerInfo)}catch(ce){tt(e,e.return,ce)}Ar&&(Ar=!1,df(e));break;case 4:l=mn,mn=Ds(e.stateNode.containerInfo),Vt(t,e),Xt(e),mn=l;break;case 12:Vt(t,e),Xt(e);break;case 31:Vt(t,e),Xt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,gs(e,l)));break;case 13:Vt(t,e),Xt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(vs=ee()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,gs(e,l)));break;case 22:i=e.memoizedState!==null;var S=n!==null&&n.memoizedState!==null,U=In,F=Ot;if(In=U||i,Ot=F||S,Vt(t,e),Ot=F,In=U,Xt(e),l&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||S||In||Ot||Ll(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){S=n=t;try{if(s=S.stateNode,i)c=s.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{h=S.stateNode;var W=S.memoizedProps.style,I=W!=null&&W.hasOwnProperty("display")?W.display:null;h.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(ce){tt(S,S.return,ce)}}}else if(t.tag===6){if(n===null){S=t;try{S.stateNode.nodeValue=i?"":S.memoizedProps}catch(ce){tt(S,S.return,ce)}}}else if(t.tag===18){if(n===null){S=t;try{var q=S.stateNode;i?ey(q,!0):ey(S.stateNode,!1)}catch(ce){tt(S,S.return,ce)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,gs(e,n))));break;case 19:Vt(t,e),Xt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,gs(e,l)));break;case 30:break;case 21:break;default:Vt(t,e),Xt(e)}}function Xt(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(tf(l)){n=l;break}l=l.return}if(n==null)throw Error(r(160));switch(n.tag){case 27:var i=n.stateNode,s=Nr(e);ps(e,s,i);break;case 5:var c=n.stateNode;n.flags&32&&(Fl(c,""),n.flags&=-33);var h=Nr(e);ps(e,h,c);break;case 3:case 4:var S=n.stateNode.containerInfo,U=Nr(e);Rr(e,U,S);break;default:throw Error(r(161))}}catch(F){tt(e,e.return,F)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function df(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;df(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function qn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)af(e,t.alternate,t),t=t.sibling}function Ll(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Ll(t);break;case 1:En(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Pd(t,t.return,n),Ll(t);break;case 27:va(t.stateNode);case 26:case 5:En(t,t.return),Ll(t);break;case 22:t.memoizedState===null&&Ll(t);break;case 30:Ll(t);break;default:Ll(t)}e=e.sibling}}function Yn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,i=e,s=t,c=s.flags;switch(s.tag){case 0:case 11:case 15:Yn(i,s,n),ra(4,s);break;case 1:if(Yn(i,s,n),l=s,i=l.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(U){tt(l,l.return,U)}if(l=s,i=l.updateQueue,i!==null){var h=l.stateNode;try{var S=i.shared.hiddenCallbacks;if(S!==null)for(i.shared.hiddenCallbacks=null,i=0;i<S.length;i++)qu(S[i],h)}catch(U){tt(l,l.return,U)}}n&&c&64&&Jd(s),ca(s,s.return);break;case 27:nf(s);case 26:case 5:Yn(i,s,n),n&&l===null&&c&4&&ef(s),ca(s,s.return);break;case 12:Yn(i,s,n);break;case 31:Yn(i,s,n),n&&c&4&&rf(i,s);break;case 13:Yn(i,s,n),n&&c&4&&cf(i,s);break;case 22:s.memoizedState===null&&Yn(i,s,n),ca(s,s.return);break;case 30:break;default:Yn(i,s,n)}t=t.sibling}}function Cr(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ki(n))}function Dr(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ki(e))}function vn(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ff(e,t,n,l),t=t.sibling}function ff(e,t,n,l){var i=t.flags;switch(t.tag){case 0:case 11:case 15:vn(e,t,n,l),i&2048&&ra(9,t);break;case 1:vn(e,t,n,l);break;case 3:vn(e,t,n,l),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ki(e)));break;case 12:if(i&2048){vn(e,t,n,l),e=t.stateNode;try{var s=t.memoizedProps,c=s.id,h=s.onPostCommit;typeof h=="function"&&h(c,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){tt(t,t.return,S)}}else vn(e,t,n,l);break;case 31:vn(e,t,n,l);break;case 13:vn(e,t,n,l);break;case 23:break;case 22:s=t.stateNode,c=t.alternate,t.memoizedState!==null?s._visibility&2?vn(e,t,n,l):ua(e,t):s._visibility&2?vn(e,t,n,l):(s._visibility|=2,fi(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),i&2048&&Cr(c,t);break;case 24:vn(e,t,n,l),i&2048&&Dr(t.alternate,t);break;default:vn(e,t,n,l)}}function fi(e,t,n,l,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,c=t,h=n,S=l,U=c.flags;switch(c.tag){case 0:case 11:case 15:fi(s,c,h,S,i),ra(8,c);break;case 23:break;case 22:var F=c.stateNode;c.memoizedState!==null?F._visibility&2?fi(s,c,h,S,i):ua(s,c):(F._visibility|=2,fi(s,c,h,S,i)),i&&U&2048&&Cr(c.alternate,c);break;case 24:fi(s,c,h,S,i),i&&U&2048&&Dr(c.alternate,c);break;default:fi(s,c,h,S,i)}t=t.sibling}}function ua(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,i=l.flags;switch(l.tag){case 22:ua(n,l),i&2048&&Cr(l.alternate,l);break;case 24:ua(n,l),i&2048&&Dr(l.alternate,l);break;default:ua(n,l)}t=t.sibling}}var da=8192;function yi(e,t,n){if(e.subtreeFlags&da)for(e=e.child;e!==null;)yf(e,t,n),e=e.sibling}function yf(e,t,n){switch(e.tag){case 26:yi(e,t,n),e.flags&da&&e.memoizedState!==null&&mg(n,mn,e.memoizedState,e.memoizedProps);break;case 5:yi(e,t,n);break;case 3:case 4:var l=mn;mn=Ds(e.stateNode.containerInfo),yi(e,t,n),mn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=da,da=16777216,yi(e,t,n),da=l):yi(e,t,n));break;default:yi(e,t,n)}}function hf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function fa(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];Dt=l,gf(l,e)}hf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)pf(e),e=e.sibling}function pf(e){switch(e.tag){case 0:case 11:case 15:fa(e),e.flags&2048&&ll(9,e,e.return);break;case 3:fa(e);break;case 12:fa(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ms(e)):fa(e);break;default:fa(e)}}function ms(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];Dt=l,gf(l,e)}hf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ll(8,t,t.return),ms(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ms(t));break;default:ms(t)}e=e.sibling}}function gf(e,t){for(;Dt!==null;){var n=Dt;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ki(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,Dt=l;else e:for(n=e;Dt!==null;){l=Dt;var i=l.sibling,s=l.return;if(sf(l),l===n){Dt=null;break e}if(i!==null){i.return=s,Dt=i;break e}Dt=s}}}var Mp={getCacheForType:function(e){var t=_t(Tt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return _t(Tt).controller.signal}},_p=typeof WeakMap=="function"?WeakMap:Map,Je=0,st=null,He=null,Ge=0,et=0,tn=null,il=!1,hi=!1,Br=!1,kn=0,gt=0,al=0,wl=0,Mr=0,nn=0,pi=0,ya=null,Ft=null,_r=!1,vs=0,mf=0,bs=1/0,Ss=null,sl=null,At=0,ol=null,gi=null,Vn=0,zr=0,Ur=null,vf=null,ha=0,Lr=null;function ln(){return(Je&2)!==0&&Ge!==0?Ge&-Ge:M.T!==null?Yr():Ht()}function bf(){if(nn===0)if((Ge&536870912)===0||Ve){var e=rt;rt<<=1,(rt&3932160)===0&&(rt=262144),nn=e}else nn=536870912;return e=Pt.current,e!==null&&(e.flags|=32),nn}function Qt(e,t,n){(e===st&&(et===2||et===9)||e.cancelPendingCommit!==null)&&(mi(e,0),rl(e,Ge,nn,!1)),A(e,n),((Je&2)===0||e!==st)&&(e===st&&((Je&2)===0&&(wl|=n),gt===4&&rl(e,Ge,nn,!1)),jn(e))}function Sf(e,t,n){if((Je&6)!==0)throw Error(r(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||vl(e,t),i=l?Lp(e,t):Hr(e,t,!0),s=l;do{if(i===0){hi&&!l&&rl(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!zp(n)){i=Hr(e,t,!1),s=!1;continue}if(i===2){if(s=t,e.errorRecoveryDisabledLanes&s)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){t=c;e:{var h=e;i=ya;var S=h.current.memoizedState.isDehydrated;if(S&&(mi(h,c).flags|=256),c=Hr(h,c,!1),c!==2){if(Br&&!S){h.errorRecoveryDisabledLanes|=s,wl|=s,i=4;break e}s=Ft,Ft=i,s!==null&&(Ft===null?Ft=s:Ft.push.apply(Ft,s))}i=c}if(s=!1,i!==2)continue}}if(i===1){mi(e,0),rl(e,t,0,!0);break}e:{switch(l=e,s=i,s){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:rl(l,t,nn,!il);break e;case 2:Ft=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(i=vs+300-ee(),10<i)){if(rl(l,t,nn,!il),Rn(l,0,!0)!==0)break e;Vn=t,l.timeoutHandle=$f(xf.bind(null,l,n,Ft,Ss,_r,t,nn,wl,pi,il,s,"Throttled",-0,0),i);break e}xf(l,n,Ft,Ss,_r,t,nn,wl,pi,il,s,null,-0,0)}}break}while(!0);jn(e)}function xf(e,t,n,l,i,s,c,h,S,U,F,W,I,q){if(e.timeoutHandle=-1,W=t.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Cn},yf(t,s,W);var ce=(s&62914560)===s?vs-ee():(s&4194048)===s?mf-ee():0;if(ce=vg(W,ce),ce!==null){Vn=s,e.cancelPendingCommit=ce(Cf.bind(null,e,t,s,n,l,i,c,h,S,F,W,null,I,q)),rl(e,s,c,!U);return}}Cf(e,t,s,n,l,i,c,h,S)}function zp(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var i=n[l],s=i.getSnapshot;i=i.value;try{if(!$t(s(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rl(e,t,n,l){t&=~Mr,t&=~wl,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var i=t;0<i;){var s=31-Re(i),c=1<<s;l[s]=-1,i&=~c}n!==0&&ht(e,n,t)}function xs(){return(Je&6)===0?(pa(0),!1):!0}function wr(){if(He!==null){if(et===0)var e=He.return;else e=He,_n=Al=null,Po(e),oi=null,$i=0,e=He;for(;e!==null;)$d(e.alternate,e),e=e.return;He=null}}function mi(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,eg(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Vn=0,wr(),st=e,He=n=Bn(e.current,null),Ge=t,et=0,tn=null,il=!1,hi=vl(e,t),Br=!1,pi=nn=Mr=wl=al=gt=0,Ft=ya=null,_r=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var i=31-Re(l),s=1<<i;t|=e[i],l&=~s}return kn=t,Ya(),n}function Tf(e,t){Me=null,M.H=aa,t===si||t===Wa?(t=wu(),et=3):t===qo?(t=wu(),et=4):et=t===pr?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,tn=t,He===null&&(gt=1,us(e,rn(t,e.current)))}function Ef(){var e=Pt.current;return e===null?!0:(Ge&4194048)===Ge?fn===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===fn:!1}function jf(){var e=M.H;return M.H=aa,e===null?aa:e}function Of(){var e=M.A;return M.A=Mp,e}function Ts(){gt=4,il||(Ge&4194048)!==Ge&&Pt.current!==null||(hi=!0),(al&134217727)===0&&(wl&134217727)===0||st===null||rl(st,Ge,nn,!1)}function Hr(e,t,n){var l=Je;Je|=2;var i=jf(),s=Of();(st!==e||Ge!==t)&&(Ss=null,mi(e,t)),t=!1;var c=gt;e:do try{if(et!==0&&He!==null){var h=He,S=tn;switch(et){case 8:wr(),c=6;break e;case 3:case 2:case 9:case 6:Pt.current===null&&(t=!0);var U=et;if(et=0,tn=null,vi(e,h,S,U),n&&hi){c=0;break e}break;default:U=et,et=0,tn=null,vi(e,h,S,U)}}Up(),c=gt;break}catch(F){Tf(e,F)}while(!0);return t&&e.shellSuspendCounter++,_n=Al=null,Je=l,M.H=i,M.A=s,He===null&&(st=null,Ge=0,Ya()),c}function Up(){for(;He!==null;)Nf(He)}function Lp(e,t){var n=Je;Je|=2;var l=jf(),i=Of();st!==e||Ge!==t?(Ss=null,bs=ee()+500,mi(e,t)):hi=vl(e,t);e:do try{if(et!==0&&He!==null){t=He;var s=tn;t:switch(et){case 1:et=0,tn=null,vi(e,t,s,1);break;case 2:case 9:if(Uu(s)){et=0,tn=null,Rf(t);break}t=function(){et!==2&&et!==9||st!==e||(et=7),jn(e)},s.then(t,t);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:Uu(s)?(et=0,tn=null,Rf(t)):(et=0,tn=null,vi(e,t,s,7));break;case 5:var c=null;switch(He.tag){case 26:c=He.memoizedState;case 5:case 27:var h=He;if(c?fy(c):h.stateNode.complete){et=0,tn=null;var S=h.sibling;if(S!==null)He=S;else{var U=h.return;U!==null?(He=U,Es(U)):He=null}break t}}et=0,tn=null,vi(e,t,s,5);break;case 6:et=0,tn=null,vi(e,t,s,6);break;case 8:wr(),gt=6;break e;default:throw Error(r(462))}}wp();break}catch(F){Tf(e,F)}while(!0);return _n=Al=null,M.H=l,M.A=i,Je=n,He!==null?0:(st=null,Ge=0,Ya(),gt)}function wp(){for(;He!==null&&!le();)Nf(He)}function Nf(e){var t=Kd(e.alternate,e,kn);e.memoizedProps=e.pendingProps,t===null?Es(e):He=t}function Rf(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=kd(n,t,t.pendingProps,t.type,void 0,Ge);break;case 11:t=kd(n,t,t.pendingProps,t.type.render,t.ref,Ge);break;case 5:Po(t);default:$d(n,t),t=He=ju(t,kn),t=Kd(n,t,kn)}e.memoizedProps=e.pendingProps,t===null?Es(e):He=t}function vi(e,t,n,l){_n=Al=null,Po(t),oi=null,$i=0;var i=t.return;try{if(Op(e,i,t,n,Ge)){gt=1,us(e,rn(n,e.current)),He=null;return}}catch(s){if(i!==null)throw He=i,s;gt=1,us(e,rn(n,e.current)),He=null;return}t.flags&32768?(Ve||l===1?e=!0:hi||(Ge&536870912)!==0?e=!1:(il=e=!0,(l===2||l===9||l===3||l===6)&&(l=Pt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Af(t,e)):Es(t)}function Es(e){var t=e;do{if((t.flags&32768)!==0){Af(t,il);return}e=t.return;var n=Ap(t.alternate,t,kn);if(n!==null){He=n;return}if(t=t.sibling,t!==null){He=t;return}He=t=e}while(t!==null);gt===0&&(gt=5)}function Af(e,t){do{var n=Cp(e.alternate,e);if(n!==null){n.flags&=32767,He=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){He=e;return}He=e=n}while(e!==null);gt=6,He=null}function Cf(e,t,n,l,i,s,c,h,S){e.cancelPendingCommit=null;do js();while(At!==0);if((Je&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(s=t.lanes|t.childLanes,s|=No,Fe(e,n,s,c,h,S),e===st&&(He=st=null,Ge=0),gi=t,ol=e,Vn=n,zr=s,Ur=i,vf=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,qp(je,function(){return zf(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=M.T,M.T=null,i=J.p,J.p=2,c=Je,Je|=4;try{Dp(e,t,n)}finally{Je=c,J.p=i,M.T=l}}At=1,Df(),Bf(),Mf()}}function Df(){if(At===1){At=0;var e=ol,t=gi,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=M.T,M.T=null;var l=J.p;J.p=2;var i=Je;Je|=4;try{uf(t,e);var s=Wr,c=pu(e.containerInfo),h=s.focusedElem,S=s.selectionRange;if(c!==h&&h&&h.ownerDocument&&hu(h.ownerDocument.documentElement,h)){if(S!==null&&xo(h)){var U=S.start,F=S.end;if(F===void 0&&(F=U),"selectionStart"in h)h.selectionStart=U,h.selectionEnd=Math.min(F,h.value.length);else{var W=h.ownerDocument||document,I=W&&W.defaultView||window;if(I.getSelection){var q=I.getSelection(),ce=h.textContent.length,xe=Math.min(S.start,ce),it=S.end===void 0?xe:Math.min(S.end,ce);!q.extend&&xe>it&&(c=it,it=xe,xe=c);var O=yu(h,xe),T=yu(h,it);if(O&&T&&(q.rangeCount!==1||q.anchorNode!==O.node||q.anchorOffset!==O.offset||q.focusNode!==T.node||q.focusOffset!==T.offset)){var _=W.createRange();_.setStart(O.node,O.offset),q.removeAllRanges(),xe>it?(q.addRange(_),q.extend(T.node,T.offset)):(_.setEnd(T.node,T.offset),q.addRange(_))}}}}for(W=[],q=h;q=q.parentNode;)q.nodeType===1&&W.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<W.length;h++){var K=W[h];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}Ls=!!Kr,Wr=Kr=null}finally{Je=i,J.p=l,M.T=n}}e.current=t,At=2}}function Bf(){if(At===2){At=0;var e=ol,t=gi,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=M.T,M.T=null;var l=J.p;J.p=2;var i=Je;Je|=4;try{af(e,t.alternate,t)}finally{Je=i,J.p=l,M.T=n}}At=3}}function Mf(){if(At===4||At===3){At=0,te();var e=ol,t=gi,n=Vn,l=vf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?At=5:(At=0,gi=ol=null,_f(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(sl=null),Sl(n),t=t.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(ot,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=M.T,i=J.p,J.p=2,M.T=null;try{for(var s=e.onRecoverableError,c=0;c<l.length;c++){var h=l[c];s(h.value,{componentStack:h.stack})}}finally{M.T=t,J.p=i}}(Vn&3)!==0&&js(),jn(e),i=e.pendingLanes,(n&261930)!==0&&(i&42)!==0?e===Lr?ha++:(ha=0,Lr=e):ha=0,pa(0)}}function _f(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ki(t)))}function js(){return Df(),Bf(),Mf(),zf()}function zf(){if(At!==5)return!1;var e=ol,t=zr;zr=0;var n=Sl(Vn),l=M.T,i=J.p;try{J.p=32>n?32:n,M.T=null,n=Ur,Ur=null;var s=ol,c=Vn;if(At=0,gi=ol=null,Vn=0,(Je&6)!==0)throw Error(r(331));var h=Je;if(Je|=4,pf(s.current),ff(s,s.current,c,n),Je=h,pa(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(ot,s)}catch{}return!0}finally{J.p=i,M.T=l,_f(e,t)}}function Uf(e,t,n){t=rn(n,t),t=hr(e.stateNode,t,2),e=el(e,t,2),e!==null&&(A(e,2),jn(e))}function tt(e,t,n){if(e.tag===3)Uf(e,e,n);else for(;t!==null;){if(t.tag===3){Uf(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(sl===null||!sl.has(l))){e=rn(n,e),n=Ud(2),l=el(t,n,2),l!==null&&(Ld(n,l,t,e),A(l,2),jn(l));break}}t=t.return}}function Ir(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new _p;var i=new Set;l.set(t,i)}else i=l.get(t),i===void 0&&(i=new Set,l.set(t,i));i.has(n)||(Br=!0,i.add(n),e=Hp.bind(null,e,t,n),t.then(e,e))}function Hp(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,st===e&&(Ge&n)===n&&(gt===4||gt===3&&(Ge&62914560)===Ge&&300>ee()-vs?(Je&2)===0&&mi(e,0):Mr|=n,pi===Ge&&(pi=0)),jn(e)}function Lf(e,t){t===0&&(t=_i()),e=Ol(e,t),e!==null&&(A(e,t),jn(e))}function Ip(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Lf(e,n)}function Gp(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(t),Lf(e,n)}function qp(e,t){return H(e,t)}var Os=null,bi=null,Gr=!1,Ns=!1,qr=!1,cl=0;function jn(e){e!==bi&&e.next===null&&(bi===null?Os=bi=e:bi=bi.next=e),Ns=!0,Gr||(Gr=!0,kp())}function pa(e,t){if(!qr&&Ns){qr=!0;do for(var n=!1,l=Os;l!==null;){if(e!==0){var i=l.pendingLanes;if(i===0)var s=0;else{var c=l.suspendedLanes,h=l.pingedLanes;s=(1<<31-Re(42|e)+1)-1,s&=i&~(c&~h),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Gf(l,s))}else s=Ge,s=Rn(l,l===st?s:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(s&3)===0||vl(l,s)||(n=!0,Gf(l,s));l=l.next}while(n);qr=!1}}function Yp(){wf()}function wf(){Ns=Gr=!1;var e=0;cl!==0&&Pp()&&(e=cl);for(var t=ee(),n=null,l=Os;l!==null;){var i=l.next,s=Hf(l,t);s===0?(l.next=null,n===null?Os=i:n.next=i,i===null&&(bi=n)):(n=l,(e!==0||(s&3)!==0)&&(Ns=!0)),l=i}At!==0&&At!==5||pa(e),cl!==0&&(cl=0)}function Hf(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var c=31-Re(s),h=1<<c,S=i[c];S===-1?((h&n)===0||(h&l)!==0)&&(i[c]=to(h,t)):S<=t&&(e.expiredLanes|=h),s&=~h}if(t=st,n=Ge,n=Rn(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(et===2||et===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&ne(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||vl(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&ne(l),Sl(n)){case 2:case 8:n=Ne;break;case 32:n=je;break;case 268435456:n=w;break;default:n=je}return l=If.bind(null,e),n=H(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&ne(l),e.callbackPriority=2,e.callbackNode=null,2}function If(e,t){if(At!==0&&At!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(js()&&e.callbackNode!==n)return null;var l=Ge;return l=Rn(e,e===st?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Sf(e,l,t),Hf(e,ee()),e.callbackNode!=null&&e.callbackNode===n?If.bind(null,e):null)}function Gf(e,t){if(js())return null;Sf(e,t,!0)}function kp(){tg(function(){(Je&6)!==0?H(Te,Yp):wf()})}function Yr(){if(cl===0){var e=ii;e===0&&(e=Ce,Ce<<=1,(Ce&261888)===0&&(Ce=256)),cl=e}return cl}function qf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:za(""+e)}function Yf(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Vp(e,t,n,l,i){if(t==="submit"&&n&&n.stateNode===i){var s=qf((i[qt]||null).action),c=l.submitter;c&&(t=(t=c[qt]||null)?qf(t.formAction):c.getAttribute("formAction"),t!==null&&(s=t,c=null));var h=new Ha("action","action",null,l,i);e.push({event:h,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(cl!==0){var S=c?Yf(i,c):new FormData(i);rr(n,{pending:!0,data:S,method:i.method,action:s},null,S)}}else typeof s=="function"&&(h.preventDefault(),S=c?Yf(i,c):new FormData(i),rr(n,{pending:!0,data:S,method:i.method,action:s},s,S))},currentTarget:i}]})}}for(var kr=0;kr<Oo.length;kr++){var Vr=Oo[kr],Xp=Vr.toLowerCase(),Fp=Vr[0].toUpperCase()+Vr.slice(1);gn(Xp,"on"+Fp)}gn(vu,"onAnimationEnd"),gn(bu,"onAnimationIteration"),gn(Su,"onAnimationStart"),gn("dblclick","onDoubleClick"),gn("focusin","onFocus"),gn("focusout","onBlur"),gn(rp,"onTransitionRun"),gn(cp,"onTransitionStart"),gn(up,"onTransitionCancel"),gn(xu,"onTransitionEnd"),Vl("onMouseEnter",["mouseout","mouseover"]),Vl("onMouseLeave",["mouseout","mouseover"]),Vl("onPointerEnter",["pointerout","pointerover"]),Vl("onPointerLeave",["pointerout","pointerover"]),xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xl("onBeforeInput",["compositionend","keypress","textInput","paste"]),xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ga));function kf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],i=l.event;l=l.listeners;e:{var s=void 0;if(t)for(var c=l.length-1;0<=c;c--){var h=l[c],S=h.instance,U=h.currentTarget;if(h=h.listener,S!==s&&i.isPropagationStopped())break e;s=h,i.currentTarget=U;try{s(i)}catch(F){qa(F)}i.currentTarget=null,s=S}else for(c=0;c<l.length;c++){if(h=l[c],S=h.instance,U=h.currentTarget,h=h.listener,S!==s&&i.isPropagationStopped())break e;s=h,i.currentTarget=U;try{s(i)}catch(F){qa(F)}i.currentTarget=null,s=S}}}}function Ie(e,t){var n=t[no];n===void 0&&(n=t[no]=new Set);var l=e+"__bubble";n.has(l)||(Vf(t,e,2,!1),n.add(l))}function Xr(e,t,n){var l=0;t&&(l|=4),Vf(n,e,l,t)}var Rs="_reactListening"+Math.random().toString(36).slice(2);function Fr(e){if(!e[Rs]){e[Rs]=!0,Lc.forEach(function(n){n!=="selectionchange"&&(Qp.has(n)||Xr(n,!1,e),Xr(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rs]||(t[Rs]=!0,Xr("selectionchange",!1,t))}}function Vf(e,t,n,l){switch(by(t)){case 2:var i=xg;break;case 8:i=Tg;break;default:i=oc}n=i.bind(null,t,n,e),i=void 0,!fo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),l?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Qr(e,t,n,l,i){var s=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var c=l.tag;if(c===3||c===4){var h=l.stateNode.containerInfo;if(h===i)break;if(c===4)for(c=l.return;c!==null;){var S=c.tag;if((S===3||S===4)&&c.stateNode.containerInfo===i)return;c=c.return}for(;h!==null;){if(c=ql(h),c===null)return;if(S=c.tag,S===5||S===6||S===26||S===27){l=s=c;continue e}h=h.parentNode}}l=l.return}Zc(function(){var U=s,F=co(n),W=[];e:{var I=Tu.get(e);if(I!==void 0){var q=Ha,ce=e;switch(e){case"keypress":if(La(n)===0)break e;case"keydown":case"keyup":q=Gh;break;case"focusin":ce="focus",q=go;break;case"focusout":ce="blur",q=go;break;case"beforeblur":case"afterblur":q=go;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=$c;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Ah;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=kh;break;case vu:case bu:case Su:q=Bh;break;case xu:q=Xh;break;case"scroll":case"scrollend":q=Nh;break;case"wheel":q=Qh;break;case"copy":case"cut":case"paste":q=_h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Pc;break;case"toggle":case"beforetoggle":q=Kh}var xe=(t&4)!==0,it=!xe&&(e==="scroll"||e==="scrollend"),O=xe?I!==null?I+"Capture":null:I;xe=[];for(var T=U,_;T!==null;){var K=T;if(_=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||_===null||O===null||(K=Hi(T,O),K!=null&&xe.push(ma(T,K,_))),it)break;T=T.return}0<xe.length&&(I=new q(I,ce,null,n,F),W.push({event:I,listeners:xe}))}}if((t&7)===0){e:{if(I=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",I&&n!==ro&&(ce=n.relatedTarget||n.fromElement)&&(ql(ce)||ce[Gl]))break e;if((q||I)&&(I=F.window===F?F:(I=F.ownerDocument)?I.defaultView||I.parentWindow:window,q?(ce=n.relatedTarget||n.toElement,q=U,ce=ce?ql(ce):null,ce!==null&&(it=y(ce),xe=ce.tag,ce!==it||xe!==5&&xe!==27&&xe!==6)&&(ce=null)):(q=null,ce=U),q!==ce)){if(xe=$c,K="onMouseLeave",O="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(xe=Pc,K="onPointerLeave",O="onPointerEnter",T="pointer"),it=q==null?I:wi(q),_=ce==null?I:wi(ce),I=new xe(K,T+"leave",q,n,F),I.target=it,I.relatedTarget=_,K=null,ql(F)===U&&(xe=new xe(O,T+"enter",ce,n,F),xe.target=_,xe.relatedTarget=it,K=xe),it=K,q&&ce)t:{for(xe=Zp,O=q,T=ce,_=0,K=O;K;K=xe(K))_++;K=0;for(var me=T;me;me=xe(me))K++;for(;0<_-K;)O=xe(O),_--;for(;0<K-_;)T=xe(T),K--;for(;_--;){if(O===T||T!==null&&O===T.alternate){xe=O;break t}O=xe(O),T=xe(T)}xe=null}else xe=null;q!==null&&Xf(W,I,q,xe,!1),ce!==null&&it!==null&&Xf(W,it,ce,xe,!0)}}e:{if(I=U?wi(U):window,q=I.nodeName&&I.nodeName.toLowerCase(),q==="select"||q==="input"&&I.type==="file")var Qe=ou;else if(au(I))if(ru)Qe=ap;else{Qe=lp;var ye=np}else q=I.nodeName,!q||q.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?U&&oo(U.elementType)&&(Qe=ou):Qe=ip;if(Qe&&(Qe=Qe(e,U))){su(W,Qe,n,F);break e}ye&&ye(e,I,U),e==="focusout"&&U&&I.type==="number"&&U.memoizedProps.value!=null&&so(I,"number",I.value)}switch(ye=U?wi(U):window,e){case"focusin":(au(ye)||ye.contentEditable==="true")&&(Wl=ye,To=U,Fi=null);break;case"focusout":Fi=To=Wl=null;break;case"mousedown":Eo=!0;break;case"contextmenu":case"mouseup":case"dragend":Eo=!1,gu(W,n,F);break;case"selectionchange":if(op)break;case"keydown":case"keyup":gu(W,n,F)}var _e;if(vo)e:{switch(e){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Kl?lu(e,n)&&(qe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(qe="onCompositionStart");qe&&(eu&&n.locale!=="ko"&&(Kl||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Kl&&(_e=Kc()):(Qn=F,yo="value"in Qn?Qn.value:Qn.textContent,Kl=!0)),ye=As(U,qe),0<ye.length&&(qe=new Jc(qe,e,null,n,F),W.push({event:qe,listeners:ye}),_e?qe.data=_e:(_e=iu(n),_e!==null&&(qe.data=_e)))),(_e=$h?Jh(e,n):Ph(e,n))&&(qe=As(U,"onBeforeInput"),0<qe.length&&(ye=new Jc("onBeforeInput","beforeinput",null,n,F),W.push({event:ye,listeners:qe}),ye.data=_e)),Vp(W,e,U,n,F)}kf(W,t)})}function ma(e,t,n){return{instance:e,listener:t,currentTarget:n}}function As(e,t){for(var n=t+"Capture",l=[];e!==null;){var i=e,s=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||s===null||(i=Hi(e,n),i!=null&&l.unshift(ma(e,i,s)),i=Hi(e,t),i!=null&&l.push(ma(e,i,s))),e.tag===3)return l;e=e.return}return[]}function Zp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Xf(e,t,n,l,i){for(var s=t._reactName,c=[];n!==null&&n!==l;){var h=n,S=h.alternate,U=h.stateNode;if(h=h.tag,S!==null&&S===l)break;h!==5&&h!==26&&h!==27||U===null||(S=U,i?(U=Hi(n,s),U!=null&&c.unshift(ma(n,U,S))):i||(U=Hi(n,s),U!=null&&c.push(ma(n,U,S)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var Kp=/\r\n?/g,Wp=/\u0000|\uFFFD/g;function Ff(e){return(typeof e=="string"?e:""+e).replace(Kp,`
`).replace(Wp,"")}function Qf(e,t){return t=Ff(t),Ff(e)===t}function lt(e,t,n,l,i,s){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Fl(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Fl(e,""+l);break;case"className":Ma(e,"class",l);break;case"tabIndex":Ma(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ma(e,n,l);break;case"style":Fc(e,l,s);break;case"data":if(t!=="object"){Ma(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=za(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&lt(e,t,"name",i.name,i,null),lt(e,t,"formEncType",i.formEncType,i,null),lt(e,t,"formMethod",i.formMethod,i,null),lt(e,t,"formTarget",i.formTarget,i,null)):(lt(e,t,"encType",i.encType,i,null),lt(e,t,"method",i.method,i,null),lt(e,t,"target",i.target,i,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=za(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=Cn);break;case"onScroll":l!=null&&Ie("scroll",e);break;case"onScrollEnd":l!=null&&Ie("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(n=l.__html,n!=null){if(i.children!=null)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=za(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":Ie("beforetoggle",e),Ie("toggle",e),Ba(e,"popover",l);break;case"xlinkActuate":An(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":An(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":An(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":An(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":An(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":An(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":An(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":An(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":An(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ba(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=jh.get(n)||n,Ba(e,n,l))}}function Zr(e,t,n,l,i,s){switch(n){case"style":Fc(e,l,s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(n=l.__html,n!=null){if(i.children!=null)throw Error(r(60));e.innerHTML=n}}break;case"children":typeof l=="string"?Fl(e,l):(typeof l=="number"||typeof l=="bigint")&&Fl(e,""+l);break;case"onScroll":l!=null&&Ie("scroll",e);break;case"onScrollEnd":l!=null&&Ie("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Cn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wc.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),s=e[qt]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,i),typeof l=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,i);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):Ba(e,n,l)}}}function Ut(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",e),Ie("load",e);var l=!1,i=!1,s;for(s in n)if(n.hasOwnProperty(s)){var c=n[s];if(c!=null)switch(s){case"src":l=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:lt(e,t,s,c,n,null)}}i&&lt(e,t,"srcSet",n.srcSet,n,null),l&&lt(e,t,"src",n.src,n,null);return;case"input":Ie("invalid",e);var h=s=c=i=null,S=null,U=null;for(l in n)if(n.hasOwnProperty(l)){var F=n[l];if(F!=null)switch(l){case"name":i=F;break;case"type":c=F;break;case"checked":S=F;break;case"defaultChecked":U=F;break;case"value":s=F;break;case"defaultValue":h=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,t));break;default:lt(e,t,l,F,n,null)}}Yc(e,s,h,S,U,c,i,!1);return;case"select":Ie("invalid",e),l=c=s=null;for(i in n)if(n.hasOwnProperty(i)&&(h=n[i],h!=null))switch(i){case"value":s=h;break;case"defaultValue":c=h;break;case"multiple":l=h;default:lt(e,t,i,h,n,null)}t=s,n=c,e.multiple=!!l,t!=null?Xl(e,!!l,t,!1):n!=null&&Xl(e,!!l,n,!0);return;case"textarea":Ie("invalid",e),s=i=l=null;for(c in n)if(n.hasOwnProperty(c)&&(h=n[c],h!=null))switch(c){case"value":l=h;break;case"defaultValue":i=h;break;case"children":s=h;break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:lt(e,t,c,h,n,null)}Vc(e,l,i,s);return;case"option":for(S in n)n.hasOwnProperty(S)&&(l=n[S],l!=null)&&(S==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":lt(e,t,S,l,n,null));return;case"dialog":Ie("beforetoggle",e),Ie("toggle",e),Ie("cancel",e),Ie("close",e);break;case"iframe":case"object":Ie("load",e);break;case"video":case"audio":for(l=0;l<ga.length;l++)Ie(ga[l],e);break;case"image":Ie("error",e),Ie("load",e);break;case"details":Ie("toggle",e);break;case"embed":case"source":case"link":Ie("error",e),Ie("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in n)if(n.hasOwnProperty(U)&&(l=n[U],l!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:lt(e,t,U,l,n,null)}return;default:if(oo(t)){for(F in n)n.hasOwnProperty(F)&&(l=n[F],l!==void 0&&Zr(e,t,F,l,n,void 0));return}}for(h in n)n.hasOwnProperty(h)&&(l=n[h],l!=null&&lt(e,t,h,l,n,null))}function $p(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,c=null,h=null,S=null,U=null,F=null;for(q in n){var W=n[q];if(n.hasOwnProperty(q)&&W!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":S=W;default:l.hasOwnProperty(q)||lt(e,t,q,null,l,W)}}for(var I in l){var q=l[I];if(W=n[I],l.hasOwnProperty(I)&&(q!=null||W!=null))switch(I){case"type":s=q;break;case"name":i=q;break;case"checked":U=q;break;case"defaultChecked":F=q;break;case"value":c=q;break;case"defaultValue":h=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,t));break;default:q!==W&&lt(e,t,I,q,l,W)}}ao(e,c,h,S,U,F,s,i);return;case"select":q=c=h=I=null;for(s in n)if(S=n[s],n.hasOwnProperty(s)&&S!=null)switch(s){case"value":break;case"multiple":q=S;default:l.hasOwnProperty(s)||lt(e,t,s,null,l,S)}for(i in l)if(s=l[i],S=n[i],l.hasOwnProperty(i)&&(s!=null||S!=null))switch(i){case"value":I=s;break;case"defaultValue":h=s;break;case"multiple":c=s;default:s!==S&&lt(e,t,i,s,l,S)}t=h,n=c,l=q,I!=null?Xl(e,!!n,I,!1):!!l!=!!n&&(t!=null?Xl(e,!!n,t,!0):Xl(e,!!n,n?[]:"",!1));return;case"textarea":q=I=null;for(h in n)if(i=n[h],n.hasOwnProperty(h)&&i!=null&&!l.hasOwnProperty(h))switch(h){case"value":break;case"children":break;default:lt(e,t,h,null,l,i)}for(c in l)if(i=l[c],s=n[c],l.hasOwnProperty(c)&&(i!=null||s!=null))switch(c){case"value":I=i;break;case"defaultValue":q=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(r(91));break;default:i!==s&&lt(e,t,c,i,l,s)}kc(e,I,q);return;case"option":for(var ce in n)I=n[ce],n.hasOwnProperty(ce)&&I!=null&&!l.hasOwnProperty(ce)&&(ce==="selected"?e.selected=!1:lt(e,t,ce,null,l,I));for(S in l)I=l[S],q=n[S],l.hasOwnProperty(S)&&I!==q&&(I!=null||q!=null)&&(S==="selected"?e.selected=I&&typeof I!="function"&&typeof I!="symbol":lt(e,t,S,I,l,q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in n)I=n[xe],n.hasOwnProperty(xe)&&I!=null&&!l.hasOwnProperty(xe)&&lt(e,t,xe,null,l,I);for(U in l)if(I=l[U],q=n[U],l.hasOwnProperty(U)&&I!==q&&(I!=null||q!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,t));break;default:lt(e,t,U,I,l,q)}return;default:if(oo(t)){for(var it in n)I=n[it],n.hasOwnProperty(it)&&I!==void 0&&!l.hasOwnProperty(it)&&Zr(e,t,it,void 0,l,I);for(F in l)I=l[F],q=n[F],!l.hasOwnProperty(F)||I===q||I===void 0&&q===void 0||Zr(e,t,F,I,l,q);return}}for(var O in n)I=n[O],n.hasOwnProperty(O)&&I!=null&&!l.hasOwnProperty(O)&&lt(e,t,O,null,l,I);for(W in l)I=l[W],q=n[W],!l.hasOwnProperty(W)||I===q||I==null&&q==null||lt(e,t,W,I,l,q)}function Zf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jp(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var i=n[l],s=i.transferSize,c=i.initiatorType,h=i.duration;if(s&&h&&Zf(c)){for(c=0,h=i.responseEnd,l+=1;l<n.length;l++){var S=n[l],U=S.startTime;if(U>h)break;var F=S.transferSize,W=S.initiatorType;F&&Zf(W)&&(S=S.responseEnd,c+=F*(S<h?1:(h-U)/(S-U)))}if(--l,t+=8*(s+c)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Kr=null,Wr=null;function Cs(e){return e.nodeType===9?e:e.ownerDocument}function Kf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function $r(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jr=null;function Pp(){var e=window.event;return e&&e.type==="popstate"?e===Jr?!1:(Jr=e,!0):(Jr=null,!1)}var $f=typeof setTimeout=="function"?setTimeout:void 0,eg=typeof clearTimeout=="function"?clearTimeout:void 0,Jf=typeof Promise=="function"?Promise:void 0,tg=typeof queueMicrotask=="function"?queueMicrotask:typeof Jf<"u"?function(e){return Jf.resolve(null).then(e).catch(ng)}:$f;function ng(e){setTimeout(function(){throw e})}function ul(e){return e==="head"}function Pf(e,t){var n=t,l=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(i),Ei(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")va(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,va(n);for(var s=n.firstChild;s;){var c=s.nextSibling,h=s.nodeName;s[Li]||h==="SCRIPT"||h==="STYLE"||h==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=c}}else n==="body"&&va(e.ownerDocument.body);n=i}while(n);Ei(t)}function ey(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function Pr(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Pr(n),lo(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function lg(e,t,n,l){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Li])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=yn(e.nextSibling),e===null)break}return null}function ig(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=yn(e.nextSibling),e===null))return null;return e}function ty(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=yn(e.nextSibling),e===null))return null;return e}function ec(e){return e.data==="$?"||e.data==="$~"}function tc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ag(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function yn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var nc=null;function ny(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return yn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function ly(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function iy(e,t,n){switch(t=Cs(n),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function va(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);lo(e)}var hn=new Map,ay=new Set;function Ds(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Xn=J.d;J.d={f:sg,r:og,D:rg,C:cg,L:ug,m:dg,X:yg,S:fg,M:hg};function sg(){var e=Xn.f(),t=xs();return e||t}function og(e){var t=Yl(e);t!==null&&t.tag===5&&t.type==="form"?xd(t):Xn.r(e)}var Si=typeof document>"u"?null:document;function sy(e,t,n){var l=Si;if(l&&typeof t=="string"&&t){var i=sn(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),ay.has(i)||(ay.add(i),e={rel:e,crossOrigin:n,href:t},l.querySelector(i)===null&&(t=l.createElement("link"),Ut(t,"link",e),Ct(t),l.head.appendChild(t)))}}function rg(e){Xn.D(e),sy("dns-prefetch",e,null)}function cg(e,t){Xn.C(e,t),sy("preconnect",e,t)}function ug(e,t,n){Xn.L(e,t,n);var l=Si;if(l&&e&&t){var i='link[rel="preload"][as="'+sn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+sn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+sn(n.imageSizes)+'"]')):i+='[href="'+sn(e)+'"]';var s=i;switch(t){case"style":s=xi(e);break;case"script":s=Ti(e)}hn.has(s)||(e=x({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),hn.set(s,e),l.querySelector(i)!==null||t==="style"&&l.querySelector(ba(s))||t==="script"&&l.querySelector(Sa(s))||(t=l.createElement("link"),Ut(t,"link",e),Ct(t),l.head.appendChild(t)))}}function dg(e,t){Xn.m(e,t);var n=Si;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+sn(l)+'"][href="'+sn(e)+'"]',s=i;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Ti(e)}if(!hn.has(s)&&(e=x({rel:"modulepreload",href:e},t),hn.set(s,e),n.querySelector(i)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Sa(s)))return}l=n.createElement("link"),Ut(l,"link",e),Ct(l),n.head.appendChild(l)}}}function fg(e,t,n){Xn.S(e,t,n);var l=Si;if(l&&e){var i=kl(l).hoistableStyles,s=xi(e);t=t||"default";var c=i.get(s);if(!c){var h={loading:0,preload:null};if(c=l.querySelector(ba(s)))h.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},n),(n=hn.get(s))&&lc(e,n);var S=c=l.createElement("link");Ct(S),Ut(S,"link",e),S._p=new Promise(function(U,F){S.onload=U,S.onerror=F}),S.addEventListener("load",function(){h.loading|=1}),S.addEventListener("error",function(){h.loading|=2}),h.loading|=4,Bs(c,t,l)}c={type:"stylesheet",instance:c,count:1,state:h},i.set(s,c)}}}function yg(e,t){Xn.X(e,t);var n=Si;if(n&&e){var l=kl(n).hoistableScripts,i=Ti(e),s=l.get(i);s||(s=n.querySelector(Sa(i)),s||(e=x({src:e,async:!0},t),(t=hn.get(i))&&ic(e,t),s=n.createElement("script"),Ct(s),Ut(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(i,s))}}function hg(e,t){Xn.M(e,t);var n=Si;if(n&&e){var l=kl(n).hoistableScripts,i=Ti(e),s=l.get(i);s||(s=n.querySelector(Sa(i)),s||(e=x({src:e,async:!0,type:"module"},t),(t=hn.get(i))&&ic(e,t),s=n.createElement("script"),Ct(s),Ut(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(i,s))}}function oy(e,t,n,l){var i=(i=re.current)?Ds(i):null;if(!i)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=xi(n.href),n=kl(i).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=xi(n.href);var s=kl(i).hoistableStyles,c=s.get(e);if(c||(i=i.ownerDocument||i,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,c),(s=i.querySelector(ba(e)))&&!s._p&&(c.instance=s,c.state.loading=5),hn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},hn.set(e,n),s||pg(i,e,n,c.state))),t&&l===null)throw Error(r(528,""));return c}if(t&&l!==null)throw Error(r(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ti(n),n=kl(i).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function xi(e){return'href="'+sn(e)+'"'}function ba(e){return'link[rel="stylesheet"]['+e+"]"}function ry(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function pg(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Ut(t,"link",n),Ct(t),e.head.appendChild(t))}function Ti(e){return'[src="'+sn(e)+'"]'}function Sa(e){return"script[async]"+e}function cy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+sn(n.href)+'"]');if(l)return t.instance=l,Ct(l),l;var i=x({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ct(l),Ut(l,"style",i),Bs(l,n.precedence,e),t.instance=l;case"stylesheet":i=xi(n.href);var s=e.querySelector(ba(i));if(s)return t.state.loading|=4,t.instance=s,Ct(s),s;l=ry(n),(i=hn.get(i))&&lc(l,i),s=(e.ownerDocument||e).createElement("link"),Ct(s);var c=s;return c._p=new Promise(function(h,S){c.onload=h,c.onerror=S}),Ut(s,"link",l),t.state.loading|=4,Bs(s,n.precedence,e),t.instance=s;case"script":return s=Ti(n.src),(i=e.querySelector(Sa(s)))?(t.instance=i,Ct(i),i):(l=n,(i=hn.get(s))&&(l=x({},n),ic(l,i)),e=e.ownerDocument||e,i=e.createElement("script"),Ct(i),Ut(i,"link",l),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Bs(l,n.precedence,e));return t.instance}function Bs(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=l.length?l[l.length-1]:null,s=i,c=0;c<l.length;c++){var h=l[c];if(h.dataset.precedence===t)s=h;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function lc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ic(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ms=null;function uy(e,t,n){if(Ms===null){var l=new Map,i=Ms=new Map;i.set(n,l)}else i=Ms,l=i.get(n),l||(l=new Map,i.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Li]||s[Bt]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var c=s.getAttribute(t)||"";c=e+c;var h=l.get(c);h?h.push(s):l.set(c,[s])}}return l}function dy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function gg(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function fy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function mg(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var i=xi(l.href),s=t.querySelector(ba(i));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=_s.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,Ct(s);return}s=t.ownerDocument||t,l=ry(l),(i=hn.get(i))&&lc(l,i),s=s.createElement("link"),Ct(s);var c=s;c._p=new Promise(function(h,S){c.onload=h,c.onerror=S}),Ut(s,"link",l),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=_s.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var ac=0;function vg(e,t){return e.stylesheets&&e.count===0&&Us(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&Us(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&ac===0&&(ac=62500*Jp());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Us(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>ac?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(i)}}:null}function _s(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Us(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var zs=null;function Us(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,zs=new Map,t.forEach(bg,e),zs=null,_s.call(e))}function bg(e,t){if(!(t.state.loading&4)){var n=zs.get(e);if(n)var l=n.get(null);else{n=new Map,zs.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var c=i[s];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(n.set(c.dataset.precedence,c),l=c)}l&&n.set(null,l)}i=t.instance,c=i.getAttribute("data-precedence"),s=n.get(c)||l,s===l&&n.set(null,i),n.set(c,i),this.count++,l=_s.bind(this),i.addEventListener("load",l),i.addEventListener("error",l),s?s.parentNode.insertBefore(i,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var xa={$$typeof:z,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function Sg(e,t,n,l,i,s,c,h,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.hiddenUpdates=zi(null),this.identifierPrefix=l,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function yy(e,t,n,l,i,s,c,h,S,U,F,W){return e=new Sg(e,t,n,c,S,U,F,W,h),t=1,s===!0&&(t|=24),s=Jt(3,null,null,t),e.current=s,s.stateNode=e,t=Ho(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:l,isDehydrated:n,cache:t},Yo(s),e}function hy(e){return e?(e=Pl,e):Pl}function py(e,t,n,l,i,s){i=hy(i),l.context===null?l.context=i:l.pendingContext=i,l=Pn(t),l.payload={element:n},s=s===void 0?null:s,s!==null&&(l.callback=s),n=el(e,l,t),n!==null&&(Qt(n,e,t),Pi(n,e,t))}function gy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function sc(e,t){gy(e,t),(e=e.alternate)&&gy(e,t)}function my(e){if(e.tag===13||e.tag===31){var t=Ol(e,67108864);t!==null&&Qt(t,e,67108864),sc(e,67108864)}}function vy(e){if(e.tag===13||e.tag===31){var t=ln();t=bl(t);var n=Ol(e,t);n!==null&&Qt(n,e,t),sc(e,t)}}var Ls=!0;function xg(e,t,n,l){var i=M.T;M.T=null;var s=J.p;try{J.p=2,oc(e,t,n,l)}finally{J.p=s,M.T=i}}function Tg(e,t,n,l){var i=M.T;M.T=null;var s=J.p;try{J.p=8,oc(e,t,n,l)}finally{J.p=s,M.T=i}}function oc(e,t,n,l){if(Ls){var i=rc(l);if(i===null)Qr(e,t,l,ws,n),Sy(e,l);else if(jg(i,e,t,n,l))l.stopPropagation();else if(Sy(e,l),t&4&&-1<Eg.indexOf(e)){for(;i!==null;){var s=Yl(i);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var c=Rt(s.pendingLanes);if(c!==0){var h=s;for(h.pendingLanes|=2,h.entangledLanes|=2;c;){var S=1<<31-Re(c);h.entanglements[1]|=S,c&=~S}jn(s),(Je&6)===0&&(bs=ee()+500,pa(0))}}break;case 31:case 13:h=Ol(s,2),h!==null&&Qt(h,s,2),xs(),sc(s,2)}if(s=rc(l),s===null&&Qr(e,t,l,ws,n),s===i)break;i=s}i!==null&&l.stopPropagation()}else Qr(e,t,l,null,n)}}function rc(e){return e=co(e),cc(e)}var ws=null;function cc(e){if(ws=null,e=ql(e),e!==null){var t=y(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=b(t),e!==null)return e;e=null}else if(n===31){if(e=v(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ws=e,null}function by(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fe()){case Te:return 2;case Ne:return 8;case je:case ge:return 32;case w:return 268435456;default:return 32}default:return 32}}var uc=!1,dl=null,fl=null,yl=null,Ta=new Map,Ea=new Map,hl=[],Eg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sy(e,t){switch(e){case"focusin":case"focusout":dl=null;break;case"dragenter":case"dragleave":fl=null;break;case"mouseover":case"mouseout":yl=null;break;case"pointerover":case"pointerout":Ta.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(t.pointerId)}}function ja(e,t,n,l,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Yl(t),t!==null&&my(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function jg(e,t,n,l,i){switch(t){case"focusin":return dl=ja(dl,e,t,n,l,i),!0;case"dragenter":return fl=ja(fl,e,t,n,l,i),!0;case"mouseover":return yl=ja(yl,e,t,n,l,i),!0;case"pointerover":var s=i.pointerId;return Ta.set(s,ja(Ta.get(s)||null,e,t,n,l,i)),!0;case"gotpointercapture":return s=i.pointerId,Ea.set(s,ja(Ea.get(s)||null,e,t,n,l,i)),!0}return!1}function xy(e){var t=ql(e.target);if(t!==null){var n=y(t);if(n!==null){if(t=n.tag,t===13){if(t=b(n),t!==null){e.blockedOn=t,Da(e.priority,function(){vy(n)});return}}else if(t===31){if(t=v(n),t!==null){e.blockedOn=t,Da(e.priority,function(){vy(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=rc(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);ro=l,n.target.dispatchEvent(l),ro=null}else return t=Yl(n),t!==null&&my(t),e.blockedOn=n,!1;t.shift()}return!0}function Ty(e,t,n){Hs(e)&&n.delete(t)}function Og(){uc=!1,dl!==null&&Hs(dl)&&(dl=null),fl!==null&&Hs(fl)&&(fl=null),yl!==null&&Hs(yl)&&(yl=null),Ta.forEach(Ty),Ea.forEach(Ty)}function Is(e,t){e.blockedOn===t&&(e.blockedOn=null,uc||(uc=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Og)))}var Gs=null;function Ey(e){Gs!==e&&(Gs=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Gs===e&&(Gs=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],i=e[t+2];if(typeof l!="function"){if(cc(l||n)===null)continue;break}var s=Yl(n);s!==null&&(e.splice(t,3),t-=3,rr(s,{pending:!0,data:i,method:n.method,action:l},l,i))}}))}function Ei(e){function t(S){return Is(S,e)}dl!==null&&Is(dl,e),fl!==null&&Is(fl,e),yl!==null&&Is(yl,e),Ta.forEach(t),Ea.forEach(t);for(var n=0;n<hl.length;n++){var l=hl[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<hl.length&&(n=hl[0],n.blockedOn===null);)xy(n),n.blockedOn===null&&hl.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var i=n[l],s=n[l+1],c=i[qt]||null;if(typeof s=="function")c||Ey(n);else if(c){var h=null;if(s&&s.hasAttribute("formAction")){if(i=s,c=s[qt]||null)h=c.formAction;else if(cc(i)!==null)continue}else h=c.action;typeof h=="function"?n[l+1]=h:(n.splice(l,3),l-=3),Ey(n)}}}function jy(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(c){return i=c})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function dc(e){this._internalRoot=e}qs.prototype.render=dc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var n=t.current,l=ln();py(n,l,e,t,null,null)},qs.prototype.unmount=dc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;py(e.current,2,null,e,null,null),xs(),t[Gl]=null}};function qs(e){this._internalRoot=e}qs.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ht();e={blockedOn:null,target:e,priority:t};for(var n=0;n<hl.length&&t!==0&&t<hl[n].priority;n++);hl.splice(n,0,e),n===0&&xy(e)}};var Oy=f.version;if(Oy!=="19.2.3")throw Error(r(527,Oy,"19.2.3"));J.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=g(t),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var Ng={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ys=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ys.isDisabled&&Ys.supportsFiber)try{ot=Ys.inject(Ng),ke=Ys}catch{}}return Na.createRoot=function(e,t){if(!d(e))throw Error(r(299));var n=!1,l="",i=Bd,s=Md,c=_d;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=yy(e,1,!1,null,null,n,l,null,i,s,c,jy),e[Gl]=t.current,Fr(e),new dc(t)},Na.hydrateRoot=function(e,t,n){if(!d(e))throw Error(r(299));var l=!1,i="",s=Bd,c=Md,h=_d,S=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(c=n.onCaughtError),n.onRecoverableError!==void 0&&(h=n.onRecoverableError),n.formState!==void 0&&(S=n.formState)),t=yy(e,1,!0,t,n??null,l,i,S,s,c,h,jy),t.context=hy(null),n=t.current,l=ln(),l=bl(l),i=Pn(l),i.callback=null,el(n,i,l),n=l,t.current.lanes=n,A(t,n),jn(t),e[Gl]=t.current,Fr(e),new qs(t)},Na.version="19.2.3",Na}var Uy;function wg(){if(Uy)return hc.exports;Uy=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(f){console.error(f)}}return o(),hc.exports=Lg(),hc.exports}var Hg=wg();const Ly=o=>{let f;const u=new Set,r=(g,E)=>{const x=typeof g=="function"?g(f):g;if(!Object.is(x,f)){const L=f;f=E??(typeof x!="object"||x===null)?x:Object.assign({},f,x),u.forEach(D=>D(f,L))}},d=()=>f,v={setState:r,getState:d,getInitialState:()=>m,subscribe:g=>(u.add(g),()=>u.delete(g))},m=f=o(r,d,v);return v},Ig=(o=>o?Ly(o):Ly),Gg=o=>o;function qg(o,f=Gg){const u=ks.useSyncExternalStore(o.subscribe,ks.useCallback(()=>f(o.getState()),[o,f]),ks.useCallback(()=>f(o.getInitialState()),[o,f]));return ks.useDebugValue(u),u}const Yg=o=>{const f=Ig(o),u=r=>qg(f,r);return Object.assign(u,f),u},kg=(o=>Yg);function Vg(o,f){let u;try{u=o()}catch{return}return{getItem:d=>{var y;const b=m=>m===null?null:JSON.parse(m,void 0),v=(y=u.getItem(d))!=null?y:null;return v instanceof Promise?v.then(b):b(v)},setItem:(d,y)=>u.setItem(d,JSON.stringify(y,void 0)),removeItem:d=>u.removeItem(d)}}const Nc=o=>f=>{try{const u=o(f);return u instanceof Promise?u:{then(r){return Nc(r)(u)},catch(r){return this}}}catch(u){return{then(r){return this},catch(r){return Nc(r)(u)}}}},Xg=(o,f)=>(u,r,d)=>{let y={storage:Vg(()=>localStorage),partialize:Q=>Q,version:0,merge:(Q,B)=>({...B,...Q}),...f},b=!1,v=0;const m=new Set,g=new Set;let E=y.storage;if(!E)return o((...Q)=>{console.warn(`[zustand persist middleware] Unable to update item '${y.name}', the given storage is currently unavailable.`),u(...Q)},r,d);const x=()=>{const Q=y.partialize({...r()});return E.setItem(y.name,{state:Q,version:y.version})},L=d.setState;d.setState=(Q,B)=>(L(Q,B),x());const D=o((...Q)=>(u(...Q),x()),r,d);d.getInitialState=()=>D;let Z;const R=()=>{var Q,B;if(!E)return;const V=++v;b=!1,m.forEach(C=>{var ae;return C((ae=r())!=null?ae:D)});const z=((B=y.onRehydrateStorage)==null?void 0:B.call(y,(Q=r())!=null?Q:D))||void 0;return Nc(E.getItem.bind(E))(y.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==y.version){if(y.migrate){const ae=y.migrate(C.state,C.version);return ae instanceof Promise?ae.then(Ae=>[!0,Ae]):[!0,ae]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,C.state];return[!1,void 0]}).then(C=>{var ae;if(V!==v)return;const[Ae,G]=C;if(Z=y.merge(G,(ae=r())!=null?ae:D),u(Z,!0),Ae)return x()}).then(()=>{V===v&&(z?.(Z,void 0),Z=r(),b=!0,g.forEach(C=>C(Z)))}).catch(C=>{V===v&&z?.(void 0,C)})};return d.persist={setOptions:Q=>{y={...y,...Q},Q.storage&&(E=Q.storage)},clearStorage:()=>{E?.removeItem(y.name)},getOptions:()=>y,rehydrate:()=>R(),hasHydrated:()=>b,onHydrate:Q=>(m.add(Q),()=>{m.delete(Q)}),onFinishHydration:Q=>(g.add(Q),()=>{g.delete(Q)})},y.skipHydration||R(),Z||D},Fg=Xg,vc=["NONE","KNOWN","SCOUTED","FULL"],wy=["LOGISTICS","INTELLIGENCE","OPERATIONS","FORTIFICATIONS","DIPLOMACY"],Ws=[{id:"LOG_BASIC_SUPPLY",tree:"LOGISTICS",tier:1,name:"Basic Supply Coordination",description:"Establishes standardised supply routing and accountability.",prerequisites:[],costBand:"LOW",timeTurns:1,visibility:"HIDDEN",locksIn:!1,effects:[{type:"SUPPLY_RANGE_BONUS",value:1}],unlocksUpgrades:["UPG_SUPPLY_DEPOT"]},{id:"LOG_MOTOR_TRANSPORT",tree:"LOGISTICS",tier:1,name:"Motor Transport Pools",description:"Centralised allocation of transport assets.",prerequisites:[],costBand:"LOW",timeTurns:1,visibility:"RUMOURED",locksIn:!1,effects:[{type:"SUPPLY_DISRUPTION_REDUCTION",value:10}]},{id:"LOG_FORWARD_DEPOTS",tree:"LOGISTICS",tier:2,name:"Forward Supply Depots",description:"Establishes hardened forward depots closer to the front.",prerequisites:["LOG_BASIC_SUPPLY"],costBand:"MEDIUM",timeTurns:2,visibility:"OBSERVED",locksIn:!0,effects:[{type:"SUPPLY_RANGE_BONUS",value:1}],unlocksUpgrades:["UPG_FORWARD_DEPOT"]},{id:"LOG_REDUNDANT_ROUTING",tree:"LOGISTICS",tier:2,name:"Redundant Supply Routing",description:"Multiple fallback routes reduce catastrophic disruption.",prerequisites:["LOG_MOTOR_TRANSPORT"],costBand:"MEDIUM",timeTurns:2,visibility:"OBSERVED",locksIn:!0,effects:[{type:"SUPPLY_DISRUPTION_REDUCTION",value:20}]},{id:"LOG_STRATEGIC_LIFT",tree:"LOGISTICS",tier:3,name:"Strategic Lift Capability",description:"Large-scale transport enables rapid redeployment.",prerequisites:["LOG_FORWARD_DEPOTS","LOG_REDUNDANT_ROUTING"],costBand:"HIGH",timeTurns:3,visibility:"PUBLIC",locksIn:!0,effects:[{type:"UPGRADE_UNLOCK",upgradeId:"UPG_STRATEGIC_REDEPLOY"}]},{id:"INT_FIELD_RECON",tree:"INTELLIGENCE",tier:1,name:"Field Recon Detachments",description:"Dedicated recon elements improve local intelligence.",prerequisites:[],costBand:"LOW",timeTurns:1,visibility:"HIDDEN",locksIn:!1,effects:[{type:"RECON_ACTION_BONUS",value:1}]},{id:"INT_SIGNAL_INTERCEPTS",tree:"INTELLIGENCE",tier:2,name:"Signals Intercepts",description:"Intercepted communications improve operational awareness.",prerequisites:["INT_FIELD_RECON"],costBand:"MEDIUM",timeTurns:2,visibility:"OBSERVED",locksIn:!0,effects:[{type:"INTEL_DECAY_REDUCTION",value:25}]},{id:"FORT_DEPTH_WORKS",tree:"FORTIFICATIONS",tier:2,name:"Defense in Depth Works",description:"Layered fortification work improves withdrawal discipline.",prerequisites:[],costBand:"MEDIUM",timeTurns:2,visibility:"OBSERVED",locksIn:!0,effects:[{type:"WITHDRAWAL_BONUS",value:5}]}],On=Object.fromEntries(Ws.map(o=>[o.id,o])),_c=[{id:"DOC_MOBILE_WARFARE",name:"Mobile Warfare",description:"Prioritises manoeuvre, rapid exploitation, and operational tempo.",tags:["OFFENSE","MOBILITY"],effects:[{type:"OFFENSE_BONUS",value:10},{type:"FORCED_MARCH_RISK_REDUCTION",value:15},{type:"MOMENTUM_GAIN_BONUS",value:10}],switchCooldownTurns:2,switchPenalty:{type:"SUPPLY_DISRUPTION",value:10}},{id:"DOC_FIREPOWER_ATTRITION",name:"Firepower & Attrition",description:"Emphasises overwhelming firepower and grinding advances.",tags:["OFFENSE","ATTRITION"],effects:[{type:"OFFENSE_BONUS",value:8},{type:"DEFENSE_BONUS",value:5},{type:"SUPPLY_TOLERANCE",value:1}],switchCooldownTurns:2,switchPenalty:{type:"MOMENTUM_LOSS",value:1}},{id:"DOC_DEFENSE_IN_DEPTH",name:"Defense in Depth",description:"Layered defenses, elastic withdrawals, and fortified positions.",tags:["DEFENSE","LOGISTICS"],effects:[{type:"DEFENSE_BONUS",value:12},{type:"WITHDRAWAL_SUCCESS_BONUS",value:10},{type:"FORTIFY_BUILD_SPEED",value:20}],switchCooldownTurns:2,switchPenalty:{type:"ORDER_LOCKOUT_TURNS",value:1}},{id:"DOC_DECEPTION_INITIATIVE",name:"Deception & Initiative",description:"Misleading manoeuvres, feints, and intel-driven strikes.",tags:["DECEPTION","MOBILITY"],effects:[{type:"RECON_INTEL_BONUS",value:10},{type:"ORDER_FLEXIBILITY",value:1},{type:"DECEPTION_UNLOCK",actionId:"ACT_FEINT"}],switchCooldownTurns:2,switchPenalty:{type:"SUPPLY_DISRUPTION",value:5}}],Qs=[{id:"TRT_MISSION_COMMAND",name:"Mission Command",description:"Delegated authority enables faster adjustments in the field.",tier:1,slotCost:1,effects:[{type:"ORDER_FLEXIBILITY",value:1}]},{id:"TRT_SUPPLY_DISCIPLINE",name:"Supply Discipline",description:"Standard operating procedures reduce supply disruption.",tier:1,slotCost:1,effects:[{type:"SUPPLY_TOLERANCE",value:1}]},{id:"TRT_PREPARED_POSITIONS",name:"Prepared Positions",description:"Improves the speed and effectiveness of fortification work.",tier:1,slotCost:1,effects:[{type:"FORTIFY_BUILD_SPEED",value:10}]},{id:"TRT_ADVANCED_ROUTING",name:"Advanced Routing",description:"Fallback routing and improved staging reduces disruption.",tier:2,slotCost:1,requiredResearch:["LOG_REDUNDANT_ROUTING"],effects:[{type:"FORCED_MARCH_RISK_REDUCTION",value:10}]},{id:"TRT_SIGNALS_COORDINATION",name:"Signals Coordination",description:"Intel sharing improves recon and reduces fog decay.",tier:2,slotCost:1,requiredResearch:["INT_SIGNAL_INTERCEPTS"],effects:[{type:"RECON_INTEL_BONUS",value:10}]},{id:"TRT_ELASTIC_DEFENSE",name:"Elastic Defense",description:"Improves controlled withdrawals and defensive cohesion.",tier:2,slotCost:1,requiredResearch:["FORT_DEPTH_WORKS"],effects:[{type:"WITHDRAWAL_SUCCESS_BONUS",value:10}]},{id:"TRT_OPERATIONAL_TEMPO",name:"Operational Tempo",description:"Improves momentum gains and exploitation windows.",tier:3,slotCost:2,requiredResearch:["LOG_STRATEGIC_LIFT"],effects:[{type:"MOMENTUM_GAIN_BONUS",value:15}]}],$s=Object.fromEntries(_c.map(o=>[o.id,o])),Zs=Object.fromEntries(Qs.map(o=>[o.id,o])),sh=[{id:"UPG_SUPPLY_DEPOT",name:"Supply Depot",description:"Establishes a supply depot to extend operational reach.",scope:"TERRITORY",requiredResearch:["LOG_BASIC_SUPPLY"],cost:{points:2,upkeepPerTurn:1},maxPerTerritory:1,effects:[{type:"SUPPLY_HUB",value:1}],tags:["SUPPLY"]},{id:"UPG_FORWARD_DEPOT",name:"Forward Supply Depot",description:"A hardened forward depot supporting frontline formations.",scope:"TERRITORY",requiredResearch:["LOG_FORWARD_DEPOTS"],cost:{points:4,upkeepPerTurn:2},maxPerTerritory:1,effects:[{type:"SUPPLY_HUB",value:2},{type:"DEFENSE_BONUS",value:5}],tags:["SUPPLY","FORT"]},{id:"UPG_STRATEGIC_REDEPLOY",name:"Strategic Redeploy Capability",description:"Enables rapid redeployment with reduced forced march risk.",scope:"NATION",requiredResearch:["LOG_STRATEGIC_LIFT"],cost:{points:8,upkeepPerTurn:2},unique:!0,effects:[{type:"MOVEMENT_BONUS",value:1},{type:"FORCED_MARCH_RISK_REDUCTION",value:15}],tags:["OPS","SUPPLY"]},{id:"UPG_FORT_WORKS",name:"Fortification Works",description:"Adds fortification capacity to a territory.",scope:"TERRITORY",cost:{points:3,upkeepPerTurn:1},maxPerTerritory:1,effects:[{type:"FORT_SLOTS",value:1}],tags:["FORT"]},{id:"UPG_VETERAN_DRILL",name:"Veteran Drill",description:"Improves cohesion and withdrawal outcomes.",scope:"FORCE",cost:{points:2},maxPerPlatoon:1,effects:[{type:"WITHDRAWAL_SUCCESS_BONUS",value:10}],tags:["OPS"]}],Ci=Object.fromEntries(sh.map(o=>[o.id,o])),Qg=(o,f,u,r)=>o.filter(d=>d.defId!==f||d.scope!==u?!1:u==="TERRITORY"?"territoryId"in d&&d.territoryId===r:u==="FORCE"?"platoonId"in d&&d.platoonId===r:!0).length,oh=({upgrade:o,doctrineState:f,researchState:u,upgradesState:r,resourcePoints:d,territoryId:y,platoonId:b})=>{const v=[],m=r.applied??[],g=m.filter(L=>L.defId===o.id).length,E=o.scope==="TERRITORY"?y:b,x=Qg(m,o.id,o.scope,E??null);if(o.requiredResearch?.length){const L=o.requiredResearch.filter(D=>!u.completedResearch.includes(D));L.length&&v.push(`Requires research: ${L.join(", ")}`)}if(o.requiredDoctrineStances?.length&&(o.requiredDoctrineStances.includes(f.activeStanceId)||v.push("Requires active doctrine stance.")),o.requiredDoctrineTraits?.length){const L=o.requiredDoctrineTraits.filter(D=>!f.equippedTraitIds.includes(D));L.length&&v.push(`Requires doctrine traits: ${L.join(", ")}`)}return o.scope==="TERRITORY"&&!y&&v.push("Select a target territory."),o.scope==="FORCE"&&!b&&v.push("Select a target platoon."),o.unique&&g>0&&v.push("Unique upgrade already applied."),o.scope==="NATION"&&o.maxPerNation!=null&&g>=o.maxPerNation&&v.push("Nation limit reached."),o.scope==="TERRITORY"&&o.maxPerTerritory!=null&&y&&x>=o.maxPerTerritory&&v.push("Territory limit reached."),o.scope==="FORCE"&&o.maxPerPlatoon!=null&&b&&x>=o.maxPerPlatoon&&v.push("Platoon limit reached."),d<o.cost.points&&v.push("Insufficient resources."),{eligible:v.length===0,reasons:v,appliedCount:g,appliedForTarget:x}},Hy=()=>({orderFlexibility:0,movementBonus:0,forcedMarchRiskReduction:0,withdrawalBonus:0,offenseBonus:0,defenseBonus:0}),Iy=()=>({movementBonus:0,forcedMarchRiskReduction:0,withdrawalBonus:0,offenseBonus:0,defenseBonus:0,supplyHubBonusByTerritory:{},fortSlotsBonusByTerritory:{},reconBonusByTerritory:{}}),Zg=()=>({movementBonus:0,forcedMarchRiskReduction:0,withdrawalBonus:0,offenseBonus:0,defenseBonus:0}),Gy=(o,f)=>{switch(f.type){case"ORDER_FLEXIBILITY":o.orderFlexibility+=f.value;break;case"MOVEMENT_BONUS":o.movementBonus+=f.value;break;case"FORCED_MARCH_RISK_REDUCTION":o.forcedMarchRiskReduction+=f.value;break;case"WITHDRAWAL_SUCCESS_BONUS":o.withdrawalBonus+=f.value;break;case"DEFENSE_BONUS":o.defenseBonus+=f.value;break;case"OFFENSE_BONUS":o.offenseBonus+=f.value;break;case"DECEPTION_UNLOCK":break;case"DIPLOMACY_PRESSURE_MOD":break;case"SUPPLY_TOLERANCE":break;case"RECON_INTEL_BONUS":break;case"FORTIFY_BUILD_SPEED":break;case"MOMENTUM_GAIN_BONUS":break;case"SUPPLY_HUB":break;case"FORT_SLOTS":break;case"AA_COVER":break;case"RECON_BONUS":break;case"INTEL_VISIBILITY_BONUS":break;case"ORDER_SLOT_BONUS":break;default:return f}},Kg=(o,f)=>{switch(f.type){case"WITHDRAWAL_BONUS":o.withdrawalBonus+=f.value;break;case"SUPPLY_RANGE_BONUS":case"SUPPLY_DISRUPTION_REDUCTION":case"INTEL_DECAY_REDUCTION":case"RECON_ACTION_BONUS":case"FORT_SLOT_BONUS":case"DIPLOMACY_ACTION_UNLOCK":case"UPGRADE_UNLOCK":break;default:return f}},bc=(o,f,u)=>{o[f]=(o[f]??0)+u},Wg=(o,f,u,r)=>{if(u==="TERRITORY"&&r)switch(f.type){case"SUPPLY_HUB":bc(o.supplyHubBonusByTerritory,r,f.value);return;case"FORT_SLOTS":bc(o.fortSlotsBonusByTerritory,r,f.value);return;case"RECON_BONUS":bc(o.reconBonusByTerritory,r,f.value);return}switch(f.type){case"MOVEMENT_BONUS":o.movementBonus+=f.value;break;case"FORCED_MARCH_RISK_REDUCTION":o.forcedMarchRiskReduction+=f.value;break;case"WITHDRAWAL_SUCCESS_BONUS":o.withdrawalBonus+=f.value;break;case"OFFENSE_BONUS":o.offenseBonus+=f.value;break;case"DEFENSE_BONUS":o.defenseBonus+=f.value;break}},$g=(o,f)=>{switch(f.type){case"MOVEMENT_BONUS":o.movementBonus+=f.value;break;case"FORCED_MARCH_RISK_REDUCTION":o.forcedMarchRiskReduction+=f.value;break;case"WITHDRAWAL_SUCCESS_BONUS":o.withdrawalBonus+=f.value;break;case"OFFENSE_BONUS":o.offenseBonus+=f.value;break;case"DEFENSE_BONUS":o.defenseBonus+=f.value;break}},rh=(o,f)=>{const u=o.nationDoctrineState[f],r=o.nationResearchState[f];if(!u||!r)return Hy();const d=Hy(),y=$s[u.activeStanceId];y&&y.effects.forEach(v=>Gy(d,v));let b=0;for(const v of u.equippedTraitIds){const m=Zs[v];m&&(m.requiredResearch?.length&&!m.requiredResearch.every(E=>r.completedResearch.includes(E))||m.prerequisitesTraits?.length&&!m.prerequisitesTraits.every(E=>u.equippedTraitIds.includes(E))||b+m.slotCost>u.traitSlots||(b+=m.slotCost,m.effects.forEach(g=>Gy(d,g))))}for(const v of r.completedResearch){const m=On[v];m&&m.effects.forEach(g=>Kg(d,g))}return d},Rc=(o,f)=>{const u=o.nationUpgradesState[f];if(!u)return Iy();const r=rh(o,f),d={...Iy(),movementBonus:r.movementBonus,forcedMarchRiskReduction:r.forcedMarchRiskReduction,withdrawalBonus:r.withdrawalBonus,offenseBonus:r.offenseBonus,defenseBonus:r.defenseBonus};for(const y of u.applied){const b=Ci[y.defId];if(!b)continue;const v=y.scope==="TERRITORY"?y.territoryId:void 0;b.effects.forEach(m=>Wg(d,m,y.scope,v))}return d},Jg=(o,f)=>{const u=o.platoonsById?.[f];if(!u)return Zg();const r=Rc(o,u.nation),d=o.nationUpgradesState[u.nation],y={movementBonus:r.movementBonus,forcedMarchRiskReduction:r.forcedMarchRiskReduction,withdrawalBonus:r.withdrawalBonus,offenseBonus:r.offenseBonus,defenseBonus:r.defenseBonus};if(!d)return y;for(const b of d.applied){if(b.scope!=="FORCE"||b.platoonId!==f)continue;const v=Ci[b.defId];v&&v.effects.forEach(m=>$g(y,m))}return y},ml=[{id:"belgium",name:"Belgium",defaultFaction:"allies",homelandTerritories:["WE-07"]},{id:"bulgaria",name:"Bulgaria",defaultFaction:"axis",homelandTerritories:["EE-14"]},{id:"finland",name:"Finland",defaultFaction:"axis",homelandTerritories:["EE-01"]},{id:"france",name:"France",defaultFaction:"allies",homelandTerritories:["WE-04","WE-05","WE-06"]},{id:"germany",name:"Germany",defaultFaction:"axis",homelandTerritories:["WE-08","WE-09"]},{id:"great_britain",name:"Great Britain",defaultFaction:"allies",homelandTerritories:["WE-01","WE-02"]},{id:"greece",name:"Greece",defaultFaction:"allies",homelandTerritories:["EE-15"]},{id:"hungary",name:"Hungary",defaultFaction:"axis",homelandTerritories:["EE-15"]},{id:"imperial_japan",name:"Imperial Japan",defaultFaction:"axis",homelandTerritories:["PA-01","PA-02"]},{id:"italy",name:"Italy",defaultFaction:"axis",homelandTerritories:["WE-10","WE-11"]},{id:"norway",name:"Norway",defaultFaction:"allies",homelandTerritories:["WE-15"]},{id:"partisans",name:"Partisans",defaultFaction:"allies",homelandTerritories:["EE-15","WE-06","EE-09"]},{id:"poland",name:"Poland",defaultFaction:"allies",homelandTerritories:["EE-07","EE-08"]},{id:"polish_peoples_army",name:"Polish Peoples Army",defaultFaction:"ussr",homelandTerritories:["EE-07","EE-08"]},{id:"romania",name:"Romania",defaultFaction:"axis",homelandTerritories:["EE-14"]},{id:"soviet_union",name:"Soviet Union",defaultFaction:"ussr",homelandTerritories:["EE-05"]},{id:"the_netherlands",name:"The Netherlands",defaultFaction:"allies",homelandTerritories:["WE-07"]},{id:"us",name:"United States",defaultFaction:"allies",homelandTerritories:["NA-15"]}],Lt=Object.fromEntries(ml.map(o=>[o.id,o])),Pg=()=>Math.random().toString(16).slice(2)+Date.now().toString(16);function em(o){return o==="FRESH"?"WORN":o==="WORN"?"DEPLETED":"SHATTERED"}function Ac(o){return Array.from(new Set(o))}function qy(o=[],f=[]){return Ac([...o,...f])}function Yy(o){const f={...o.platoonsById},u={...o.ownerByTerritory},r={...o.locksByTerritory},d={...o.contestsByTerritory},y=[],b=o.orders.filter(m=>m.type==="MOVE"&&m.submittedAt);b.sort((m,g)=>(m.faction+m.platoonId).localeCompare(g.faction+g.platoonId));for(const m of b){const g=f[m.platoonId];if(!g)continue;if(r[g.territoryId]){y.push(`MOVE blocked: ${g.name} is in locked territory ${g.territoryId}`);continue}const E=m.path??[];if(E.length===0)continue;let x=g.territoryId,L=!0;for(const V of E){if(r[V]){L=!1;break}if(!o.isAdjacent(x,V)){L=!1;break}x=V}if(!L){y.push(`MOVE invalid: ${g.name} path rejected`);continue}const Z=(o.getPlatoonModifiers?.(g.id)??null)?.movementBonus??0,R=(g.mpBase??1)+Z,Q=m.forcedMarch?R+1:R;if(E.length>Q){y.push(`MOVE too far: ${g.name} wanted ${E.length} steps (allowed ${Q})`);continue}const B=E[E.length-1];if(m.forcedMarch&&E.length>=2){const V=em(g.condition),z=Math.max(0,(g.strengthPct??0)-10);f[g.id]={...g,condition:V,strengthPct:z},y.push(`FORCED MARCH: ${g.name} now ${V} (${z}%)`)}f[g.id]={...f[g.id],territoryId:B},y.push(`MOVE: ${g.name} -> ${B}`)}const v={};for(const m of Object.values(f)){const g=m.territoryId,E=m.nation;v[g]||(v[g]={factions:new Set,byFaction:{}}),v[g].factions.add(E),v[g].byFaction[E]=v[g].byFaction[E]??[],v[g].byFaction[E].push(m.id)}for(const[m,g]of Object.entries(v)){const E=Array.from(g.factions);if(!r[m]){if(E.length>=2){E.length>2&&y.push(`WARNING: Multi-faction conflict in ${m} (${E.join(", ")}). Using first two for MVP.`);const x=E[0],L=E[1],D=u[m];let Z=L,R=x;if(D&&D!=="neutral"&&D!=="contested"){const z=D;(z===x||z===L)&&(Z=z,R=z===x?L:x)}const Q=g.byFaction[R]??[],B=g.byFaction[Z]??[],V=d[m];if(V&&V.status==="BATTLE_PENDING")d[m]={...V,attackerPlatoonIds:qy(V.attackerPlatoonIds,Q),defenderPlatoonIds:qy(V.defenderPlatoonIds,B)},u[m]="contested",r[m]={territoryId:m,reason:"COMBAT",contestId:V.id},y.push(`COMBAT UPDATED: ${m} merged arrivals into existing contest`);else{const z=Pg();d[m]={id:z,territoryId:m,attackerFaction:R,defenderFaction:Z,attackerPlatoonIds:Ac(Q),defenderPlatoonIds:Ac(B),createdTurn:o.turn,status:"BATTLE_PENDING"},r[m]={territoryId:m,reason:"COMBAT",contestId:z},u[m]="contested",y.push(`COMBAT: ${R} vs ${Z} in ${m} (locked)`)}continue}if(E.length===1){const x=E[0],L=u[m]??"neutral";if(L==="neutral"&&(u[m]=x,y.push(`CAPTURE: ${x} takes ${m} (was neutral)`)),L==="contested"){const D=d[m];(!D||D.status!=="BATTLE_PENDING")&&(u[m]=x,y.push(`CONTEST CLEARED: ${m} now controlled by ${x}`))}}}}return{nextPlatoons:f,nextOwners:u,nextLocks:r,nextContests:d,log:y}}function tm(o){return o==="FRESH"?"WORN":o==="WORN"?"DEPLETED":"SHATTERED"}function nm(o,f){let u=o;for(let r=0;r<f;r++)u=tm(u);return u}function ky(o,f,u){const r=Math.max(0,Math.min(100,o.strengthPct-f)),d=nm(o.condition,u);return{...o,strengthPct:r,condition:d}}function lm(o){const f={...o.platoonsById},u={...o.ownerByTerritory},r={...o.locksByTerritory},d={...o.contestsByTerritory},y=[],b=new Map(o.outcomes.map(v=>[v.contestId,v]));for(const[v,m]of Object.entries(d)){if(!m||m.status!=="BATTLE_PENDING")continue;const g=b.get(m.id);if(!g)continue;const E=g.attackerLossPct??0,x=g.defenderLossPct??0,L=g.attackerConditionHit??0,D=g.defenderConditionHit??0;for(const z of m.attackerPlatoonIds){const C=f[z];C&&(f[z]=ky(C,E,L))}for(const z of m.defenderPlatoonIds){const C=f[z];C&&(f[z]=ky(C,x,D))}const Z=g.winner===m.attackerFaction?m.defenderFaction:m.attackerFaction,R=(o.adjacencyByTerritory[v]??[]).filter(z=>!r[z]),B=R.filter(z=>{const C=u[z];return C===Z||C==="neutral"||C==null})[0]??R[0],V=z=>(z.strengthPct??0)>0;if(B){const z=g.winner===m.attackerFaction?m.defenderPlatoonIds:m.attackerPlatoonIds;for(const C of z){const ae=f[C];ae&&V(ae)&&(f[C]={...ae,territoryId:B})}z.length&&y.push(`RETREAT: ${Z} platoons fallback from ${v} to ${B}`)}else y.push(`RETREAT BLOCKED: No adjacent fallback from ${v} for ${Z}`);u[v]=g.winner,r[v]&&delete r[v],d[v]={...m,status:"RESOLVED"},y.push(`BATTLE RESOLVED: ${v} winner=${g.winner} (A -${E}% hit${L}, D -${x}% hit${D})`)}return{nextPlatoons:f,nextOwners:u,nextLocks:r,nextContests:d,log:y}}const Kt=()=>Math.random().toString(16).slice(2)+Date.now().toString(16);function ft(o,f="NOTE"){return{ts:Date.now(),type:f,text:o,id:Kt()}}const Il=()=>({progressTurns:0,completedResearch:[]}),Ai=()=>({activeStanceId:_c[0]?.id??"DOC_MOBILE_WARFARE",equippedTraitIds:[],traitSlots:3}),Ks=()=>({applied:[]}),Vy=o=>o==="allies"||o==="axis"||o==="ussr";function Xy(o,f){if(o.startsWith("custom:")){const r=f.find(d=>d.id===o)?.defaultFaction??"allies";return Vy(r)?r:"allies"}const u=Lt[o]?.defaultFaction??"allies";return Vy(u)?u:"allies"}function im(o,f,u){const r=On[o];return!r||f.includes(o)||u&&u!==o?!1:r.prerequisites.every(d=>f.includes(d))}function Sc(o){return o==="SETUP"||o==="ORDERS"}function Fy(o,f){return f?.length?f.every(u=>o.completedResearch.includes(u)):!0}function ch(o,f){const u=o.nationResearchState[f]??Il(),r=Xy(f,o.customNations),d=u.activeResearchId?On[u.activeResearchId]:null,y=new Set;for(const[L,D]of Object.entries(o.nationResearchState)){if(L===f||!D.activeResearchId||Xy(L,o.customNations)!==r)continue;const R=On[D.activeResearchId];R&&y.add(R.tree)}const b=Object.values(o.platoonsById).filter(L=>L.nation===f).length,v=o.suppliesByNation?.[f]??0,m=b===0?0:Math.max(0,(b-v)/b),g=Object.keys(o.territoryNameById),E=g.filter(L=>{const D=o.intelByTerritory[L]?.[f];return D&&D!=="NONE"}).length,x=g.length===0?0:E/g.length;return Ws.filter(L=>im(L.id,u.completedResearch,d?.id)).map(L=>{let D=0;const Z=[];return L.tree==="LOGISTICS"&&m>.25&&(D+=3,Z.push("More than 25% of forces are unsupplied.")),L.tree==="INTELLIGENCE"&&x<.5&&(D+=3,Z.push("Intel coverage is below 50%.")),y.has(L.tree)&&(D-=2,Z.push("Allied nation is already researching this tree.")),{nodeId:L.id,score:D,reasons:Z}}).filter(L=>L.score!==0).sort((L,D)=>D.score-L.score)}function Qy(o){const f={...o},u=[];for(const[r,d]of Object.entries(o)){if(!d.activeResearchId)continue;const y=On[d.activeResearchId];if(!y)continue;const b=d.progressTurns+1;if(b>=y.timeTurns){const v=Array.from(new Set([...d.completedResearch,y.id]));f[r]={progressTurns:0,completedResearch:v},u.push(ft(`Research complete: ${r} finished ${y.name}.`))}else f[r]={...d,progressTurns:b}}return{nextResearch:f,logs:u}}function bn(o){return o.viewerMode==="GM"}function Zt(o,f){return bn(o)||o.viewerNation===f}function am(o,f){const u=vc.indexOf(o??"NONE"),r=vc.indexOf(f);return vc[Math.max(u,r)]??f}function Zy(o){const f={...o.intelByTerritory},u=[],r=o.orders.filter(d=>d.type==="RECON"&&d.submittedAt);for(const d of r){const y=o.platoonsById[d.platoonId];if(!y)continue;const b=y.territoryId,m=y.traits?.includes("RECON")?2:1,g=(d.reconTargets??[]).slice(0,m);if(!g.length)continue;const E=g.filter(x=>o.isAdjacent(b,x));if(E.length){for(const x of E){const L=f[x]??{};f[x]={...L,[y.nation]:am(L[y.nation],"SCOUTED")}}u.push(`RECON: ${y.name} scouted ${E.join(", ")}.`)}}return{nextIntel:f,log:u}}const Ky={mode:"SETUP",playMode:"ONE_SCREEN",commandHubExpanded:!1,leftPanelView:"NONE",activeTheatres:{WE:!0,EE:!0,NA:!0,PA:!0},baseEnabled:{allies:!0,axis:!0,ussr:!0},nationsEnabled:{belgium:!1,bulgaria:!1,finland:!1,france:!1,germany:!1,great_britain:!1,greece:!1,hungary:!1,imperial_japan:!1,italy:!1,norway:!1,partisans:!1,poland:!1,polish_peoples_army:!1,romania:!1,soviet_union:!1,the_netherlands:!1,us:!1},customNations:[],selectedSetupNation:null,homelandsByNation:{},customs:[],factions:[{id:"allies",name:"Allies",nations:Object.values(Lt).filter(o=>o.defaultFaction==="allies").map(o=>o.id)},{id:"axis",name:"Axis",nations:Object.values(Lt).filter(o=>o.defaultFaction==="axis").map(o=>o.id)},{id:"ussr",name:"USSR",nations:Object.values(Lt).filter(o=>o.defaultFaction==="ussr").map(o=>o.id)}],selectedSetupFaction:null,selectedCustomId:null,regions:[],selectedRegionId:null,viewerNation:"great_britain",viewerFaction:"allies",playerFactionId:null,viewerMode:"GM",homelands:{},homelandUnlock:!1,ownerByTerritory:{},intelByTerritory:{},territoryNameById:{},selectedTerritoryId:null,selectedPlatoonId:null,orderDraftType:null,turnLog:[],phase:"SETUP",turnNumber:1,platoonsById:{},ordersByTurn:{},locksByTerritory:{},contestsByTerritory:{},adjacencyByTerritory:{},suppliesByNation:Object.fromEntries(Object.values(Lt).map(o=>[o.id,100])),resourcePointsByNation:Object.fromEntries(Object.values(Lt).map(o=>[o.id,15])),nationResearchState:Object.fromEntries(Object.values(Lt).map(o=>[o.id,Il()])),nationDoctrineState:Object.fromEntries(Object.values(Lt).map(o=>[o.id,Ai()])),doctrinePenaltyByNation:{},nationUpgradesState:Object.fromEntries(Object.values(Lt).map(o=>[o.id,Ks()]))};function xc(o,f){const u=o[f]??{},r={};for(const[d,y]of Object.entries(u))r[d]=(y??[]).filter(b=>!b.submittedAt);return{...o,[f]:r}}const j=kg()(Fg((o,f)=>({...Ky,setMode:u=>o({mode:u}),setPlayMode:u=>o({playMode:u}),setCommandHubExpanded:u=>o({commandHubExpanded:u}),setLeftPanelView:u=>o({leftPanelView:u}),toggleTheatre:u=>o(r=>({activeTheatres:{...r.activeTheatres,[u]:!r.activeTheatres[u]}})),setViewerMode:u=>o({viewerMode:u}),selectSetupNation:u=>o({selectedSetupNation:u}),setNationHomeland:(u,r)=>o(d=>({homelandsByNation:{...d.homelandsByNation,[u]:r}})),selectSetupFaction:u=>o(r=>({selectedSetupFaction:u,selectedCustomId:u==="custom"?r.selectedCustomId:null})),createCustomFaction:(u,r)=>{const d=Kt(),y=`custom:${d}`,b={id:d,name:(u||"Custom Faction").trim(),color:r};o(v=>({customs:[...v.customs,b],factions:[...v.factions,{id:y,name:b.name,color:r,nations:[]}],selectedSetupFaction:"custom",selectedCustomId:d}))},createCustomNation:(u,r,d)=>{const y=`custom:${Kt()}`,b={id:y,name:(u||"Custom Nation").trim(),defaultFaction:r,color:d};o(v=>({customNations:[...v.customNations,b],nationsEnabled:{...v.nationsEnabled,[y]:!0},selectedSetupNation:y,viewerNation:y,viewerFaction:r,nationResearchState:{...v.nationResearchState,[y]:Il()},nationDoctrineState:{...v.nationDoctrineState,[y]:Ai()},nationUpgradesState:{...v.nationUpgradesState,[y]:Ks()},resourcePointsByNation:{...v.resourcePointsByNation,[y]:15},factions:v.factions.map(m=>m.id===r?{...m,nations:Array.from(new Set([...m.nations,y]))}:m)}))},selectCustomFaction:u=>o({selectedSetupFaction:"custom",selectedCustomId:u}),setViewerNation:u=>o(r=>{const d=(r.viewerNation.startsWith("custom:")?r.customNations.find(v=>v.id===r.viewerNation)?.defaultFaction:Lt[r.viewerNation]?.defaultFaction)??"allies",y=(u.startsWith("custom:")?r.customNations.find(v=>v.id===u)?.defaultFaction:Lt[u]?.defaultFaction)??"allies",b=r.viewerFaction===d;return{viewerNation:u,viewerFaction:b?y:r.viewerFaction,selectedTerritoryId:null}}),setViewerFaction:u=>o({viewerFaction:u}),setPlayerFactionId:u=>o({playerFactionId:u}),setSelectedTerritory:u=>o({selectedTerritoryId:u}),setSelectedPlatoonId:u=>o({selectedPlatoonId:u}),setOrderDraftType:u=>o({orderDraftType:u}),setHomelandUnlock:u=>o({homelandUnlock:u}),setRegions:u=>o({regions:u}),setSelectedRegion:u=>o({selectedRegionId:u}),setHomeland:(u,r)=>o(d=>({homelands:{...d.homelands,[u]:r}})),applyHomeland:u=>o(r=>{const d=r.homelandsByNation[u];if(!d)return r;const y=new Set;for(const v of r.regions)for(const m of v.territories)y.add(m);const b={...r.intelByTerritory};for(const v of y){const m=b[v]??{};b[v]={...m,[u]:"NONE"}}{const v=b[d]??{};b[d]={...v,[u]:"FULL"}}return{viewerNation:u,ownerByTerritory:{...r.ownerByTerritory,[d]:u},intelByTerritory:b}}),setOwner:(u,r)=>o(d=>bn(d)?{ownerByTerritory:{...d.ownerByTerritory,[u]:r}}:d),setIntelLevel:(u,r,d)=>o(y=>{if(!bn(y))return y;const b=y.intelByTerritory[u]||{};return{intelByTerritory:{...y.intelByTerritory,[u]:{...b,[r]:d}}}}),bulkSetIntelLevel:(u,r,d)=>o(y=>{if(!bn(y))return y;const b={...y.intelByTerritory};for(const v of u){const m=b[v]||{};b[v]={...m,[r]:d}}return{intelByTerritory:b}}),addNote:u=>o(r=>({turnLog:[ft(u),...r.turnLog]})),resetAll:()=>o({...Ky}),autoSetupWorld:()=>o(u=>{if(!bn(u))return u;const r=Object.entries(u.nationsEnabled).filter(([,v])=>v).map(([v])=>v),d=new Set;for(const v of u.regions)for(const m of v.territories)d.add(m);const y={},b={...u.ownerByTerritory};for(const v of d)y[v]={};for(const v of r){for(const g of d)y[g][v]="NONE";const m=u.homelandsByNation[v];m&&(b[m]=v,y[m][v]="FULL")}return{mode:"PLAY",ownerByTerritory:b,intelByTerritory:y,phase:"ORDERS",turnNumber:1,turnLog:[ft("Auto-setup world: PLAY started"),...u.turnLog]}}),createPlatoon:(u,r,d)=>o(y=>{if(!Zt(y,y.viewerNation))return y;const b=Kt(),v={id:b,faction:u,nation:y.viewerNation,name:d?.trim()||`Platoon ${b.slice(0,4)}`,territoryId:r,condition:"FRESH",strengthPct:100,mpBase:1};return{platoonsById:{...y.platoonsById,[b]:v},turnLog:[ft(`Created platoon for ${u} at ${r}`),...y.turnLog]}}),createPlatoonWithLoadout:(u,r,d)=>o(y=>{if(!Zt(y,y.viewerNation))return y;const b=Kt(),v={id:b,faction:u,nation:y.viewerNation,name:d.name?.trim()||`Platoon ${b.slice(0,4)}`,territoryId:r,condition:d.condition??"FRESH",strengthPct:d.strengthPct??100,mpBase:d.mpBase??1,traits:d.traits??[]};return{platoonsById:{...y.platoonsById,[b]:v},turnLog:[ft(`Created platoon for ${u} at ${r} (loadout)`),...y.turnLog]}}),setPlatoonOrderMove:(u,r,d,y,b)=>o(v=>{const m=v.platoonsById[d];if(!m||!Zt(v,m.nation))return v;const g=m.faction,E={...v.ordersByTurn[u]??{}},x=[...E[g]??[]],L=m.territoryId,D=x.findIndex(R=>R.platoonId===d),Z={id:D>=0?x[D].id:Kt(),turn:u,faction:g,platoonId:d,type:"MOVE",from:L,path:y,forcedMarch:!!b,submittedAt:x[D]?.submittedAt};return D>=0?x[D]=Z:x.push(Z),E[g]=x,{ordersByTurn:{...v.ordersByTurn,[u]:E}}}),setPlatoonOrderHold:(u,r,d)=>o(y=>{const b=y.platoonsById[d];if(!b||!Zt(y,b.nation))return y;const v=b.faction,m={...y.ordersByTurn[u]??{}},g=[...m[v]??[]],E=g.findIndex(L=>L.platoonId===d),x={id:E>=0?g[E].id:Kt(),turn:u,faction:v,platoonId:d,type:"HOLD",from:b.territoryId,submittedAt:g[E]?.submittedAt};return E>=0?g[E]=x:g.push(x),m[v]=g,{ordersByTurn:{...y.ordersByTurn,[u]:m}}}),setPlatoonOrderRecon:(u,r,d,y)=>o(b=>{const v=b.platoonsById[d];if(!v||!Zt(b,v.nation))return b;const m=v.faction,g={...b.ordersByTurn[u]??{}},E=[...g[m]??[]],x=E.findIndex(R=>R.platoonId===d),L=v.traits?.includes("RECON")?2:1,D=Array.from(new Set(y.map(R=>R.trim()).filter(Boolean))).slice(0,L),Z={id:x>=0?E[x].id:Kt(),turn:u,faction:m,platoonId:d,type:"RECON",from:v.territoryId,reconTargets:D,submittedAt:E[x]?.submittedAt};return x>=0?E[x]=Z:E.push(Z),g[m]=E,{ordersByTurn:{...b.ordersByTurn,[u]:g}}}),setPlatoonOrderIntel:(u,r,d,y)=>o(b=>{const v=b.platoonsById[d];if(!v||!Zt(b,v.nation))return b;const m=v.faction,g={...b.ordersByTurn[u]??{}},E=[...g[m]??[]],x=E.findIndex(Z=>Z.platoonId===d),L=[y.trim()].filter(Boolean),D={id:x>=0?E[x].id:Kt(),turn:u,faction:m,platoonId:d,type:"INTEL",from:v.territoryId,reconTargets:L,submittedAt:E[x]?.submittedAt};return x>=0?E[x]=D:E.push(D),g[m]=E,{ordersByTurn:{...b.ordersByTurn,[u]:g}}}),cancelDraftOrder:(u,r)=>o(d=>{const y=d.ordersByTurn[u];if(!y)return d;let b=null,v=!1;for(const g of Object.values(y)){const E=g.find(x=>x.id===r);if(E){v=!!E.submittedAt,b=d.platoonsById[E.platoonId]?.nation??null;break}}if(!b||v||!Zt(d,b))return d;const m={};for(const[g,E]of Object.entries(y))m[g]=E.filter(x=>x.id!==r);return{ordersByTurn:{...d.ordersByTurn,[u]:m}}}),submitFactionOrders:(u,r)=>o(d=>{if(!Zt(d,r))return d;const y={...d.ordersByTurn[u]??{}},b={};for(const[v,m]of Object.entries(y))b[v]=m.map(g=>d.platoonsById[g.platoonId]?.nation!==r?g:{...g,submittedAt:Date.now()});return{ordersByTurn:{...d.ordersByTurn,[u]:b},turnLog:[ft(`Orders submitted: ${r} (Turn ${u})`,"ORDERS"),...d.turnLog]}}),resolveCurrentTurn:u=>o(r=>{if(!bn(r))return r;const d=r.ordersByTurn[r.turnNumber]??{},y=Object.values(d).flat(),{nextIntel:b,log:v}=Zy({orders:y,platoonsById:r.platoonsById,intelByTerritory:r.intelByTerritory,isAdjacent:u}),{nextPlatoons:m,nextOwners:g,nextLocks:E,nextContests:x,log:L}=Yy({turn:r.turnNumber,platoonsById:r.platoonsById,orders:y,ownerByTerritory:r.ownerByTerritory,locksByTerritory:r.locksByTerritory,contestsByTerritory:r.contestsByTerritory,isAdjacent:u,getPlatoonModifiers:D=>Jg({nationDoctrineState:r.nationDoctrineState,nationResearchState:r.nationResearchState,nationUpgradesState:r.nationUpgradesState,platoonsById:r.platoonsById},D)});return{platoonsById:m,ownerByTerritory:g,locksByTerritory:E,contestsByTerritory:x,intelByTerritory:b,ordersByTurn:xc(r.ordersByTurn,r.turnNumber),turnLog:[...v.map(D=>ft(D,"ORDERS")),...L.map(D=>ft(D)),...r.turnLog]}}),resolveBattles:u=>o(r=>{if(!bn(r))return r;const{nextPlatoons:d,nextOwners:y,nextLocks:b,nextContests:v,log:m}=lm({platoonsById:r.platoonsById,ownerByTerritory:r.ownerByTerritory,locksByTerritory:r.locksByTerritory,contestsByTerritory:r.contestsByTerritory,adjacencyByTerritory:r.adjacencyByTerritory,outcomes:u});return{platoonsById:d,ownerByTerritory:y,locksByTerritory:b,contestsByTerritory:v,turnLog:[...m.map(g=>ft(g)),...r.turnLog]}}),setAdjacencyByTerritory:u=>o({adjacencyByTerritory:u}),setTerritoryNameById:u=>o({territoryNameById:u}),setPhase:u=>o(r=>bn(r)?{phase:u}:r),nextPhase:u=>o(r=>{if(!bn(r))return r;const d=["allies","axis","ussr"],y=Math.max(0,d.indexOf(r.viewerFaction)),b=d[(y+1)%d.length];if(r.phase==="SETUP")return{phase:"ORDERS",viewerFaction:b};if(r.phase==="ORDERS")return{phase:"RESOLUTION",viewerFaction:b};if(r.phase==="RESOLUTION"){const g=r.ordersByTurn[r.turnNumber]??{},E=Object.values(g).flat(),{nextIntel:x,log:L}=Zy({orders:E,platoonsById:r.platoonsById,intelByTerritory:r.intelByTerritory,isAdjacent:u}),{nextPlatoons:D,nextOwners:Z,nextLocks:R,nextContests:Q,log:B}=Yy({turn:r.turnNumber,platoonsById:r.platoonsById,orders:E,ownerByTerritory:r.ownerByTerritory,locksByTerritory:r.locksByTerritory,contestsByTerritory:r.contestsByTerritory,isAdjacent:u}),V=Object.values(Q).filter(ae=>ae?.status==="BATTLE_PENDING"),z=Object.values(Q).filter(Boolean).length,C=Object.values(R).filter(Boolean).length;if(V.length===0){const ae=d[(y+2)%d.length],{nextResearch:Ae,logs:G}=Qy(r.nationResearchState);return{phase:"ORDERS",turnNumber:r.turnNumber+1,viewerFaction:ae,platoonsById:D,ownerByTerritory:Z,locksByTerritory:R,contestsByTerritory:Q,intelByTerritory:x,nationResearchState:Ae,ordersByTurn:xc(r.ordersByTurn,r.turnNumber),turnLog:[ft(`Skipped Battles phase (no pending contests; ${z} contests, ${C} locks).`,"BATTLE"),...G,...L.map(ve=>ft(ve,"ORDERS")),...B.map(ve=>ft(ve)),...r.turnLog]}}return{phase:"BATTLES",viewerFaction:b,platoonsById:D,ownerByTerritory:Z,locksByTerritory:R,contestsByTerritory:Q,intelByTerritory:x,ordersByTurn:xc(r.ordersByTurn,r.turnNumber),turnLog:[...L.map(ae=>ft(ae,"ORDERS")),...B.map(ae=>ft(ae)),...r.turnLog]}}const{nextResearch:v,logs:m}=Qy(r.nationResearchState);return{phase:"ORDERS",turnNumber:r.turnNumber+1,viewerFaction:b,nationResearchState:v,turnLog:[...m,...r.turnLog]}}),ensureSupplies:()=>{const u=f(),r={...u.suppliesByNation??{}};for(const d of Object.values(Lt))r[d.id]==null&&(r[d.id]=100);for(const d of u.customNations??[])r[d.id]==null&&(r[d.id]=100);o({suppliesByNation:r})},getSupplies:u=>(f().suppliesByNation?.[u]??0)|0,spendSupplies:(u,r,d)=>{const y=f(),b=y.suppliesByNation?.[u]??0,v=Math.max(0,Math.floor(r));if(b<v)return!1;const m=b-v;return o({suppliesByNation:{...y.suppliesByNation,[u]:m}}),Array.isArray(y.turnLog)&&v>0&&o({turnLog:[{ts:Date.now(),type:"SUPPLY",text:`${u} spent ${v} supplies${d?` (${d})`:""} (now ${m})`,id:Kt()},...y.turnLog]}),!0},addSupplies:(u,r,d)=>{const y=f(),b=Math.max(0,Math.floor(r)),m=(y.suppliesByNation?.[u]??0)+b;o({suppliesByNation:{...y.suppliesByNation,[u]:m}}),Array.isArray(y.turnLog)&&b>0&&o({turnLog:[{ts:Date.now(),type:"SUPPLY",text:`${u} gained ${b} supplies${d?` (${d})`:""} (now ${m})`,id:Kt()},...y.turnLog]})},ensureResourcePoints:()=>{const u=f(),r={...u.resourcePointsByNation??{}};for(const d of Object.values(Lt))r[d.id]==null&&(r[d.id]=15);for(const d of u.customNations??[])r[d.id]==null&&(r[d.id]=15);o({resourcePointsByNation:r})},getResourcePoints:u=>(f().resourcePointsByNation?.[u]??0)|0,spendResourcePoints:(u,r,d)=>{const y=f(),b=y.resourcePointsByNation?.[u]??0,v=Math.max(0,Math.floor(r));if(b<v)return!1;const m=b-v;return o({resourcePointsByNation:{...y.resourcePointsByNation,[u]:m}}),Array.isArray(y.turnLog)&&v>0&&o({turnLog:[{ts:Date.now(),type:"SUPPLY",text:`${u} spent ${v} resource points${d?` (${d})`:""} (now ${m})`,id:Kt()},...y.turnLog]}),!0},addResourcePoints:(u,r,d)=>{const y=f(),b=Math.max(0,Math.floor(r)),m=(y.resourcePointsByNation?.[u]??0)+b;o({resourcePointsByNation:{...y.resourcePointsByNation,[u]:m}}),Array.isArray(y.turnLog)&&b>0&&o({turnLog:[{ts:Date.now(),type:"SUPPLY",text:`${u} gained ${b} resource points${d?` (${d})`:""} (now ${m})`,id:Kt()},...y.turnLog]})},startResearch:(u,r)=>o(d=>{if(!Zt(d,u))return d;const y=On[r];if(!y)return d;const b=d.nationResearchState[u]??Il();return b.activeResearchId||b.completedResearch.includes(r)||!y.prerequisites.every(m=>b.completedResearch.includes(m))?d:{nationResearchState:{...d.nationResearchState,[u]:{activeResearchId:r,startedTurn:d.turnNumber,progressTurns:0,completedResearch:b.completedResearch}},turnLog:[ft(`Research started: ${u} began ${y.name}.`),...d.turnLog]}}),cancelResearch:u=>o(r=>{if(!Zt(r,u))return r;const d=r.nationResearchState[u];if(!d?.activeResearchId)return r;const y=On[d.activeResearchId];return!y||y.tier>=2&&d.progressTurns>=1?r:{nationResearchState:{...r.nationResearchState,[u]:{progressTurns:0,completedResearch:d.completedResearch}},turnLog:[ft(`Research cancelled: ${u} halted ${y.name}.`),...r.turnLog]}}),getResearchRecommendations:u=>ch(f(),u),switchDoctrineStance:(u,r)=>o(d=>{if(!Zt(d,u)||!Sc(d.phase))return d;const y=$s[r];if(!y)return d;const b=d.nationDoctrineState[u]??Ai();if(b.activeStanceId===r||b.stanceLockedUntilTurn&&d.turnNumber<b.stanceLockedUntilTurn)return d;const v=d.nationResearchState[u]??Il();if(!Fy(v,y.requiredResearch))return d;const m={...b,activeStanceId:r,stanceLockedUntilTurn:d.turnNumber+y.switchCooldownTurns},g=y.switchPenalty?{penalty:y.switchPenalty,appliedTurn:d.turnNumber}:void 0;return{nationDoctrineState:{...d.nationDoctrineState,[u]:m},doctrinePenaltyByNation:g?{...d.doctrinePenaltyByNation,[u]:g}:d.doctrinePenaltyByNation,turnLog:[ft(`Doctrine switched: ${u}  ${y.name}.`),...y.switchPenalty?[ft(`Doctrine penalty applied: ${u} ${y.switchPenalty.type} (${y.switchPenalty.value}).`)]:[],...d.turnLog]}}),equipDoctrineTrait:(u,r)=>o(d=>{if(!Zt(d,u)||!Sc(d.phase))return d;const y=Zs[r];if(!y)return d;const b=d.nationDoctrineState[u]??Ai();if(b.equippedTraitIds.includes(r))return d;const v=d.nationResearchState[u]??Il();return!Fy(v,y.requiredResearch)||y.prerequisitesTraits?.some(g=>!b.equippedTraitIds.includes(g))||b.equippedTraitIds.reduce((g,E)=>g+(Zs[E]?.slotCost??0),0)+y.slotCost>b.traitSlots?d:{nationDoctrineState:{...d.nationDoctrineState,[u]:{...b,equippedTraitIds:[...b.equippedTraitIds,r]}},turnLog:[ft(`Doctrine trait equipped: ${u}  ${y.name}.`),...d.turnLog]}}),unequipDoctrineTrait:(u,r)=>o(d=>{if(!Zt(d,u)||!Sc(d.phase))return d;const y=d.nationDoctrineState[u]??Ai();if(!y.equippedTraitIds.includes(r))return d;const b=Zs[r]?.name??r;return{nationDoctrineState:{...d.nationDoctrineState,[u]:{...y,equippedTraitIds:y.equippedTraitIds.filter(v=>v!==r)}},turnLog:[ft(`Doctrine trait unequipped: ${u}  ${b}.`),...d.turnLog]}}),applyUpgrade:({nation:u,upgradeId:r,territoryId:d,platoonId:y})=>o(b=>{if(!Zt(b,u))return b;const v=Ci[r];if(!v)return b;const m=b.nationUpgradesState[u]??Ks(),g=b.nationResearchState[u]??Il(),E=b.nationDoctrineState[u]??Ai(),x=b.resourcePointsByNation?.[u]??0;if(!oh({upgrade:v,doctrineState:E,researchState:g,upgradesState:m,resourcePoints:x,territoryId:d,platoonId:y}).eligible)return b;const D=Kt(),Z=v.scope==="NATION"?{id:D,defId:v.id,scope:"NATION"}:v.scope==="TERRITORY"&&d?{id:D,defId:v.id,scope:"TERRITORY",territoryId:d}:v.scope==="FORCE"&&y?{id:D,defId:v.id,scope:"FORCE",platoonId:y}:null;if(!Z)return b;const R=x-v.cost.points;return{nationUpgradesState:{...b.nationUpgradesState,[u]:{...m,applied:[...m.applied,Z]}},resourcePointsByNation:{...b.resourcePointsByNation,[u]:R},turnLog:[ft(`Upgrade applied: ${u}  ${v.name} (-${v.cost.points} RP).`),...b.turnLog]}}),removeUpgrade:(u,r)=>o(d=>{if(!bn(d))return d;const y=d.nationUpgradesState[u]??Ks();return y.applied.some(b=>b.id===r)?{nationUpgradesState:{...d.nationUpgradesState,[u]:{...y,applied:y.applied.filter(b=>b.id!==r)}},turnLog:[ft(`Upgrade removed (admin): ${u}  ${r}.`),...d.turnLog]}:d}),clearLocksAndContests:()=>o(u=>bn(u)?{locksByTerritory:{},contestsByTerritory:{},ownerByTerritory:Object.fromEntries(Object.entries(u.ownerByTerritory).map(([r,d])=>[r,d==="contested"?"neutral":d])),turnLog:[ft("Cleared locks/contests (dev helper)"),...u.turnLog]}:u)}),{name:"war_campaign_zustand_v2"}));function Vs(o){const f=j.getState();return o.startsWith("custom:")?f.customNations.find(r=>r.id===o)?.defaultFaction??"neutral":ml.find(r=>r.id===o)?.defaultFaction??"neutral"}function sm(o,f){return o.startsWith("WE-")&&f.WE||o.startsWith("EE-")&&f.EE||o.startsWith("NA-")&&f.NA||o.startsWith("PA-")&&f.PA}function om(o){const f=j.getState();return f.selectedSetupNation?!f.homelandUnlock&&!sm(o,f.activeTheatres)?{ok:!1,reason:"That theatre isnt enabled."}:Object.entries(f.homelandsByNation).find(([,r])=>r===o)?{ok:!1,reason:"That territory is already a homeland."}:{ok:!0}:{ok:!1,reason:"Pick a nation first."}}const uh=o=>`/War-Campaign-System/${o}`.replace(/\/{2,}/g,"/");async function zc(o=uh("theatres_all.json")){const f=await fetch(o,{cache:"no-store"});if(!f.ok)throw new Error(`Failed to load theatres_all.json (${f.status})`);const u=await f.json(),r=[],d=new Map,y=new Map,b=new Map;for(const g of u.theatres){const E=[];for(const x of g.territories){const L={id:x.id,name:x.name,theatreId:g.theatreId,theatreTitle:g.title,shapeRefs:x.shapeRefs??[],adj:Object.values(g.adjacency?.[x.id]??{land:[],sea:[]}).flat()};r.push(L),d.set(L.id,L),E.push(L.id);for(const D of L.shapeRefs)y.set(D,L.id)}b.set(g.theatreId,E)}const v=u.regions??[],m=new Map;for(const g of v)m.set(g.id,g);return{raw:u,territories:r,territoryById:d,shapeToTerritoryId:y,theatreToTerritories:b,territoryGroups:v,territoryGroupById:m}}function rm(o,f=[]){const u=new Set;for(const r of ml)o[r.id]&&u.add(r.defaultFaction);for(const r of f)o[r.id]&&u.add(r.defaultFaction);return Array.from(u.values())}function Gt(o,f){if(o==="allies")return"Allies";if(o==="axis")return"Axis";if(o==="ussr")return"USSR";if(o==="neutral")return"Unaligned";if(o.startsWith("custom:")){const u=o.slice(7);return f.find(r=>r.id===u)?.name??"Custom"}return o}const cm=o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Nn=(o,f)=>{if(!o)return"";const u=f[o];return u?`${o} - ${u}`:o},Wy=(o,f)=>o.map(u=>Nn(u,f)).join(", "),dh=(o,f)=>{if(!o)return o;let u=o;for(const[r,d]of Object.entries(f)){if(!d)continue;const y=`${r} - ${d}`;u=u.replace(new RegExp(`\\b${cm(r)}\\b`,"g"),y)}return u};function Tc({title:o,open:f,onToggle:u,status:r,subtitle:d}){const y=r==="DONE"?{text:"DONE",bg:"rgba(34,197,94,.15)",border:"rgba(34,197,94,.35)"}:r==="LOCKED"?{text:"LOCKED",bg:"rgba(239,68,68,.15)",border:"rgba(239,68,68,.35)"}:{text:"TODO",bg:"rgba(148,163,184,.12)",border:"rgba(148,163,184,.25)"};return a.jsxs("button",{type:"button",onClick:u,style:{width:"100%",textAlign:"left",display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,padding:"10px 10px",borderRadius:10,border:"1px solid rgba(255,255,255,.12)",background:"rgba(0,0,0,.12)",cursor:"pointer"},children:[a.jsxs("div",{style:{display:"grid",gap:2},children:[a.jsx("div",{style:{fontWeight:800},children:o}),d&&a.jsx("div",{style:{fontSize:12,opacity:.75},children:d})]}),a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("span",{style:{fontSize:11,padding:"3px 8px",borderRadius:999,background:y.bg,border:`1px solid ${y.border}`,opacity:.95},children:y.text}),a.jsx("span",{style:{fontSize:14,opacity:.8},children:f?"":""})]})]})}function um(){const{mode:o,setMode:f,playMode:u,setPlayMode:r,toggleTheatre:d,activeTheatres:y,resetAll:b,viewerMode:v,autoSetupWorld:m,selectedSetupNation:g,selectSetupNation:E,homelandsByNation:x,setNationHomeland:L,setViewerNation:D,setHomeland:Z,setSelectedTerritory:R,selectedTerritoryId:Q,customNations:B,createCustomNation:V,customs:z,createCustomFaction:C,homelandUnlock:ae,setHomelandUnlock:Ae}=j(),G=v==="GM",ve=o==="PLAY",be=G&&!ve,we=j(k=>k.nationsEnabled),Oe=Y.useMemo(()=>Object.values(y).some(Boolean),[y]),ue=Y.useMemo(()=>Object.entries(we).filter(([,k])=>k).map(([k])=>k),[we]),Ue=Y.useMemo(()=>[...ml.map(k=>({...k,id:k.id})),...B.map(k=>({...k,id:k.id}))],[B]),Pe=ue.length,Xe=Y.useMemo(()=>Object.keys(x).length,[x]),M=Oe,J=ue.length>0,ie=Xe>0,de=`${Xe}/${Pe||0}`,Ee=Y.useMemo(()=>["WE","EE","NA","PA"].filter(k=>y[k]),[y]),p=Y.useCallback(k=>k?B.find(rt=>rt.id===k)?.name??ml.find(rt=>rt.id===k)?.name??k:"",[B]),N=Y.useMemo(()=>ue.filter(k=>!x[k]),[ue,x]),$=Y.useMemo(()=>N.map(k=>p(k)).join(", "),[N,p]),P=Y.useMemo(()=>rm(we,B).map(rt=>Gt(rt,z)).join(", ")||"None",[we,B,z]),se=Y.useMemo(()=>ve?{s1:"LOCKED",s2:"LOCKED",s3:"LOCKED"}:{s1:M?"DONE":"TODO",s2:J?"DONE":"TODO",s3:ie?"DONE":"TODO"},[ve,M,J,ie]),re=G&&N.length===0,[Se,ze]=Y.useState(()=>ve||!M?1:J?3:2),De=Se===1,Ke=Se===2,X=Se===3,pe=()=>ze(M?J?3:2:1),We=()=>{ze(0)},[Le,mt]=Y.useState({}),[$e,vt]=Y.useState([]),[oe,yt]=Y.useState(""),H=j(k=>k.setRegions),ne=j(k=>k.setSelectedRegion),[le,te]=Y.useState(""),[ee,fe]=Y.useState(""),[Te,Ne]=Y.useState("allies"),[je,ge]=Y.useState("#22c55e"),[w,he]=Y.useState(""),[Ye,ot]=Y.useState("#8b5cf6");Y.useEffect(()=>{zc().then(k=>{const Ce={};for(const Rt of k.raw.theatres??[])for(const Rn of Rt.territories??[])Ce[Rn.id]=Rn.name;mt(Ce);const rt=k.territoryGroups??[];vt(rt),H(rt);const Nt=rt[0];if(Nt){yt(Nt.id),ne(Nt.id);const Rt=Nt.territories?.[0]??"";te(Rt),Rt&&R(Rt)}}).catch(k=>console.error("Failed to load theatres data",k))},[H,ne,R]);const ke=Y.useMemo(()=>Q?$e.find(Ce=>Ce.territories?.includes(Q))?.id??oe:oe,[$e,oe,Q]),at=Y.useMemo(()=>$e.find(k=>k.id===ke)??null,[$e,ke]),Re=Y.useMemo(()=>{const k=at?.territories??[];return k.length===0?"":Q&&k.includes(Q)?Q:k.includes(le)?le:k[0]},[at,le,Q]),Wt=!!g&&!!Re,xt=k=>{const Ce=j.getState(),rt=!Ce.nationsEnabled[k];j.setState({nationsEnabled:{...Ce.nationsEnabled,[k]:rt},selectedSetupNation:!rt&&Ce.selectedSetupNation===k?null:Ce.selectedSetupNation})};return a.jsxs("div",{style:{padding:12,border:"1px solid rgba(255,255,255,.15)",borderRadius:8},children:[a.jsx("div",{style:{display:"flex",justifyContent:"space-between",gap:8},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:800},children:"Setup"}),a.jsxs("div",{style:{fontSize:12,opacity:.8},children:["Mode: ",a.jsx("b",{children:o}),"  Viewer: ",a.jsx("b",{children:v})]})]})}),a.jsxs("div",{style:{marginTop:10,padding:10,borderRadius:10,border:"1px solid rgba(255,255,255,.12)",background:"rgba(0,0,0,.12)",display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:700},children:"Play Mode"}),a.jsx("div",{style:{fontSize:12,opacity:.75},children:"Choose how the Command Hub and GM tools are arranged during play."}),a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[a.jsx("button",{type:"button",onClick:()=>r("ONE_SCREEN"),disabled:!be,style:{fontWeight:u==="ONE_SCREEN"?800:600},children:"One Screen (shared GM/Player)"}),a.jsx("button",{type:"button",onClick:()=>r("ONE_SCREEN"),disabled:!be,style:{fontWeight:u!=="ONE_SCREEN"?800:600},children:"Multi Screen (player-only UI)"})]})]}),!G&&a.jsxs("div",{style:{marginTop:8,padding:8,borderRadius:8,border:"1px solid rgba(255,255,255,.12)",opacity:.9},children:["GM-only: setup controls are disabled in ",a.jsx("b",{children:"PLAYER"})," mode."]}),a.jsx("hr",{style:{borderColor:"rgba(255,255,255,.12)"}}),a.jsxs("div",{style:{padding:10,borderRadius:10,border:"1px solid rgba(255,255,255,.12)",background:"rgba(0,0,0,.10)",marginBottom:10,display:"grid",gap:8},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,alignItems:"center"},children:[a.jsx("div",{style:{fontWeight:800},children:"Summary"}),a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",onClick:pe,disabled:ve,children:"Resume step"}),a.jsx("button",{type:"button",onClick:We,children:"Collapse"})]})]}),a.jsxs("div",{style:{fontSize:12,lineHeight:1.6,opacity:.92},children:[a.jsxs("div",{children:[a.jsx("b",{children:"Stage 1 (Theatres):"})," ",se.s1,"  ",Ee.length?Ee.join(", "):"None"]}),a.jsxs("div",{children:[a.jsx("b",{children:"Stage 2 (Nations):"})," ",se.s2,"  Enabled: ",Pe,"  Derived factions: ",P]}),a.jsxs("div",{children:[a.jsx("b",{children:"Stage 3 (Homelands):"})," ",se.s3,"  Progress: ",de]}),g&&a.jsxs("div",{style:{marginTop:4},children:[a.jsx("b",{children:"Selected nation:"})," ",p(g),"  Aligned faction:"," ",a.jsx("b",{children:Gt(Vs(g),z)})]})]})]}),ve&&a.jsx("div",{style:{marginBottom:10,padding:8,borderRadius:8,border:"1px solid rgba(255,255,255,.12)",opacity:.9},children:"Setup is locked (PLAY). GM can unlock to edit."}),a.jsxs("div",{style:{opacity:be?1:.6,pointerEvents:be?"auto":"none",display:"grid",gap:10},children:[a.jsx(Tc,{title:"1) Theatres in play",open:De,onToggle:()=>ze(De?0:1),status:ve?"LOCKED":M?"DONE":"TODO",subtitle:Oe?`Active: ${["WE","EE","NA","PA"].filter(k=>y[k]).join(", ")}`:"Pick at least one theatre."}),De&&a.jsxs("div",{style:{padding:"10px 6px 2px",display:"grid",gap:10},children:[a.jsx("div",{children:["WE","EE","NA","PA"].map(k=>a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,margin:"4px 0"},children:[a.jsx("input",{type:"checkbox",checked:y[k],onChange:()=>d(k)}),a.jsx("span",{children:k})]},k))}),a.jsx("button",{type:"button",disabled:!M,onClick:()=>ze(2),children:"Confirm theatres"})]}),a.jsx(Tc,{title:"2) Nations",open:Ke,onToggle:()=>ze(Ke?0:2),status:ve?"LOCKED":J?"DONE":"TODO",subtitle:`${ue.length} enabled  Selected: ${p(g)}`}),Ke&&a.jsxs("div",{style:{padding:"10px 0 0",display:"grid",gap:10},children:[a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:6},children:Ue.map(k=>a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,padding:6,border:"1px solid rgba(255,255,255,.12)",borderRadius:6,opacity:we[k.id]?1:.75},children:[a.jsx("input",{type:"checkbox",checked:!!we[k.id],onChange:()=>xt(k.id)}),a.jsxs("span",{children:["flag"in k&&k.flag?`${k.flag} `:"",k.name]})]},k.id))}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:12,opacity:.85,marginBottom:4},children:"Pick nation"}),a.jsxs("select",{value:g??"",onChange:k=>{const Ce=k.target.value;E(Ce===""?null:Ce),Ce&&D(Ce)},style:{width:"100%"},children:[a.jsx("option",{value:"",children:" Select "}),Ue.filter(k=>we[k.id]).map(k=>a.jsxs("option",{value:k.id,children:["flag"in k&&k.flag?`${k.flag} `:"",k.name]},k.id))]}),g&&a.jsxs("div",{style:{marginTop:6,fontSize:12,opacity:.85},children:["Aligned faction: ",a.jsx("b",{children:Gt(Vs(g),z)})]}),a.jsxs("div",{style:{marginTop:8,fontSize:12,opacity:.8},children:[a.jsx("b",{children:"Factions in play:"})," ",P]})]}),a.jsxs("div",{style:{border:"1px dashed rgba(255,255,255,.12)",borderRadius:8,padding:10},children:[a.jsx("div",{style:{fontSize:12,opacity:.85,marginBottom:6},children:"Create custom faction"}),a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("input",{value:w,onChange:k=>he(k.target.value),placeholder:"Faction name"}),a.jsxs("label",{style:{display:"grid",gap:4},children:[a.jsx("span",{style:{fontSize:12,opacity:.8},children:"Faction color"}),a.jsx("input",{type:"color",value:Ye,onChange:k=>ot(k.target.value)})]}),a.jsx("button",{type:"button",disabled:!w.trim()||!be,onClick:()=>{w.trim()&&(C(w.trim(),Ye),he(""))},children:"Add Faction"}),z.length>0&&a.jsx("div",{style:{display:"grid",gap:6,fontSize:12,opacity:.85},children:z.map(k=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("span",{style:{width:12,height:12,borderRadius:"50%",background:k.color,border:"1px solid rgba(255,255,255,.4)"}}),a.jsx("span",{children:k.name})]},k.id))})]})]}),a.jsxs("div",{style:{border:"1px dashed rgba(255,255,255,.12)",borderRadius:8,padding:10},children:[a.jsx("div",{style:{fontSize:12,opacity:.85,marginBottom:6},children:"Create custom nation"}),a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("input",{value:ee,onChange:k=>fe(k.target.value),placeholder:"Nation name"}),a.jsxs("label",{style:{display:"grid",gap:4},children:[a.jsx("span",{style:{fontSize:12,opacity:.8},children:"Nation color"}),a.jsx("input",{type:"color",value:je,onChange:k=>ge(k.target.value)})]}),a.jsxs("label",{style:{display:"grid",gap:4},children:[a.jsx("span",{style:{fontSize:12,opacity:.8},children:"Default faction"}),a.jsxs("select",{value:Te,onChange:k=>Ne(k.target.value),children:[a.jsx("option",{value:"neutral",children:"Unaligned"}),a.jsx("option",{value:"allies",children:"Allies"}),a.jsx("option",{value:"axis",children:"Axis"}),a.jsx("option",{value:"ussr",children:"USSR"}),z.length>0&&a.jsx("optgroup",{label:"Custom factions",children:z.map(k=>a.jsx("option",{value:`custom:${k.id}`,children:k.name},k.id))})]})]}),a.jsx("button",{type:"button",disabled:!ee.trim()||!be,onClick:()=>{ee.trim()&&(V(ee.trim(),Te,je),fe(""))},children:"Add Nation"})]})]}),a.jsx("button",{type:"button",disabled:!J,onClick:()=>ze(3),children:"Confirm nations"})]}),a.jsx(Tc,{title:"3) Homelands",open:X,onToggle:()=>ze(X?0:3),status:ve?"LOCKED":ie?"DONE":"TODO",subtitle:`Progress: ${de}`}),X&&a.jsxs("div",{style:{paddingTop:10},children:[a.jsxs("div",{style:{marginBottom:12,padding:10,border:"1px solid rgba(255,255,255,.12)",borderRadius:8},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:6},children:"Nation selection"}),a.jsxs("label",{style:{display:"grid",gap:4},children:[a.jsx("span",{style:{fontSize:12,opacity:.85},children:"Pick nation"}),a.jsxs("select",{value:g??"",onChange:k=>{const Ce=k.target.value;E(Ce===""?null:Ce),Ce&&D(Ce)},style:{width:"100%"},children:[a.jsx("option",{value:"",children:" Select "}),Ue.filter(k=>we[k.id]).map(k=>a.jsxs("option",{value:k.id,children:["flag"in k&&k.flag?`${k.flag} `:"",k.name]},k.id))]})]}),g&&a.jsxs("div",{style:{marginTop:6,fontSize:12,opacity:.85},children:["Aligned faction: ",a.jsx("b",{children:Gt(Vs(g),z)})]})]}),a.jsx("div",{style:{marginBottom:12,padding:10,border:"1px solid rgba(255,255,255,.12)",borderRadius:8},children:a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:ae,onChange:k=>Ae(k.target.checked),disabled:!be}),a.jsx("span",{style:{fontSize:12,opacity:.85},children:"Unlock homelands (allow any territory/region regardless of theatre)"})]})}),a.jsxs("div",{style:{marginTop:8,padding:10,border:"1px solid rgba(255,255,255,.12)",borderRadius:8},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:6},children:"Set from Region Group"}),$e.length===0?a.jsx("div",{style:{fontSize:12,opacity:.8},children:"Loading region groups"}):a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsxs("label",{style:{display:"grid",gap:4},children:[a.jsx("span",{style:{fontSize:12,opacity:.85},children:"Region"}),a.jsx("select",{value:ke,onChange:k=>{const Ce=k.target.value;yt(Ce),ne(Ce);const Nt=$e.find(Rt=>Rt.id===Ce)?.territories?.[0]??"";te(Nt),Nt&&R(Nt)},style:{width:"100%"},children:$e.map(k=>a.jsx("option",{value:k.id,children:k.name},k.id))})]}),a.jsxs("label",{style:{display:"grid",gap:4},children:[a.jsx("span",{style:{fontSize:12,opacity:.85},children:"Territory"}),a.jsx("select",{value:Re,onChange:k=>{const Ce=k.target.value;te(Ce),R(Ce)},style:{width:"100%"},children:(at?.territories??[]).map(k=>a.jsx("option",{value:k,children:Nn(k,Le)},k))})]}),a.jsx("button",{disabled:!Wt,onClick:()=>{if(!g||!om(Re).ok)return;L(g,Re);const Ce=Vs(g);Z(Ce,Re),R(Re),ze(3)},children:"Set Homeland"}),a.jsx("div",{style:{fontSize:12,opacity:.75},children:"You can still click the map instead if you prefer."})]})]}),a.jsxs("div",{style:{marginTop:12},children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"Homelands (by nation)"}),a.jsx("div",{style:{fontSize:12,lineHeight:1.6},children:Object.keys(x).length===0?"None set yet.":Object.entries(x).map(([k,Ce])=>{const rt=Ue.find(Nt=>Nt.id===k)??ml.find(Nt=>Nt.id===k);return a.jsxs("div",{children:[a.jsx("b",{children:rt?.name??k}),":"," ",Nn(Ce,Le)]},k)})})]})]})]}),a.jsxs("div",{style:{marginTop:12,display:"flex",gap:8,flexWrap:"wrap",justifyContent:"flex-end"},children:[N.length>0&&a.jsxs("div",{style:{width:"100%",fontSize:12,opacity:.85},children:["Assign a homeland for each enabled nation to lock setup. Missing:"," ",a.jsx("b",{children:$})]}),a.jsx("button",{onClick:b,disabled:!G,children:"Reset"}),o==="SETUP"?a.jsx("button",{onClick:()=>{re&&(f("PLAY"),We())},disabled:!re,children:"Lock Setup"}):a.jsx("button",{onClick:()=>{G&&(f("SETUP"),pe())},disabled:!G,children:"Unlock (GM)"}),a.jsx("button",{onClick:()=>{re&&(m(),We())},disabled:!re,children:"Lock Setup & Start Game"})]})]})}function pn(o,f){if(o.startsWith("custom:")){const u=o.slice(7);return f.find(r=>r.id===o||r.id===u)?.name??"Custom Nation"}return Lt[o]?.name??o}const dm={allies:"#3b82f6",axis:"#ef4444",ussr:"#f97316"},$y="#94a3b8";function eo(o){const{viewerNation:f,viewerFaction:u,customNations:r,customs:d}=o;if(f.startsWith("custom:")){const y=r.find(b=>b.id===f);if(y?.color)return y.color}if(u.startsWith("custom:")){const y=u.slice(7),b=d.find(v=>v.id===y);if(b?.color)return b.color}return u==="neutral"?$y:dm[u]??$y}const fm={ACTIVE:"#8ad4ff",COMPLETED:"#8dffb2",AVAILABLE:"#ffd28a",LOCKED:"rgba(255,255,255,0.2)"};function Ca({title:o,subtitle:f,description:u,status:r,selected:d,onSelect:y,children:b}){const v=fm[r];return a.jsxs("div",{style:{border:`1px solid ${v}`,borderRadius:10,padding:10,background:d?"rgba(255,255,255,0.12)":"rgba(0,0,0,0.2)",display:"grid",gap:6},children:[a.jsxs("div",{style:{display:"flex",alignItems:"start",gap:8},children:[a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:700},children:o}),f?a.jsx("div",{style:{fontSize:12,opacity:.75},children:f}):null]}),y?a.jsx("button",{type:"button",onClick:y,children:"Select"}):null]}),a.jsx("div",{style:{fontSize:12,opacity:.8},children:u}),b?a.jsx("div",{style:{display:"grid",gap:6},children:b}):null,a.jsx("div",{style:{fontSize:11,textTransform:"uppercase",letterSpacing:.6,opacity:.7},children:r})]})}const fh={1:"Tier I  Foundational",2:"Tier II  Advanced",3:"Tier III  Strategic"};function Jy(o,f){return f.completedResearch.includes(o.id)?"COMPLETED":f.activeResearchId===o.id?"ACTIVE":f.activeResearchId?"LOCKED":o.prerequisites.every(r=>f.completedResearch.includes(r))?"AVAILABLE":"LOCKED"}function ym(o){switch(o.type){case"SUPPLY_RANGE_BONUS":return`Supply range +${o.value}`;case"SUPPLY_DISRUPTION_REDUCTION":return`Supply disruption ${o.value}%`;case"INTEL_DECAY_REDUCTION":return`Intel decay reduction ${o.value}%`;case"RECON_ACTION_BONUS":return`Recon action bonus +${o.value}`;case"FORT_SLOT_BONUS":return`Fort slot bonus +${o.value}`;case"WITHDRAWAL_BONUS":return`Withdrawal bonus +${o.value}`;case"DIPLOMACY_ACTION_UNLOCK":return`Diplomacy action unlock: ${o.actionId}`;case"UPGRADE_UNLOCK":return`Upgrade unlock: ${o.upgradeId}`;default:return"Unknown effect"}}function hm({node:o,status:f,state:u,onStart:r,onCancel:d}){if(!o||!f)return a.jsx("div",{style:{fontSize:13,opacity:.7},children:"Select a research node to see details."});const y=f==="ACTIVE"?`Progress: ${u.progressTurns}/${o.timeTurns} turns`:null,b=f==="ACTIVE"&&o.tier>=2&&u.progressTurns>=1,v=f==="AVAILABLE",m=f==="ACTIVE"&&!b;return a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:700},children:o.name}),a.jsx("div",{style:{fontSize:12,opacity:.8},children:o.description})]}),a.jsxs("div",{style:{fontSize:12,opacity:.75},children:[fh[o.tier],"  ",o.costBand,"  ",o.timeTurns," turns"]}),a.jsxs("div",{style:{fontSize:12,opacity:.75},children:["Visibility: ",o.visibility]}),y?a.jsx("div",{style:{fontSize:12,opacity:.85},children:y}):null,o.locksIn?a.jsx("div",{style:{fontSize:12,color:"#ffd28a",fontWeight:600},children:"Locks in: Tier II+ research cannot be swapped after progress begins."}):null,a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:12,fontWeight:700,marginBottom:4},children:"Effects"}),a.jsx("ul",{style:{margin:0,paddingLeft:18,fontSize:12},children:o.effects.map((g,E)=>a.jsx("li",{children:ym(g)},`${g.type}-${E}`))})]}),o.unlocksUpgrades?.length?a.jsxs("div",{style:{fontSize:12,opacity:.85},children:["Unlocks upgrades: ",o.unlocksUpgrades.join(", ")]}):null,o.unlocksDoctrineTraits?.length?a.jsxs("div",{style:{fontSize:12,opacity:.85},children:["Unlocks doctrine traits: ",o.unlocksDoctrineTraits.join(", ")]}):null,a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[a.jsx("button",{type:"button",disabled:!v,onClick:r,children:"Start Research"}),a.jsx("button",{type:"button",disabled:!m,onClick:d,children:"Cancel Research"}),b?a.jsx("div",{style:{fontSize:11,opacity:.7},children:"Cancellation locked after the first turn for Tier II/III projects."}):null]})]})}function pm(){const o=j(V=>V.viewerNation),f=j(V=>V.customNations),u=j(V=>V.nationResearchState),r=j(V=>V.platoonsById),d=j(V=>V.suppliesByNation),y=j(V=>V.territoryNameById),b=j(V=>V.intelByTerritory),v=j(V=>V.startResearch),m=j(V=>V.cancelResearch),g=Y.useMemo(()=>ch({nationResearchState:u,customNations:f,platoonsById:r,suppliesByNation:d,territoryNameById:y,intelByTerritory:b},o),[u,f,r,d,y,b,o]),[E,x]=Y.useState(Ws[0]?.id??null),L=u[o]??{progressTurns:0,completedResearch:[]},D=E?On[E]:null,Z=D?Jy(D,L):null,R=Y.useMemo(()=>{const V=new Map;for(const z of wy)V.set(z,[]);for(const z of Ws){const C=V.get(z.tree);C?C.push(z):V.set(z.tree,[z])}for(const z of V.values())z.sort((C,ae)=>C.tier-ae.tier||C.name.localeCompare(ae.name));return V},[]),Q=pn(o,f),B=L.activeResearchId?On[L.activeResearchId]:null;return a.jsxs("div",{style:{display:"grid",gap:16},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:700},children:"National Research Tree"}),a.jsxs("div",{style:{fontSize:12,opacity:.75},children:[Q,"  One active research project at a time"]}),B?a.jsxs("div",{style:{fontSize:12,opacity:.85,marginTop:6},children:["Active: ",B.name," (",L.progressTurns,"/",B.timeTurns," turns)"]}):a.jsx("div",{style:{fontSize:12,opacity:.65,marginTop:6},children:"No active research selected."})]}),g.length?a.jsxs("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:10,background:"rgba(255,255,255,0.03)"},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700},children:"Recommendations"}),a.jsx("div",{style:{display:"grid",gap:6,marginTop:6},children:g.map(V=>{const z=On[V.nodeId];return z?a.jsxs("div",{style:{fontSize:12},children:[a.jsx("strong",{children:z.name}),"  score ",V.score,V.reasons.length?a.jsx("div",{style:{opacity:.75},children:V.reasons.join(" ")}):null]},V.nodeId):null})})]}):null,a.jsx("div",{style:{display:"grid",gap:18},children:wy.map(V=>{const z=R.get(V)??[],C=[1,2,3];return a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:700},children:V}),a.jsx("div",{style:{display:"grid",gap:12,gridTemplateColumns:"repeat(3, minmax(0, 1fr))"},children:C.map(ae=>{const Ae=z.filter(G=>G.tier===ae);return a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("div",{style:{fontSize:12,opacity:.7},children:fh[ae]}),Ae.length?a.jsx("div",{style:{display:"grid",gap:8},children:Ae.map(G=>a.jsx(Ca,{title:G.name,subtitle:`${G.costBand}  ${G.timeTurns} turns  ${G.visibility}`,description:G.description,status:Jy(G,L),selected:E===G.id,onSelect:()=>x(G.id),children:G.unlocksDoctrineTraits?.length?a.jsxs("div",{style:{fontSize:12,opacity:.75},children:["Unlocks doctrine traits:"," ",G.unlocksDoctrineTraits.join(", ")]}):null},G.id))}):a.jsx("div",{style:{fontSize:12,opacity:.45},children:"No nodes seeded."})]},ae)})})]},V)})}),a.jsxs("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"Node Details"}),a.jsx(hm,{node:D,status:Z,state:L,onStart:()=>{D&&v(o,D.id)},onCancel:()=>m(o)})]})]})}const Hl={manpower:"",industry:"",fuel:"",intel:"",requisition:"",resource:""},gm={WE:"",EE:"",NA:"",PA:""},mm=["Leader","Co-Leader","General"],vm={allies:"",axis:"",ussr:""};function bm(o){if(!o)return[];const f=o.toLowerCase(),u=[];return f.includes("manpower")&&u.push({icon:Hl.manpower,label:"Manpower"}),f.includes("industry")&&u.push({icon:Hl.industry,label:"Industry"}),f.includes("fuel")&&u.push({icon:Hl.fuel,label:"Fuel"}),f.includes("intel")&&u.push({icon:Hl.intel,label:"Intel"}),f.includes("requisition")&&u.push({icon:Hl.requisition,label:"Requisition"}),f.includes("resource")&&u.push({icon:Hl.resource,label:"Resource"}),u}function Sm(o){if(!o)return null;const f=o.match(/\+?\d+/);return f?f[0]:null}function xm(o){return new Set(o.filter(f=>f!=="neutral"&&f!=="contested"))}function Cc({data:o,variant:f="full"}){const u=j(X=>X.viewerFaction),r=j(X=>X.viewerNation),d=j(X=>X.viewerMode),y=j(X=>X.customs),b=j(X=>X.customNations),v=j(X=>X.suppliesByNation),m=j(X=>X.regions),g=j(X=>X.ownerByTerritory),E=j(X=>X.contestsByTerritory),x=j(X=>X.platoonsById),L=j(X=>X.addNote),D=Y.useMemo(()=>{const X=new Map;for(const pe of o?.territories??[])X.set(pe.id,pe.name);return X},[o]),Z=Y.useMemo(()=>m.length?m:o?.territoryGroups??[],[m,o]),R=Y.useMemo(()=>Z.map(X=>{const pe=X.territories.map(vt=>g[vt]??"neutral"),We=xm(pe),Le=pe.includes("contested"),mt=X.territories.filter(vt=>g[vt]==="contested");if(Le||We.size>1)return{...X,status:"contested",contestedTerritories:mt};const $e=pe[0]??"neutral";return $e!=="neutral"&&$e!=="contested"?{...X,status:"controlled",controllingNation:$e,contestedTerritories:mt}:{...X,status:"neutral",contestedTerritories:mt}}),[Z,g]),Q=R.filter(X=>X.status==="controlled"&&X.controllingNation===r),B=R.filter(X=>X.status==="contested"),V=Gt(u,y),z=pn(r,b),C=y.find(X=>`custom:${X.id}`===u),ae=eo({viewerNation:r,viewerFaction:u,customNations:b,customs:y}),Ae=d==="GM"?"leader":"officer-2",G=f==="compact",ve=C?.name?.slice(0,1).toUpperCase()||z.slice(0,1).toUpperCase()||vm[String(u)]||"",be=Y.useMemo(()=>{const X=v?.[r]??0;return[{key:"manpower",label:"Manpower",value:Math.max(0,Math.round(X*1.5))},{key:"industry",label:"Industry",value:X},{key:"fuel",label:"Fuel",value:Math.max(0,Math.round(X*.6))},{key:"intel",label:"Intel",value:Math.max(0,Math.round(X*.3))}]},[v,r]),we=Y.useMemo(()=>be.reduce((X,pe)=>X+(Number.isFinite(pe.value)?pe.value:0),0),[be]),Oe=Y.useMemo(()=>[{id:"leader",name:`${z} Command`,role:"Leader",theatre:"HQ",forces:"Strategic"},{id:"officer-1",name:"Field Marshal",role:"Co-Leader",theatre:"WE",forces:"Army Group Alpha"},{id:"officer-2",name:"Operations Lead",role:"General",theatre:"EE",forces:"2nd Expeditionary"},{id:"officer-3",name:"Logistics Chief",role:"General",theatre:"NA",forces:"Support Command"}],[z]),[ue,Ue]=Y.useState(Oe),[Pe,Xe]=Y.useState([{id:"sys-1",sender:"System",text:`Joined ${V} channel`,ts:"Just now",system:!0},{id:"msg-1",sender:"HQ",text:"Secure your regional bonuses before the next strategic turn.",ts:"2m ago"}]),[M,J]=Y.useState(""),ie=ue.find(X=>X.id===Ae),de=d==="GM"||ie?.role==="Leader",Ee=Y.useMemo(()=>[{id:"allies",label:"Allies"},{id:"axis",label:"Axis"},{id:"ussr",label:"USSR"},...y.map(X=>({id:`custom:${X.id}`,label:X.name}))],[y]),[p,N]=Y.useState(null),[$,P]=Y.useState("allies"),[se,re]=Y.useState("Alliance (shared vision)"),[Se,ze]=Y.useState({fuel:"",industry:"",manpower:""});Y.useEffect(()=>{},[Oe,V]);const De=(X,pe)=>{Ue(We=>We.map(Le=>Le.id===X?{...Le,role:pe}:Le))},Ke=()=>{const X=M.trim();X&&(Xe(pe=>[{id:String(Date.now()),sender:"You",text:X,ts:"now"},...pe]),J(""))};return a.jsxs("div",{style:{padding:G?14:20,display:"grid",gap:G?14:20,border:`1px solid ${ae}55`,borderRadius:14,background:`linear-gradient(135deg, ${ae}18, rgba(0,0,0,0))`},children:[a.jsxs("section",{style:{display:"grid",gap:12},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[a.jsx("div",{style:{width:52,height:52,borderRadius:14,background:`${ae}33`,border:`1px solid ${ae}`,display:"grid",placeItems:"center",fontSize:24,fontWeight:700},"aria-hidden":"true",children:ve}),a.jsxs("div",{style:{minWidth:0},children:[a.jsxs("h2",{style:{margin:0},children:[z," Command Hub"]}),a.jsxs("div",{style:{fontSize:12,opacity:.75},children:["Nation overview  Faction alignment: ",V,". Resources include active region bonuses and supply status."]})]}),a.jsxs("div",{style:{marginLeft:"auto",textAlign:"right"},children:[a.jsx("div",{style:{fontSize:12,opacity:.7},children:"Total Resources"}),a.jsx("div",{style:{fontSize:20,fontWeight:700},children:we})]})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:12},children:be.map(X=>a.jsxs("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:10,background:"rgba(0,0,0,.12)"},children:[a.jsx("div",{style:{fontSize:20},children:Hl[X.key]??""}),a.jsx("div",{style:{fontWeight:700},children:X.label}),a.jsx("div",{style:{fontSize:18},children:X.value})]},X.key))})]}),a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:16},children:[a.jsx("h3",{style:{marginTop:0},children:"Regions in Control"}),Q.length?a.jsx("div",{style:{display:"grid",gap:12},children:Q.map(X=>{const pe=bm(X.bonus),We=Sm(X.bonus);return a.jsxs("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12,background:"rgba(0,0,0,.15)",display:"grid",gap:6},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("span",{style:{fontSize:18},children:gm[X.theatreId]??""}),a.jsx("div",{style:{fontWeight:700},children:X.name}),a.jsx("span",{style:{marginLeft:"auto",fontSize:12,opacity:.8},children:" Bonus active"})]}),a.jsx("div",{style:{fontSize:12,opacity:.8},children:X.bonus??"No bonus listed."}),pe.length?a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:pe.map(Le=>a.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:12,padding:"4px 8px",borderRadius:999,border:"1px solid rgba(255,255,255,.15)",background:"rgba(255,255,255,.08)"},children:[a.jsx("span",{children:Le.icon}),a.jsxs("span",{children:[We??"+"," ",Le.label]})]},Le.label))}):null]},X.id)})}):a.jsx("p",{style:{margin:0,opacity:.7},children:"No regions fully controlled. Secure all territories to claim bonuses."})]}),G?a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:16},children:[a.jsx("h3",{style:{marginTop:0},children:"Region Snapshot"}),a.jsxs("div",{style:{display:"grid",gap:6,fontSize:13},children:[a.jsxs("div",{children:["Controlled regions: ",a.jsx("b",{children:Q.length})]}),a.jsxs("div",{children:["Contested regions: ",a.jsx("b",{children:B.length})]}),a.jsx("div",{style:{fontSize:12,opacity:.7},children:"Expand below the map for full contest breakdowns."})]})]}):a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:16},children:[a.jsx("h3",{style:{marginTop:0},children:"Contested Regions"}),B.length?a.jsx("div",{style:{display:"grid",gap:14},children:B.map(X=>{const pe=X.territories.filter(We=>g[We]==="contested"||!!E[We]);return a.jsxs("div",{style:{border:"1px solid rgba(239,68,68,.35)",borderRadius:14,padding:14,background:"rgba(239,68,68,.08)",display:"grid",gap:10},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("span",{style:{fontSize:18},children:""}),a.jsx("div",{style:{fontWeight:700},children:X.name}),a.jsxs("span",{style:{marginLeft:"auto",fontSize:12,opacity:.8},children:[pe.length," contested territories"]})]}),pe.length?a.jsx("div",{style:{display:"grid",gap:10},children:pe.map(We=>{const Le=E[We],mt=D.get(We)??We,$e=Le?.attackerPlatoonIds??[],vt=Le?.defenderPlatoonIds??[],oe=yt=>{const H=x[yt];return H?a.jsxs("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:8,display:"grid",gap:4,background:"rgba(0,0,0,.15)"},children:[a.jsx("div",{style:{fontWeight:700},children:H.name}),a.jsxs("div",{style:{fontSize:12,opacity:.75},children:[Gt(H.faction,y)," "," ",H.condition," "," ",H.strengthPct,"% strength"]}),a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:6,fontSize:11},children:[a.jsxs("span",{style:{padding:"2px 6px",borderRadius:999,border:"1px solid rgba(255,255,255,.2)"},children:["MP ",H.mpBase]}),(H.traits??[]).map(ne=>a.jsx("span",{style:{padding:"2px 6px",borderRadius:999,border:"1px solid rgba(255,255,255,.2)"},children:ne},ne))]})]},yt):null};return a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsxs("div",{style:{fontWeight:600},children:[mt," ",a.jsxs("span",{style:{opacity:.7},children:["(",We,")"]})]}),Le?a.jsxs("div",{style:{fontSize:12,opacity:.8},children:[Gt(Le.attackerFaction,y)," vs"," ",Gt(Le.defenderFaction,y),"  ",Le.status]}):a.jsx("div",{style:{fontSize:12,opacity:.8},children:"Skirmish ongoing  details pending"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:10},children:[$e.length?a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700},children:"Attackers"}),$e.map(yt=>oe(yt))]}):null,vt.length?a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsx("div",{style:{fontSize:12,fontWeight:700},children:"Defenders"}),vt.map(yt=>oe(yt))]}):null]})]},We)})}):a.jsx("div",{style:{fontSize:12,opacity:.7},children:"No active contests recorded yet. Monitor supply lines and reinforce positions."})]},X.id)})}):a.jsx("p",{style:{margin:0,opacity:.7},children:"No contested regions at the moment."})]}),a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:16},children:[a.jsx("h3",{style:{marginTop:0},children:"Strategy Links"}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:["Research","Doctrine","Upgrades","Diplomacy","Profile"].map(X=>a.jsx("button",{type:"button",onClick:()=>{N(X),L(`Opened ${X} from ${z} Command Hub.`)},children:X},X))}),p==="Research"?a.jsx("div",{style:{marginTop:12},children:a.jsx(pm,{})}):p?a.jsxs("div",{style:{marginTop:8,fontSize:12,opacity:.7},children:[p," panel opening is queued for a future workflow."]}):null]}),G?null:a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:16},children:[a.jsx("h3",{style:{marginTop:0},children:"Diplomacy & Resource Sharing"}),a.jsxs("div",{style:{display:"grid",gap:10},children:[a.jsx("div",{style:{fontSize:12,opacity:.75},children:"Leaders can propose agreements or share resources with allied factions."}),a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsxs("label",{style:{display:"grid",gap:4},children:[a.jsx("span",{style:{fontSize:12,opacity:.8},children:"Target faction"}),a.jsx("select",{disabled:!de,value:$,onChange:X=>P(X.target.value),children:Ee.map(X=>a.jsx("option",{value:X.id,children:X.label},X.id))})]}),a.jsxs("label",{style:{display:"grid",gap:4},children:[a.jsx("span",{style:{fontSize:12,opacity:.8},children:"Agreement type"}),a.jsxs("select",{disabled:!de,value:se,onChange:X=>re(X.target.value),children:[a.jsx("option",{children:"Alliance (shared vision)"}),a.jsx("option",{children:"Non-Aggression Pact"}),a.jsx("option",{children:"Resource Treaty"})]})]}),a.jsx("button",{type:"button",disabled:!de,onClick:()=>L(`Proposal sent: ${se}  ${$}`),children:"Send Proposal"})]}),a.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,.12)",paddingTop:10,display:"grid",gap:6},children:[a.jsx("div",{style:{fontWeight:700,fontSize:13},children:"Active Agreements"}),a.jsx("div",{style:{fontSize:12,opacity:.7},children:"No active agreements yet."})]}),a.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,.12)",paddingTop:10,display:"grid",gap:6},children:[a.jsx("div",{style:{fontWeight:700,fontSize:13},children:"Send Resources"}),a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[a.jsx("input",{type:"number",placeholder:"Fuel",disabled:!de,value:Se.fuel,onChange:X=>ze(pe=>({...pe,fuel:X.target.value}))}),a.jsx("input",{type:"number",placeholder:"Industry",disabled:!de,value:Se.industry,onChange:X=>ze(pe=>({...pe,industry:X.target.value}))}),a.jsx("input",{type:"number",placeholder:"Manpower",disabled:!de,value:Se.manpower,onChange:X=>ze(pe=>({...pe,manpower:X.target.value}))}),a.jsx("button",{type:"button",disabled:!de,onClick:()=>{L(`Resource transfer drafted: Fuel ${Se.fuel||0}, Industry ${Se.industry||0}, Manpower ${Se.manpower||0}.`),ze({fuel:"",industry:"",manpower:""})},children:"Send Resources"})]})]})]})]}),G?null:a.jsxs("section",{style:{display:"grid",gap:14,gridTemplateColumns:"minmax(0, 2fr) minmax(0, 1fr)"},children:[a.jsxs("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:16},children:[a.jsx("h3",{style:{marginTop:0},children:"Faction Members"}),a.jsx("div",{style:{display:"grid",gap:10},children:ue.map(X=>a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:10,alignItems:"center",padding:10,borderRadius:10,border:"1px solid rgba(255,255,255,.12)",background:"rgba(0,0,0,.12)"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:700,display:"flex",alignItems:"center",gap:6},children:[X.name,X.role==="Leader"&&a.jsx("span",{title:"Leader",style:{display:"inline-flex",alignItems:"center",gap:4,fontSize:12,padding:"2px 6px",borderRadius:999,background:"rgba(250,204,21,.2)",border:"1px solid rgba(250,204,21,.4)"},children:" Leader"})]}),a.jsxs("div",{style:{fontSize:12,opacity:.75},children:[X.role,"  ",X.theatre??"Global"," "," ",X.forces??"Unassigned forces"]})]}),de?a.jsx("select",{value:X.role,onChange:pe=>De(X.id,pe.target.value),children:mm.map(pe=>a.jsx("option",{value:pe,children:pe},pe))}):null]},X.id))}),de?null:a.jsx("div",{style:{marginTop:8,fontSize:12,opacity:.65},children:"Only the faction leader or GM can manage roles."}),de?a.jsxs("div",{style:{marginTop:8,fontSize:12,opacity:.65},children:["Role updates use POST /factions/","{id}","/members/","{playerId}","/role (server-side)."]}):null]}),a.jsxs("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:16,display:"grid",gap:10},children:[a.jsx("h3",{style:{marginTop:0},children:"Faction Chat"}),a.jsxs("div",{style:{fontSize:12,opacity:.7},children:["Private channel  ",V]}),a.jsx("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:8,height:200,overflowY:"auto",display:"grid",gap:8},children:Pe.map(X=>a.jsxs("div",{style:{padding:6,borderRadius:8,background:X.system?"rgba(255,255,255,.08)":"rgba(0,0,0,.2)",fontSize:12},children:[a.jsxs("div",{style:{fontWeight:700,fontSize:11,opacity:.8},children:[X.sender,"  ",X.ts]}),a.jsx("div",{children:X.text})]},X.id))}),a.jsxs("div",{style:{display:"flex",gap:6},children:[a.jsx("input",{value:M,onChange:X=>J(X.target.value),placeholder:"Message your faction",style:{flex:1}}),a.jsx("button",{type:"button",onClick:Ke,disabled:!M.trim(),children:"Send"})]})]})]})]})}function Tm({data:o,tab:f}){const u=j(m=>m.viewerMode),r=j(m=>m.viewerNation),d=j(m=>m.turnNumber),y=j(m=>m.platoonsById),b=j(m=>m.territoryNameById),v=Y.useMemo(()=>Object.values(y).filter(g=>g.nation===r),[y,r]);return a.jsxs("div",{style:{padding:16,display:"grid",gap:12},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{margin:0},children:"Player Dashboard"}),a.jsxs("div",{style:{opacity:.8},children:["Tab: ",a.jsx("b",{children:f}),"  Data: ",a.jsx("b",{children:o?"loaded":"null"})]}),a.jsxs("div",{style:{opacity:.8,marginTop:6},children:["Viewer: ",a.jsx("b",{children:u}),"  Acting nation: ",a.jsx("b",{children:r}),"  Turn: ",a.jsx("b",{children:d})]})]}),a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12},children:[a.jsx("h3",{style:{marginTop:0},children:"Your Platoons"}),v.length?a.jsx("ul",{style:{margin:0,paddingLeft:18},children:v.map(m=>a.jsxs("li",{children:[a.jsx("b",{children:m.name}),"  ",m.condition,"  ",m.strengthPct,"% "," ",Nn(m.territoryId,b)]},m.id))}):a.jsx("p",{style:{margin:0,opacity:.8},children:"No platoons for this nation yet."})]}),a.jsx("p",{style:{margin:0,opacity:.7},children:"Next: wire player orders + movement selection using NormalizedData (territories list) and submit orders."})]})}const yh=[{id:"INFANTRY",label:"Infantry",role:"Hold ground, attack objectives, absorb losses.",summary:"Backbone formation for every theatre.",strengths:["Holding territory","Fighting in cities, forests, and mountains","Reliable endurance across theatres"],weaknesses:["Rapid exploitation","Specialised intel work"],hooks:{regionInteraction:"Baseline region control and defence anchor.",manpowerCost:"Default manpower cost reference point.",supplyConsumption:"Average supply draw and upkeep.",doctrineUpgrades:"Receives most generalist doctrine upgrades."}},{id:"RECON",label:"Recon",trait:"RECON",role:"Intelligence, screening, and disruption.",summary:"Primary way to act in fog of war.",strengths:["Improving intel and visibility","Operating in fog of war","Avoiding decisive engagements"],weaknesses:["Holding territory","Prolonged combat"],hooks:{regionInteraction:"Unlocks scouting, screening, and intel actions.",manpowerCost:"Lower manpower footprint than line units.",supplyConsumption:"Light supply draw; prioritises intel over firepower.",doctrineUpgrades:"Receives recon/intel doctrine upgrades."}},{id:"ENGINEERS",label:"Engineers",trait:"ENGINEERS",role:"Terrain shaping and force multiplication.",summary:"Enable fortifications and chokepoints.",strengths:["Building and improving forts","Enhancing chokepoints","Mitigating terrain penalties"],weaknesses:["Unspecialised combat performance"],hooks:{regionInteraction:"Enables fortifications and chokepoint rules.",manpowerCost:"Moderate manpower with specialist tooling.",supplyConsumption:"Engineer supplies consumed for fortification work.",doctrineUpgrades:"Receives engineering doctrine upgrades."}},{id:"ARMOURED",label:"Armoured",trait:"ARMOURED",role:"Breakthrough and exploitation.",summary:"Powerful spearhead with fragile logistics.",strengths:["Rapid advances","Attacking across open terrain","Exploiting weakly defended regions"],weaknesses:["Dense terrain (urban, jungle, mountains)","Supply-poor theatres","Prolonged unsupported operations"],hooks:{regionInteraction:"Rewards open terrain breakthroughs and exploitation.",manpowerCost:"High manpower and equipment overhead.",supplyConsumption:"High fuel and supply demand; fragile logistics.",doctrineUpgrades:"Receives armoured doctrine upgrades."}}],Di=yh.reduce((o,f)=>(o[f.id]=f,o),{}),hh=yh.reduce((o,f)=>(f.trait&&(o[f.trait]=f),o),{}),Em={RECON:"RECON",ENGINEERS:"ENGINEERS",ARMOURED:"ARMOURED",MOTORIZED:"ARMOURED"},Mi=o=>o?Em[o]??null:null,gl=o=>Di[o],Bi=o=>{const f=Mi(o);return f?hh[f]??Di.INFANTRY:Di.INFANTRY},Js=o=>{if(!o?.length)return Di.INFANTRY;for(const f of o){const u=Mi(f);if(u)return hh[u]??Di.INFANTRY}return Di.INFANTRY},Ec=["SHATTERED","DEPLETED","WORN","FRESH"],Ra=(o,f,u)=>Math.min(Math.max(o,f),u);function Py(o,f=1){const u=Ec.indexOf(o);return u<0?o:Ec[Ra(u+f,0,Ec.length-1)]}function ji(o,f){const u=j.getState();Array.isArray(u.turnLog)&&j.setState({turnLog:[{ts:Date.now(),type:o,text:f},...u.turnLog]})}function Oi(o,f){const u=j.getState(),r=u.platoonsById?.[o];r&&j.setState({platoonsById:{...u.platoonsById,[o]:{...r,...f}}})}function jm(){const o=j(w=>w.selectedTerritoryId),f=j(w=>w.platoonsById),u=j(w=>w.selectedPlatoonId),r=j(w=>w.setSelectedPlatoonId),d=j(w=>w.setSelectedTerritory),y=j(w=>w.viewerFaction),b=j(w=>w.createPlatoonWithLoadout),v=j(w=>w.viewerNation),m=j(w=>w.viewerMode),g=j(w=>w.territoryNameById),E=j(w=>w.customNations),x=j(w=>w.customs),L=j(w=>w.ensureSupplies),D=j(w=>w.getSupplies),Z=j(w=>w.spendSupplies);Y.useEffect(()=>{L()},[L]);const R=D(v),Q=eo({viewerNation:v,viewerFaction:y,customNations:E,customs:x}),B=Y.useMemo(()=>Object.values(f),[f]),V=Y.useMemo(()=>m==="GM"?B:B.filter(w=>w.nation===v),[B,m,v]),C=u?f[u]:void 0,[ae,Ae]=Y.useState(""),[G,ve]=Y.useState(10),[be,we]=Y.useState(!1),[Oe,ue]=Y.useState(0),[Ue,Pe]=Y.useState(""),[Xe,M]=Y.useState(""),[J,ie]=Y.useState(1),de=["Specialism","Mobility","Name"],Ee=1,p=25,N=15,$=10,P=20,se=20,re=30,Se={RECON:P,ENGINEERS:se,ARMOURED:re},ze={RECON:Bi("RECON").summary,ENGINEERS:Bi("ENGINEERS").summary,ARMOURED:Bi("ARMOURED").summary},De=w=>R>=w,Ke=C?C.nation===v:!1,X={FRESH:"#22c55e",WORN:"#eab308",DEPLETED:"#f97316",SHATTERED:"#ef4444"},pe={INFANTRY:{label:gl("INFANTRY").label,color:"#94a3b8"},RECON:{label:gl("RECON").label,color:"#38bdf8"},ENGINEERS:{label:gl("ENGINEERS").label,color:"#fbbf24"},ARMOURED:{label:gl("ARMOURED").label,color:"#a78bfa"}},We=w=>Js(w).id,Le=w=>{const he=(w??[]).map(Ye=>Mi(Ye)).filter(Ye=>!!Ye);return he.length?he.join(", "):""},mt=w=>w>=75?X.FRESH:w>=50?X.WORN:w>=25?X.DEPLETED:X.SHATTERED,$e=()=>{if(!C)return;const w=ae.trim();w&&(Oi(C.id,{name:w}),ji("PLATOON",`Renamed platoon ${C.id} to "${w}"`),Ae(""))},vt=()=>{if(!C)return;const w=C.strengthPct??0,he=Ra(w+G,0,100),Ye=he-w,ot=Ye*Ee;if(Ye<=0||!Ke||!Z(C.nation,ot,"Refit"))return;const at=he>=80&&C.condition!=="FRESH"?Py(C.condition,1):C.condition;Oi(C.id,{strengthPct:he,condition:at}),ji("PLATOON",`Refit ${C.name}: +${Ye}% strength (cost ${ot})`)},oe=()=>{o&&(Pe(""),M(""),ie(1),ue(0),we(!0))},yt=()=>{we(!1)},H=w=>{ue(Ra(w,0,de.length-1))},ne=()=>{if(!o)return;const w=Ue.trim();w&&(b(y,o,{name:w,traits:Xe?[Xe]:[],mpBase:J,condition:"FRESH",strengthPct:100}),we(!1))},le=()=>{if(!C)return;const w=C.mpBase??1;w>=3||!Ke||!Z(C.nation,p,"Mobility upgrade")||(Oi(C.id,{mpBase:w+1}),ji("PLATOON",`Upgraded mobility for ${C.name}: MP ${w}  ${w+1} (cost ${p})`))},te=()=>{if(!C||C.condition==="FRESH"||!Ke||!Z(C.nation,N,"Readiness upgrade"))return;const he=Py(C.condition,1);Oi(C.id,{condition:he}),ji("PLATOON",`Upgraded readiness for ${C.name}: ${C.condition}  ${he} (cost ${N})`)},ee=(C?.traits??[]).map(w=>Mi(w)).filter(w=>!!w),fe=w=>ee.includes(w),Te=Js(ee),Ne=Te.id,je=(w,he)=>{!C||!Ke||fe(w)||!Z(C.nation,he,`Trait: ${w}`)||(Oi(C.id,{traits:[...ee,w]}),ji("PLATOON",`Purchased trait ${w} for ${C.name} (cost ${he})`))},ge=()=>{if(!C||!Ke)return;const w=!!C.entrenched;!w&&!Z(C.nation,$,"Entrench")||(Oi(C.id,{entrenched:!w}),ji("PLATOON",`${C.name} is now ${w?"NOT entrenched":"ENTRENCHED"}`))};return a.jsxs("div",{style:{display:"grid",gap:10},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",gap:8},children:[a.jsx("div",{style:{fontWeight:900},children:"Platoons"}),a.jsxs("div",{style:{fontSize:12,opacity:.75},children:["Viewer nation: ",a.jsx("b",{children:pn(v,E)}),"  Supplies: ",a.jsx("b",{children:R})]})]}),a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:a.jsxs("button",{onClick:oe,disabled:!o,title:o?void 0:"Select a territory on the map to create a platoon.",children:["+ Create Platoon"," ",o?`(as ${pn(v,E)})`:""]})}),be?a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"grid",placeItems:"center",zIndex:50},children:a.jsxs("div",{style:{width:"min(720px, 92vw)",background:"#0f172a",borderRadius:12,padding:16,border:`1px solid ${Q}55`,display:"grid",gap:12,backgroundImage:`linear-gradient(135deg, ${Q}22, rgba(0,0,0,0))`},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("div",{style:{fontWeight:900},children:"Platoon Creation Wizard"}),a.jsx("button",{type:"button",onClick:yt,children:"Close"})]}),a.jsxs("div",{style:{display:"grid",gap:4},children:[a.jsxs("div",{style:{fontSize:12,opacity:.8},children:["Step ",Oe+1," of ",de.length," "," ",a.jsx("b",{children:de[Oe]})]}),a.jsx("div",{style:{display:"flex",gap:6},children:de.map((w,he)=>a.jsx("div",{style:{flex:1,height:6,borderRadius:999,background:he<=Oe?Q:"rgba(255,255,255,.12)"}},w))}),a.jsx("div",{style:{fontSize:12,opacity:.75},children:"Changes are staged locally and only saved when you click Deploy."})]}),Oe===0?a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:700},children:"Choose a platoon specialism"}),a.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("input",{type:"radio",name:"specialism",value:"",checked:Xe==="",onChange:()=>M("")}),a.jsxs("span",{style:{display:"grid",gap:2},children:[a.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:8},children:[a.jsx("span",{style:{width:18,height:18,borderRadius:"50%",background:pe.INFANTRY.color,display:"inline-block"}}),"None (standard infantry)"]}),a.jsxs("span",{style:{fontSize:12,opacity:.75},children:["Cost: ",a.jsx("b",{children:"0"}),"  Balanced infantry platoon."]})]})]}),["RECON","ENGINEERS","ARMOURED"].map(w=>a.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("input",{type:"radio",name:"specialism",value:w,checked:Xe===w,onChange:()=>M(w)}),a.jsxs("span",{style:{display:"grid",gap:2},children:[a.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:8},children:[a.jsx("span",{style:{width:18,height:18,borderRadius:"50%",background:pe[w].color,display:"inline-block"}}),pe[w].label]}),a.jsxs("span",{style:{fontSize:12,opacity:.75},children:["Cost: ",a.jsx("b",{children:Se[w]})," "," ",ze[w]]})]})]},w))]}):null,Oe===1?a.jsxs("div",{style:{display:"grid",gap:12},children:[a.jsx("div",{style:{fontWeight:700},children:"Configure mobility"}),a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsx("label",{style:{fontSize:12,opacity:.8},children:"Mobility (MP)"}),a.jsx("select",{value:J,onChange:w=>ie(Ra(Number(w.target.value||1),1,3)),children:[1,2,3].map(w=>a.jsxs("option",{value:w,children:[w," MP"]},w))})]}),a.jsx("div",{style:{fontSize:12,opacity:.7},children:"New platoons always deploy at full readiness and strength."})]}):null,Oe===2?a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:700},children:"Name your platoon"}),a.jsx("input",{value:Ue,onChange:w=>Pe(w.target.value),placeholder:"e.g. 1st Infantry"}),a.jsxs("div",{style:{fontSize:12,opacity:.7},children:["Territory: ",a.jsx("b",{children:o??""}),"  Nation:"," ",a.jsx("b",{children:pn(v,E)})]}),a.jsxs("div",{style:{fontSize:12,opacity:.7},children:["Specialism:"," ",a.jsx("b",{children:Xe?pe[Xe].label:pe.INFANTRY.label})," "," MP ",a.jsx("b",{children:J}),"  Readiness ",a.jsx("b",{children:"FRESH"}),"  Strength ",a.jsx("b",{children:"100%"})]})]}):null,a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8},children:[a.jsx("button",{type:"button",onClick:()=>H(Oe-1),disabled:Oe===0,children:"Back"}),a.jsx("div",{style:{display:"flex",gap:8},children:Oe<de.length-1?a.jsx("button",{type:"button",onClick:()=>H(Oe+1),children:"Next"}):a.jsx("button",{type:"button",onClick:ne,disabled:!Ue.trim(),children:"Deploy"})})]})]})}):null,a.jsx("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:10},children:V.length===0?a.jsx("div",{style:{fontSize:12,opacity:.8},children:"No platoons yet."}):a.jsx("div",{style:{display:"grid",gap:8},children:V.map(w=>{const he=We(w.traits);return a.jsxs("button",{type:"button",onClick:()=>{r(w.id),d(w.territoryId)},style:{textAlign:"left",padding:10,borderRadius:10,border:"1px solid rgba(255,255,255,.12)",background:u===w.id?"rgba(255,255,255,.06)":"rgba(0,0,0,.12)",cursor:"pointer"},children:[a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"2px 8px",borderRadius:999,fontSize:10,fontWeight:700,textTransform:"uppercase",background:"rgba(15,23,42,.9)",border:`1px solid ${pe[he].color}`,color:pe[he].color},title:`Class: ${pe[he].label}`,children:pe[he].label}),a.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:mt(w.strengthPct??0),boxShadow:"0 0 6px rgba(0,0,0,.4)"},title:`Strength ${w.strengthPct}% (${w.condition})`}),a.jsx("div",{style:{fontWeight:800},children:w.name})]}),a.jsxs("div",{style:{fontSize:12,opacity:.85},children:[pn(w.nation,E),"  ",w.condition," "," ",w.strengthPct,"%  MP ",w.mpBase,w.entrenched?"  ENTRENCHED":"",Le(w.traits)?`  ${Le(w.traits)}`:""]}),a.jsxs("div",{style:{fontSize:12,opacity:.7},children:["Territory:"," ",Nn(w.territoryId,g)," "," ","Faction: ",Gt(w.faction,x)]})]},w.id)})})}),a.jsxs("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:10},children:[a.jsx("div",{style:{fontWeight:900,marginBottom:6},children:"Platoon Details"}),C?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"grid",gap:4},children:[a.jsxs("div",{children:[a.jsx("b",{children:"Name:"})," ",C.name]}),a.jsxs("div",{children:[a.jsx("b",{children:"Nation:"})," ",pn(C.nation,E)]}),a.jsxs("div",{children:[a.jsx("b",{children:"Faction:"})," ",Gt(C.faction,x)]}),a.jsxs("div",{children:[a.jsx("b",{children:"Condition:"})," ",C.condition]}),a.jsxs("div",{children:[a.jsx("b",{children:"Strength:"})," ",C.strengthPct,"%"]}),a.jsxs("div",{children:[a.jsx("b",{children:"Move:"})," MP ",C.mpBase]}),a.jsxs("div",{children:[a.jsx("b",{children:"Entrenched:"})," ",C.entrenched?"Yes":"No"]}),a.jsxs("div",{children:[a.jsx("b",{children:"Traits:"})," ",Le(C.traits)||""]}),a.jsxs("div",{children:[a.jsx("b",{children:"Class:"})," ",pe[Ne].label]}),a.jsxs("div",{children:[a.jsx("b",{children:"Campaign Role:"})," ",Te.role]}),a.jsxs("div",{children:[a.jsx("b",{children:"Strengths:"})," ",Te.strengths.join(", ")]}),a.jsxs("div",{children:[a.jsx("b",{children:"Weaknesses:"})," ",Te.weaknesses.join(", ")]})]}),a.jsx("hr",{style:{borderColor:"rgba(255,255,255,.12)",margin:"10px 0"}}),a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsx("div",{style:{fontWeight:800},children:"Rename"}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("input",{value:ae,onChange:w=>Ae(w.target.value),placeholder:"New name...",style:{flex:1}}),a.jsx("button",{onClick:$e,disabled:!ae.trim(),children:"Save"})]})]}),a.jsx("hr",{style:{borderColor:"rgba(255,255,255,.12)",margin:"10px 0"}}),a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8},children:[a.jsx("div",{style:{fontWeight:800},children:"Refit"}),a.jsxs("div",{style:{fontSize:12,opacity:.8},children:["Cost: ",a.jsx("b",{children:G*Ee})," (per +",G,"%)"]})]}),a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("input",{type:"number",value:G,onChange:w=>ve(Ra(Number(w.target.value||0),1,100)),style:{width:90}}),a.jsx("div",{style:{fontSize:12,opacity:.8},children:"Strength goes up (max 100%). May improve condition if 80%."})]}),a.jsxs("button",{type:"button",onClick:vt,disabled:C.strengthPct>=100||!Ke||!De(G*Ee),title:Ke?void 0:"Switch Viewer nation to match platoon nation to spend supplies.",children:["Refit (+",G,"%)"]})]}),a.jsx("hr",{style:{borderColor:"rgba(255,255,255,.12)",margin:"10px 0"}}),a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:800},children:"Upgrades"}),a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsxs("button",{type:"button",onClick:le,disabled:C.mpBase>=3||!Ke||!De(p),children:["Mobility +1 MP (cost ",p,")"," ",C.mpBase>=3?" MAX":""]}),a.jsxs("button",{type:"button",onClick:te,disabled:C.condition==="FRESH"||!Ke||!De(N),children:["Readiness +1 step (cost ",N,")"," ",C.condition==="FRESH"?" MAX":""]})]})]}),a.jsx("hr",{style:{borderColor:"rgba(255,255,255,.12)",margin:"10px 0"}}),a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:800},children:"Specialisms"}),a.jsxs("button",{type:"button",onClick:()=>je("RECON",P),disabled:fe("RECON")||!Ke||!De(P),children:["Recon (cost ",P,")"," ",fe("RECON")?" OWNED":""]}),a.jsxs("button",{type:"button",onClick:()=>je("ENGINEERS",se),disabled:fe("ENGINEERS")||!Ke||!De(se),children:["Engineers (cost ",se,")"," ",fe("ENGINEERS")?" OWNED":""]}),a.jsxs("button",{type:"button",onClick:()=>je("ARMOURED",re),disabled:fe("ARMOURED")||!Ke||!De(re),children:["Armoured (cost ",re,")"," ",fe("ARMOURED")?" OWNED":""]}),a.jsx("div",{style:{fontSize:12,opacity:.75},children:"Effects get wired into turn resolution next (Reconintel, Engineersfortifications, Armouredbreakthrough/logistics)."})]}),a.jsx("hr",{style:{borderColor:"rgba(255,255,255,.12)",margin:"10px 0"}}),a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:800},children:"Fortify"}),a.jsx("button",{type:"button",onClick:ge,disabled:!Ke||!C.entrenched&&!De($),children:C.entrenched?"Remove Entrenchment":`Entrench (cost ${$})`}),a.jsx("div",{style:{fontSize:12,opacity:.75},children:"Well apply entrenchment as a combat modifier when we wire battle resolution."})]}),a.jsx("div",{style:{fontSize:12,opacity:.75,marginTop:8},children:"Note: supplies are spent from the platoons nation  switch Viewer nation to match to apply upgrades/orders."})]}):a.jsx("div",{style:{fontSize:12,opacity:.8},children:"Click a platoon above to view details and actions."})]})]})]})}const eh={OFFENSE:"Offense",DEFENSE:"Defense",MOBILITY:"Mobility",ATTRITION:"Attrition",DECEPTION:"Deception",LOGISTICS:"Logistics"};function Xs(o){switch(o.type){case"ORDER_FLEXIBILITY":return`Order flexibility +${o.value}`;case"FORCED_MARCH_RISK_REDUCTION":return`Forced march risk ${o.value}%`;case"WITHDRAWAL_SUCCESS_BONUS":return`Withdrawal bonus +${o.value}`;case"DEFENSE_BONUS":return`Defense bonus +${o.value}`;case"OFFENSE_BONUS":return`Offense bonus +${o.value}`;case"SUPPLY_TOLERANCE":return`Supply tolerance +${o.value}`;case"RECON_INTEL_BONUS":return`Recon/intel bonus +${o.value}`;case"FORTIFY_BUILD_SPEED":return`Fortify build speed +${o.value}%`;case"MOMENTUM_GAIN_BONUS":return`Momentum gain +${o.value}`;case"DECEPTION_UNLOCK":return`Unlock action: ${o.actionId}`;case"DIPLOMACY_PRESSURE_MOD":return`Diplomacy pressure +${o.value}`;default:return"Unknown effect"}}function Om(o,f,u){return o===f?"ACTIVE":u?"AVAILABLE":"LOCKED"}function Nm(){const o=j(B=>B.viewerNation),f=j(B=>B.turnNumber),u=j(B=>B.phase),r=j(B=>B.nationDoctrineState),d=j(B=>B.nationResearchState),y=j(B=>B.switchDoctrineStance),b=j(B=>B.equipDoctrineTrait),v=j(B=>B.unequipDoctrineTrait),m=r[o],g=d[o],E=m?$s[m.activeStanceId]:null,x=u==="SETUP"||u==="ORDERS",L=m?.stanceLockedUntilTurn&&m.stanceLockedUntilTurn>f?m.stanceLockedUntilTurn:void 0,D=Y.useMemo(()=>m?m.equippedTraitIds.map(B=>Qs.find(V=>V.id===B)).filter(Boolean):[],[m]),Z=Y.useMemo(()=>D.reduce((B,V)=>B+(V?.slotCost??0),0),[D]),R=B=>{if(!m||B===m.activeStanceId||L)return!1;const V=$s[B];return V?V.requiredResearch?.length?V.requiredResearch.every(z=>g?.completedResearch.includes(z)):!0:!1},Q=B=>{if(!m||!g)return"Unavailable";const V=Qs.find(z=>z.id===B);if(!V)return"Unavailable";if(V.requiredResearch?.length){const z=V.requiredResearch.find(C=>!g.completedResearch.includes(C));if(z)return`Requires ${z}`}if(V.prerequisitesTraits?.length){const z=V.prerequisitesTraits.find(C=>!m.equippedTraitIds.includes(C));if(z)return`Requires trait ${z}`}return Z+V.slotCost>m.traitSlots?"Not enough trait slots":x?null:"Strategic phase only"};return a.jsxs("div",{style:{display:"grid",gap:16},children:[a.jsx("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12},children:a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsx("div",{style:{fontWeight:800,fontSize:16},children:"Active Doctrine"}),E?a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{fontWeight:700},children:E.name}),a.jsx("div",{style:{fontSize:12,opacity:.8},children:E.description}),a.jsxs("div",{style:{fontSize:12,opacity:.75},children:["Tags:"," ",E.tags.map(B=>eh[B]??B).join(", ")]}),a.jsx("ul",{style:{margin:0,paddingLeft:18,fontSize:12},children:E.effects.map((B,V)=>a.jsx("li",{children:Xs(B)},`${B.type}-${V}`))}),a.jsx("div",{style:{fontSize:12,opacity:.8},children:L?`Stance locked until turn ${L}.`:"Stance can be switched this turn."})]}):a.jsx("div",{style:{fontSize:12,opacity:.7},children:"No doctrine stance selected."})]})}),a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12,display:"grid",gap:12},children:[a.jsx("div",{style:{fontWeight:800},children:"Doctrine Stances"}),a.jsx("div",{style:{display:"grid",gap:10,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:_c.map(B=>{const V=R(B.id),z=Om(m?.activeStanceId??"",B.id,V);return a.jsxs(Ca,{title:B.name,subtitle:B.tags.map(C=>eh[C]??C).join(", "),description:B.description,status:z,selected:m?.activeStanceId===B.id,onSelect:V?()=>y(o,B.id):void 0,children:[a.jsx("ul",{style:{margin:0,paddingLeft:18,fontSize:12},children:B.effects.map((C,ae)=>a.jsx("li",{children:Xs(C)},`${B.id}-${ae}`))}),L&&z==="LOCKED"?a.jsxs("div",{style:{fontSize:12,opacity:.75},children:["Locked until turn ",L,"."]}):null]},B.id)})})]}),a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12,display:"grid",gap:12},children:[a.jsx("div",{style:{fontWeight:800},children:"Doctrine Traits"}),a.jsxs("div",{style:{fontSize:12,opacity:.8},children:["Trait slots: ",Z,"/",m?.traitSlots??0]}),a.jsxs("div",{style:{display:"grid",gap:10},children:[a.jsx("div",{style:{fontWeight:700,fontSize:13},children:"Equipped Traits"}),D.length?a.jsx("div",{style:{display:"grid",gap:10,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:D.map(B=>B?a.jsx(Ca,{title:B.name,subtitle:`Tier ${B.tier}  Slot cost ${B.slotCost}`,description:B.description,status:"ACTIVE",onSelect:()=>v(o,B.id),children:a.jsx("ul",{style:{margin:0,paddingLeft:18,fontSize:12},children:B.effects.map((V,z)=>a.jsx("li",{children:Xs(V)},`${B.id}-${z}`))})},B.id):null)}):a.jsx("div",{style:{fontSize:12,opacity:.7},children:"No traits equipped."})]}),a.jsxs("div",{style:{display:"grid",gap:10},children:[a.jsx("div",{style:{fontWeight:700,fontSize:13},children:"Available Traits"}),a.jsx("div",{style:{display:"grid",gap:10,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:Qs.map(B=>{const V=m?.equippedTraitIds.includes(B.id),z=Q(B.id),C=V?"ACTIVE":z?"LOCKED":"AVAILABLE";return a.jsxs(Ca,{title:B.name,subtitle:`Tier ${B.tier}  Slot cost ${B.slotCost}`,description:B.description,status:C,onSelect:!z&&!V?()=>b(o,B.id):void 0,children:[a.jsx("ul",{style:{margin:0,paddingLeft:18,fontSize:12},children:B.effects.map((ae,Ae)=>a.jsx("li",{children:Xs(ae)},`${B.id}-effect-${Ae}`))}),z?a.jsx("div",{style:{fontSize:12,color:"#ffd28a"},children:z}):null]},B.id)})})]})]})]})}function Rm({defaultOpen:o=!1,maxHeight:f=520}){const u=j(v=>v.turnLog),r=j(v=>v.territoryNameById),d=Y.useMemo(()=>u.slice(0,80),[u]),[y,b]=Y.useState(o);return a.jsxs("div",{style:{padding:12},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("h3",{style:{margin:0},children:"Turn Log"}),a.jsx("button",{type:"button",onClick:()=>b(v=>!v),children:y?"Collapse":"Expand"})]}),y?d.length===0?a.jsx("div",{style:{opacity:.8},children:"No entries yet."}):a.jsx("div",{style:{maxHeight:f,overflow:"auto",fontSize:12,lineHeight:1.5,marginTop:8},children:d.map(v=>a.jsxs("div",{style:{padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,.08)"},children:[a.jsx("b",{children:v.type}),"  ",new Date(v.ts).toLocaleTimeString()," "," ",dh(v.text,r)]},v.id))}):a.jsxs("div",{style:{fontSize:12,opacity:.7,marginTop:6},children:["Hidden  ",d.length," entries available."]})]})}const Dc=(o,f,u)=>Math.min(Math.max(o,f),u),Fs=o=>Dc(Math.trunc(o),0,2);function Am(o){return{contestId:o.id,winner:o.attackerFaction,attackerLossPct:15,defenderLossPct:25,attackerConditionHit:0,defenderConditionHit:1}}function Cm(){const o=j(R=>R.phase),f=j(R=>R.contestsByTerritory),u=j(R=>R.resolveBattles),r=j(R=>R.territoryNameById),d=j(R=>({nationDoctrineState:R.nationDoctrineState,nationResearchState:R.nationResearchState,nationUpgradesState:R.nationUpgradesState})),y=j(R=>R.viewerNation),b=j(R=>R.setViewerNation),v=j(R=>R.nationsEnabled),m=j(R=>R.customNations),g=Y.useMemo(()=>Object.values(f).filter(R=>R?.status==="BATTLE_PENDING"),[f]),[E,x]=Y.useState({}),L=Y.useMemo(()=>{const R=ml.map(C=>({id:C.id,name:C.name,flag:C.flag})),Q=m.map(C=>({id:C.id,name:C.name})),B=[...R,...Q],V=B.filter(C=>v[C.id]);if(V.length===0)return B;if(V.some(C=>C.id===y))return V;const z=B.find(C=>C.id===y);return z?[...V,z]:V},[m,v,y]),D=R=>{if(!L.length)return;const Q=Math.max(0,L.findIndex(V=>V.id===y)),B=L[(Q+R+L.length)%L.length];b(B.id)},Z=()=>{const R={};for(const Q of g)R[Q.id]=Am(Q);x(R)};return o!=="BATTLES"?a.jsxs("div",{style:{padding:12},children:[a.jsx("h3",{style:{marginTop:0},children:"Battles"}),a.jsx("div",{style:{opacity:.85},children:"Battles only appear when there are pending contests; otherwise the phase is skipped."}),a.jsxs("div",{style:{marginTop:10,display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[a.jsx("div",{style:{fontSize:12,opacity:.8},children:"Current player:"}),a.jsx("select",{value:y,onChange:R=>b(R.target.value),children:L.map(R=>a.jsx("option",{value:R.id,children:R.name},R.id))}),a.jsx("button",{type:"button",onClick:()=>D(-1),children:" Prev"}),a.jsx("button",{type:"button",onClick:()=>D(1),children:"Next "})]})]}):a.jsxs("div",{style:{padding:12},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"baseline",flexWrap:"wrap"},children:[a.jsxs("div",{children:[a.jsx("h3",{style:{marginTop:0,marginBottom:4},children:"Battles (GM)"}),a.jsxs("div",{style:{fontSize:12,opacity:.8},children:["Pending: ",a.jsx("b",{children:g.length})]})]}),a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[a.jsx("div",{style:{fontSize:12,opacity:.8},children:"Current player:"}),a.jsx("select",{value:y,onChange:R=>b(R.target.value),children:L.map(R=>a.jsx("option",{value:R.id,children:R.name},R.id))}),a.jsx("button",{type:"button",onClick:()=>D(-1),children:" Prev"}),a.jsx("button",{type:"button",onClick:()=>D(1),children:"Next "})]})]}),g.length===0?a.jsx("div",{style:{fontSize:12,opacity:.8,marginTop:10},children:"No pending battles."}):a.jsx("div",{style:{display:"grid",gap:10,marginTop:10},children:g.map(R=>{const Q=E[R.id]??{contestId:R.id,winner:R.attackerFaction,attackerLossPct:10,defenderLossPct:10,attackerConditionHit:0,defenderConditionHit:0},B=Rc(d,R.attackerFaction),V=Rc(d,R.defenderFaction),z=C=>{x(ae=>({...ae,[R.id]:{...Q,...C,contestId:R.id}}))};return a.jsxs("div",{style:{padding:10,borderRadius:10,border:"1px solid rgba(255,255,255,.12)"},children:[a.jsxs("div",{style:{fontWeight:800},children:[Nn(R.territoryId,r),":"," ",R.attackerFaction," vs ",R.defenderFaction]}),a.jsx("div",{style:{fontSize:12,opacity:.85,marginTop:4},children:R.status}),a.jsxs("div",{style:{fontSize:12,opacity:.8,marginTop:6},children:[a.jsxs("div",{children:["Attacker mods: Offense +",B.offenseBonus,"  Withdrawal +",B.withdrawalBonus]}),a.jsxs("div",{children:["Defender mods: Defense +",V.defenseBonus,"  Withdrawal +",V.withdrawalBonus]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,marginTop:10},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:12,opacity:.85},children:"Winner"}),a.jsxs("select",{value:Q.winner,onChange:C=>z({winner:C.target.value}),style:{width:"100%"},children:[a.jsxs("option",{value:R.attackerFaction,children:[R.attackerFaction," (attacker)"]}),a.jsxs("option",{value:R.defenderFaction,children:[R.defenderFaction," (defender)"]})]})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:12,opacity:.85},children:"Quick preset"}),a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[a.jsx("button",{type:"button",onClick:()=>z({attackerLossPct:10,defenderLossPct:25,attackerConditionHit:0,defenderConditionHit:1}),children:"Minor"}),a.jsx("button",{type:"button",onClick:()=>z({attackerLossPct:25,defenderLossPct:25,attackerConditionHit:1,defenderConditionHit:1}),children:"Bloody"}),a.jsx("button",{type:"button",onClick:()=>z({attackerLossPct:40,defenderLossPct:10,attackerConditionHit:2,defenderConditionHit:0}),children:"Pyrrhic"})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,marginTop:10},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:12,opacity:.85},children:"Attacker loss %"}),a.jsx("input",{type:"number",value:Q.attackerLossPct??0,onChange:C=>z({attackerLossPct:Dc(Number(C.target.value||0),0,100)}),style:{width:"100%"}})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:12,opacity:.85},children:"Defender loss %"}),a.jsx("input",{type:"number",value:Q.defenderLossPct??0,onChange:C=>z({defenderLossPct:Dc(Number(C.target.value||0),0,100)}),style:{width:"100%"}})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,marginTop:10},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:12,opacity:.85},children:"Attacker condition hit"}),a.jsxs("select",{value:Fs(Q.attackerConditionHit??0),onChange:C=>z({attackerConditionHit:Fs(Number(C.target.value))}),style:{width:"100%"},children:[a.jsx("option",{value:0,children:"0"}),a.jsx("option",{value:1,children:"1"}),a.jsx("option",{value:2,children:"2"})]})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:12,opacity:.85},children:"Defender condition hit"}),a.jsxs("select",{value:Fs(Q.defenderConditionHit??0),onChange:C=>z({defenderConditionHit:Fs(Number(C.target.value))}),style:{width:"100%"},children:[a.jsx("option",{value:0,children:"0"}),a.jsx("option",{value:1,children:"1"}),a.jsx("option",{value:2,children:"2"})]})]})]})]},R.id)})}),a.jsxs("div",{style:{display:"flex",gap:8,marginTop:12,flexWrap:"wrap"},children:[a.jsx("button",{type:"button",onClick:()=>u(Object.values(E)),disabled:g.length===0,children:"Resolve Battles"}),a.jsx("button",{type:"button",onClick:Z,disabled:g.length===0,children:"Auto-fill outcomes"}),a.jsx("button",{type:"button",onClick:()=>x({}),disabled:g.length===0,children:"Clear inputs"})]})]})}const Dm=["SUPPLY","INTEL","FORT","OPS"],Bm=(o,f,u)=>u>0||o.scope==="NATION"&&f.appliedCount>0?"COMPLETED":f.eligible?"AVAILABLE":"LOCKED",Mm=o=>{const f=o.cost.upkeepPerTurn?`  Upkeep ${o.cost.upkeepPerTurn}/turn`:"";return`Cost ${o.cost.points}${f}`},_m=o=>o.effects.map(f=>`${f.type} +${f.value}`).join(", "),zm=o=>o.scope==="NATION",Um=o=>o.scope==="TERRITORY",Lm=o=>o.scope==="FORCE";function wm(){const o=j(p=>p.viewerNation),f=j(p=>p.viewerMode),u=j(p=>p.selectedTerritoryId),r=j(p=>p.selectedPlatoonId),d=j(p=>p.territoryNameById),y=j(p=>p.ownerByTerritory),b=j(p=>p.platoonsById),v=j(p=>p.nationResearchState),m=j(p=>p.nationDoctrineState),g=j(p=>p.nationUpgradesState),E=j(p=>p.resourcePointsByNation),x=j(p=>p.ensureResourcePoints),L=j(p=>p.applyUpgrade),D=j(p=>p.removeUpgrade),[Z,R]=Y.useState("FORCE"),[Q,B]=Y.useState("ALL"),[V,z]=Y.useState([]),[C,ae]=Y.useState(null),[Ae,G]=Y.useState(null);Y.useEffect(()=>{x()},[x]);const ve=C??u??null,be=Ae??r??null,we=m[o],Oe=v[o],ue=g[o],Ue=E[o]??0,Pe=Y.useMemo(()=>{const p=Object.keys(d),N=p.filter($=>y[$]===o);return N.length?N:p},[y,d,o]),Xe=Y.useMemo(()=>Object.values(b).filter(p=>p.nation===o),[b,o]),M=ue?.applied??[],J=M.filter(zm),ie=M.filter(Um),de=M.filter(Lm),Ee=Y.useMemo(()=>!we||!Oe||!ue?[]:sh.filter(p=>p.scope===Z).map(p=>{const N=oh({upgrade:p,doctrineState:we,researchState:Oe,upgradesState:ue,resourcePoints:Ue,territoryId:ve,platoonId:be});return{upgrade:p,eligibility:N}}).filter(({upgrade:p,eligibility:N})=>{if(V.length){const P=p.tags??[];if(!V.some(se=>P.includes(se)))return!1}const $=p.scope==="TERRITORY"||p.scope==="FORCE"?N.appliedForTarget:N.appliedCount;return Q==="APPLIED"?$>0:Q==="ELIGIBLE"?N.eligible:Q==="LOCKED"?!N.eligible:!0}),[we,Oe,ue,Z,Ue,ve,be,Q,V]);return!we||!Oe||!ue?a.jsx("div",{children:"Loading upgrades state..."}):a.jsxs("div",{style:{display:"grid",gap:12},children:[a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0},children:"Upgrades"}),a.jsxs("div",{style:{fontSize:12,opacity:.75},children:["Resource points: ",a.jsx("b",{children:Ue})]})]}),a.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:["FORCE","TERRITORY","NATION"].map(p=>a.jsx("button",{type:"button",onClick:()=>R(p),style:{fontWeight:Z===p?700:500},children:p==="FORCE"?"Forces":p==="TERRITORY"?"Territories":"Nation"},p))}),Z==="TERRITORY"?a.jsxs("label",{style:{display:"grid",gap:4},children:[a.jsx("span",{style:{fontSize:12,opacity:.8},children:"Target territory"}),a.jsxs("select",{value:ve??"",onChange:p=>ae(p.target.value||null),children:[a.jsx("option",{value:"",children:"Select territory"}),Pe.map(p=>a.jsx("option",{value:p,children:d[p]??p},p))]})]}):null,Z==="FORCE"?a.jsxs("label",{style:{display:"grid",gap:4},children:[a.jsx("span",{style:{fontSize:12,opacity:.8},children:"Target platoon"}),a.jsxs("select",{value:be??"",onChange:p=>G(p.target.value||null),children:[a.jsx("option",{value:"",children:"Select platoon"}),Xe.map(p=>a.jsx("option",{value:p.id,children:p.name},p.id))]})]}):null,a.jsxs("div",{style:{display:"grid",gap:10,gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))"},children:[a.jsxs("label",{style:{display:"grid",gap:4},children:[a.jsx("span",{style:{fontSize:12,opacity:.8},children:"Show"}),a.jsx("select",{value:Q,onChange:p=>B(p.target.value),children:["ALL","ELIGIBLE","LOCKED","APPLIED"].map(p=>a.jsx("option",{value:p,children:p},p))})]}),a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsx("div",{style:{fontSize:12,opacity:.8},children:"Tags"}),a.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:Dm.map(p=>{const N=V.includes(p);return a.jsx("button",{type:"button",onClick:()=>z($=>N?$.filter(P=>P!==p):[...$,p]),style:{opacity:N?1:.6},children:p.toLowerCase()},p)})})]})]}),a.jsx("div",{style:{display:"grid",gap:10},children:Ee.length===0?a.jsx("div",{style:{fontSize:12,opacity:.7},children:"No upgrades match your filters."}):Ee.map(({upgrade:p,eligibility:N})=>{const $=p.scope==="TERRITORY"||p.scope==="FORCE"?N.appliedForTarget:N.appliedCount,P=Bm(p,N,$);return a.jsxs(Ca,{title:p.name,subtitle:Mm(p),description:p.description,status:P,children:[a.jsx("div",{style:{fontSize:12,opacity:.75},children:_m(p)}),p.requiredResearch?.length?a.jsxs("div",{style:{fontSize:12,opacity:.7},children:["Requires research: ",p.requiredResearch.join(", ")]}):null,p.requiredDoctrineStances?.length?a.jsxs("div",{style:{fontSize:12,opacity:.7},children:["Requires stance:"," ",p.requiredDoctrineStances.join(", ")]}):null,p.requiredDoctrineTraits?.length?a.jsxs("div",{style:{fontSize:12,opacity:.7},children:["Requires traits: ",p.requiredDoctrineTraits.join(", ")]}):null,N.reasons.length?a.jsx("div",{style:{fontSize:12,opacity:.6},children:N.reasons.join("  ")}):null,a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[a.jsx("button",{type:"button",disabled:!N.eligible,onClick:()=>L({nation:o,upgradeId:p.id,territoryId:ve,platoonId:be}),children:"Apply"}),f==="GM"&&$>0?a.jsx("button",{type:"button",onClick:()=>{const se=M.find(re=>re.defId!==p.id?!1:p.scope==="NATION"?re.scope==="NATION":p.scope==="TERRITORY"?re.scope==="TERRITORY"&&re.territoryId===ve:re.scope==="FORCE"&&re.platoonId===be);se&&D(o,se.id)},children:"Remove"}):null]})]},p.id)})}),a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12,display:"grid",gap:10},children:[a.jsx("h4",{style:{margin:0},children:"Applied upgrades"}),a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsx("div",{style:{fontWeight:600},children:"Nation"}),J.length===0?a.jsx("div",{style:{fontSize:12,opacity:.7},children:"None applied."}):J.map(p=>a.jsx("div",{style:{fontSize:12},children:Ci[p.defId]?.name??p.defId},p.id))]}),a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsx("div",{style:{fontWeight:600},children:"Territories"}),ie.length===0?a.jsx("div",{style:{fontSize:12,opacity:.7},children:"None applied."}):Object.entries(ie.reduce((p,N)=>(p[N.territoryId]=p[N.territoryId]??[],p[N.territoryId].push(N),p),{})).map(([p,N])=>a.jsxs("div",{style:{fontSize:12},children:[a.jsxs("b",{children:[d[p]??p,":"]})," ",N.map($=>Ci[$.defId]?.name??$.defId).join(", ")]},p))]}),a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsx("div",{style:{fontWeight:600},children:"Forces"}),de.length===0?a.jsx("div",{style:{fontSize:12,opacity:.7},children:"None applied."}):Object.entries(de.reduce((p,N)=>(p[N.platoonId]=p[N.platoonId]??[],p[N.platoonId].push(N),p),{})).map(([p,N])=>a.jsxs("div",{style:{fontSize:12},children:[a.jsxs("b",{children:[b[p]?.name??p,":"]})," ",N.map($=>Ci[$.defId]?.name??$.defId).join(", ")]},p))]})]})]})}function Hm({data:o}){const f=j(z=>z.mode),u=j(z=>z.commandHubExpanded),r=j(z=>z.setCommandHubExpanded),d=j(z=>z.viewerMode),y=j(z=>z.phase),b=j(z=>z.viewerNation),v=j(z=>z.viewerFaction),m=j(z=>z.customNations),g=j(z=>z.customs),E=f==="SETUP"||d==="GM",x=eo({viewerNation:b,viewerFaction:v,customNations:m,customs:g}),[L,D]=Y.useState("DASHBOARD"),Z=Y.useMemo(()=>[{id:"DASHBOARD",label:"Dashboard"},{id:"DOCTRINE",label:"Doctrine"},{id:"UPGRADES",label:"Upgrades"},{id:"RESOLUTION",label:"Resolution"},{id:"BATTLES",label:"Battles"},{id:"PLATOONS",label:"Platoons"},{id:"INTEL",label:"Intel/Owners",gmOnly:!0},{id:"LOG",label:"Log"}],[]),R=Y.useMemo(()=>({SETUP:["DASHBOARD","DOCTRINE","UPGRADES","LOG"],ORDERS:["DASHBOARD","DOCTRINE","UPGRADES","PLATOONS","LOG"],RESOLUTION:["DASHBOARD","RESOLUTION","LOG"],BATTLES:["DASHBOARD","BATTLES","LOG"]}),[]),Q=Y.useMemo(()=>(E?Z:Z.filter(C=>(R[y]??[]).includes(C.id))).filter(C=>!C.gmOnly||E),[E,y,R,Z]),B=Q.some(z=>z.id===L)?L:Q[0]?.id??"DASHBOARD",V=(()=>{switch(B){case"DASHBOARD":return E?a.jsx(jc,{message:"GM tools are centralized in the left panel."}):u?a.jsx(jc,{message:"Command Hub is expanded in the center panel."}):a.jsx(Cc,{data:o,variant:"full"});case"RESOLUTION":return a.jsx(Gm,{});case"DOCTRINE":return a.jsx(Nm,{});case"UPGRADES":return a.jsx(wm,{});case"BATTLES":return E?a.jsx(Cm,{}):a.jsx(ph,{phase:y});case"LOG":return a.jsx(Tm,{data:o,tab:B});case"INTEL":return E?a.jsx(jc,{message:"Intel controls are available in the GM tools panel."}):a.jsx("div",{children:"Not available in PLAYER mode."});case"PLATOONS":return a.jsx(jm,{});default:return null}})();return a.jsxs("div",{style:{padding:12,border:`1px solid ${x}55`,borderRadius:8,background:`linear-gradient(135deg, ${x}12, rgba(0,0,0,0))`},children:[a.jsx(Im,{}),a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:10,alignItems:"center"},children:[Q.map(z=>a.jsx("button",{onClick:()=>D(z.id),style:{opacity:B===z.id?1:.75,fontWeight:B===z.id?800:600},children:z.label},z.id)),!E&&B==="DASHBOARD"?a.jsx("button",{type:"button",onClick:()=>r(!u),style:{marginLeft:"auto"},children:u?"Collapse Hub":"Expand Hub"}):null]}),a.jsx("div",{style:{border:"1px solid rgba(255,255,255,.10)",borderRadius:10,padding:10},children:V}),a.jsx("div",{style:{marginTop:12,borderTop:"1px solid rgba(255,255,255,.12)"},children:a.jsx(Rm,{defaultOpen:!1,maxHeight:260})})]})}function Im(){const o=j(E=>E.selectedTerritoryId),f=j(E=>E.ownerByTerritory),u=j(E=>E.territoryNameById),r=j(E=>E.viewerNation),d=j(E=>E.viewerMode),y=j(E=>E.mode),b=j(E=>E.intelByTerritory),v=y==="SETUP"||d==="GM",m=o?v?"FULL":b[o]?.[r]??"NONE":null,g=o?f[o]??"neutral":null;return a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",gap:8},children:[a.jsx("div",{style:{fontWeight:900},children:"Selected Territory"}),a.jsx("div",{style:{fontSize:12,opacity:.75},children:v?"GM view":`Player view (${r})`})]}),a.jsxs("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:10,background:"rgba(0,0,0,.10)"},children:[a.jsxs("div",{children:[a.jsx("b",{children:"Territory:"})," ",Nn(o,u)]}),o?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{marginTop:4},children:[a.jsx("b",{children:"Intel:"})," ",m]}),a.jsxs("div",{style:{marginTop:4},children:[a.jsx("b",{children:"Owner:"})," ",String(g)]})]}):a.jsx("div",{style:{marginTop:6,fontSize:12,opacity:.8},children:"Click a territory on the map to populate details and platoon controls."})]})]})}function Gm(){const o=j(D=>D.viewerNation),f=j(D=>D.contestsByTerritory),u=j(D=>D.locksByTerritory),r=j(D=>D.turnLog),d=j(D=>D.territoryNameById),y=Y.useMemo(()=>Object.values(f).filter(Boolean).filter(D=>D?.attackerFaction===o||D?.defenderFaction===o),[f,o]),b=Y.useMemo(()=>y.filter(D=>D?.status==="BATTLE_PENDING"),[y]),v=Y.useMemo(()=>r.slice(0,5),[r]),[m,g]=Y.useState({}),[E,x]=Y.useState({}),L=(D,Z)=>{g(R=>({...R,[D]:Z}))};return a.jsxs("div",{style:{padding:16,display:"grid",gap:12},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{margin:0},children:"Resolution Phase"}),a.jsxs("div",{style:{opacity:.8},children:["Review intel, outcomes, and choose battle stances for engagements involving ",a.jsx("b",{children:o}),"."]})]}),a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12},children:[a.jsx("h3",{style:{marginTop:0},children:"Outcome Feed"}),v.length?a.jsx("ul",{style:{margin:0,paddingLeft:18},children:v.map(D=>a.jsxs("li",{children:[a.jsx("b",{children:D.type})," "," ",dh(D.text,d)]},D.id))}):a.jsx("div",{style:{fontSize:12,opacity:.7},children:"No outcomes logged yet."})]}),a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12},children:[a.jsx("h3",{style:{marginTop:0},children:"Battle Initiation"}),y.length?a.jsx("div",{style:{display:"grid",gap:10},children:y.map(D=>{const Z=D?.territoryId?u[D.territoryId]:void 0,R=D?.status??"OPEN",Q=R==="BATTLE_PENDING",B=m[D?.id??""]??"hold",z=E[D?.id??""]===B;return a.jsxs("div",{style:{border:`1px solid ${Q?"rgba(239,68,68,.5)":"rgba(255,255,255,.12)"}`,borderRadius:10,padding:10,background:Q?"rgba(239,68,68,.08)":"rgba(0,0,0,.15)",display:"grid",gap:6},children:[a.jsxs("div",{style:{fontWeight:700},children:[Nn(D?.territoryId,d)," "," ",D?.attackerFaction," vs ",D?.defenderFaction]}),a.jsxs("div",{style:{fontSize:12,opacity:.8},children:["Status: ",a.jsx("b",{children:R})," ",Z?" Territory locked for combat":null]}),a.jsxs("label",{style:{display:"grid",gap:4},children:[a.jsx("span",{style:{fontSize:12,opacity:.7},children:"Battle stance"}),a.jsxs("select",{value:B,onChange:C=>L(D?.id??"",C.target.value),children:[a.jsx("option",{value:"hold",children:"Hold (keep fighting)"}),Q?null:a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"recon",children:"Recon"}),a.jsx("option",{value:"attack",children:"Attack"})]}),a.jsx("option",{value:"retreat",children:"Retreat (fall back)"})]})]}),a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[a.jsx("button",{type:"button",onClick:()=>x(C=>({...C,[D?.id??""]:B})),disabled:z,children:z?"Stance confirmed":"Confirm stance"}),a.jsx("span",{style:{fontSize:12,opacity:.7},children:z?"Confirmed selection locked in for this turn.":"Selection needs confirmation before proceeding."})]}),Q?a.jsx("div",{style:{fontSize:12,opacity:.75},children:"Ongoing battle requires a confirmed stance before the next turn."}):null]},D?.id)})}):a.jsx(ph,{phase:"RESOLUTION"})]}),b.length===0?a.jsx("div",{style:{fontSize:12,opacity:.7},children:"No ongoing battles requiring action. Await other factions to resolve engagements."}):null]})}function ph({phase:o}){return a.jsxs("div",{style:{fontSize:12,opacity:.7},children:["No actionable items for this phase (",o,"). Waiting on other players."]})}function jc({message:o}){return a.jsx("div",{style:{padding:16,border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,fontSize:13,opacity:.85},children:o})}function qm(o){const{data:f,ownerByTerritory:u,viewerNation:r,territoryId:d}=o;if(!f)return!1;for(const[y,b]of Object.entries(u)){if(b!==r)continue;const v=f.territoryById.get(y);if(v&&(v.adj??[]).includes(d))return!0}return!1}function Ym(o){const{viewerMode:f,viewerNation:u,territoryId:r,ownerByTerritory:d,intelByTerritory:y,data:b}=o;if(f==="GM"||(d[r]??"neutral")===u)return"FULL";const m=y[r]?.[u]??"NONE";return m!=="NONE"?m:qm({data:b,ownerByTerritory:d,viewerNation:u,territoryId:r})?"KNOWN":"NONE"}const Ps={allies:"#2563eb",axis:"#dc2626",ussr:"#f97316"},Bc="#6b7280",th="rgba(255,255,255,.55)",nh="1.25";function lh(o,f){if(o==="neutral")return Bc;if(o==="contested")return"#a855f7";const u=o.startsWith("custom:")?f.find(d=>d.id===o):null,r=u?.defaultFaction??Lt[o]?.defaultFaction;return u?.color?u.color:r&&r in Ps?Ps[r]:Bc}function km(o,f){return o.startsWith("custom:")?f.find(u=>u.id===o)?.defaultFaction:Lt[o]?.defaultFaction}function ih(o,f){const u=km(o,f);if(o.startsWith("custom:")){const r=f.find(d=>d.id===o);if(r?.color)return r.color}return u&&u in Ps?Ps[u]:Bc}function Vm(o,f){return o==="SETUP"||f==="GM"}function Xm(o,f,u){return u||f?{showName:!0,showOwner:!0,showCombat:!0}:{showName:o!=="NONE",showOwner:o==="SCOUTED"||o==="FULL",showCombat:o==="FULL"}}function gh(o){const f=o.getAttribute("viewBox");if(f){const[r,d,y,b]=f.split(/\s+/).map(Number);if([r,d,y,b].every(Number.isFinite))return{x:r,y:d,w:y,h:b}}const u=o.getBBox();return{x:u.x,y:u.y,w:u.width,h:u.height}}function Fm(o,f){o.setAttribute("viewBox",`${f.x} ${f.y} ${f.w} ${f.h}`)}function Qm(o){o.style.background="transparent";const f=gh(o),u=Array.from(o.querySelectorAll("rect"));for(const r of u){const d=(r.getAttribute("fill")||"").toLowerCase(),y=r.getAttribute("width")||"",b=r.getAttribute("height")||"",v=Number(r.getAttribute("x")||"0"),m=Number(r.getAttribute("y")||"0"),g=Number(y),E=Number(b),x=y==="100%"&&b==="100%"||Number.isFinite(g)&&Number.isFinite(E)&&g>=f.w*.95&&E>=f.h*.95,L=Math.abs(v-f.x)<f.w*.05&&Math.abs(m-f.y)<f.h*.05;x&&L&&(d==="#fff"||d==="#ffffff"||d==="white"||d==="rgb(255,255,255)")&&(r.setAttribute("fill","none"),r.style.fill="none",r.style.pointerEvents="none")}}function Zm(o,f,u){const r=gh(o);let d={...r};const y=R=>{d=R,Fm(o,d),u?.(d)},b=R=>{R.preventDefault();const Q=f.getBoundingClientRect(),B=R.clientX-Q.left,V=R.clientY-Q.top,z=d.x+B/Q.width*d.w,C=d.y+V/Q.height*d.h,Ae=R.deltaY<0?.9:1.1,G=d.w*Ae,ve=d.h*Ae,be=r.w*.25,we=r.w*2.5,Oe=Math.min(Math.max(G,be),we),ue=Oe/G*ve,Ue=z-(z-d.x)*Oe/d.w,Pe=C-(C-d.y)*ue/d.h;y({x:Ue,y:Pe,w:Oe,h:ue})};f.addEventListener("wheel",b,{passive:!1});let v=!1,m={x:0,y:0},g={...d};const E=R=>{(R.button===1||R.button===0&&R.shiftKey)&&(v=!0,m={x:R.clientX,y:R.clientY},g={...d},f.style.cursor="grabbing",R.preventDefault())},x=R=>{if(!v)return;const Q=f.getBoundingClientRect(),B=R.clientX-m.x,V=R.clientY-m.y,z=B/Q.width*g.w,C=V/Q.height*g.h;y({x:g.x-z,y:g.y-C,w:g.w,h:g.h})},L=()=>{v&&(v=!1,f.style.cursor="default")};return f.addEventListener("mousedown",E),window.addEventListener("mousemove",x),window.addEventListener("mouseup",L),{api:{reset:()=>y({...r}),fit:()=>{const R=o.getBBox();y({x:R.x,y:R.y,w:R.width,h:R.height})},zoom:R=>{const Q=R==="in"?.9:1.1,B=d.x+d.w/2,V=d.y+d.h/2;y({x:B-d.w*Q/2,y:V-d.h*Q/2,w:d.w*Q,h:d.h*Q})},set:R=>y(R),get:()=>({...d}),getBase:()=>({...r})},cleanup:()=>{f.removeEventListener("wheel",b),f.removeEventListener("mousedown",E),window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",L)}}}function Km(){const o=Y.useRef(null),[f,u]=Y.useState(null),[r,d]=Y.useState(null),[y,b]=Y.useState(null),v=Y.useRef(null),m=Y.useRef(!1),g=j(H=>H.mode),E=j(H=>H.viewerMode),x=j(H=>H.viewerNation),L=j(H=>H.phase),D=j(H=>H.activeTheatres),Z=j(H=>H.selectedTerritoryId),R=j(H=>H.selectedPlatoonId),Q=j(H=>H.setSelectedTerritory),B=j(H=>H.orderDraftType),V=j(H=>H.turnNumber),z=j(H=>H.setPlatoonOrderMove),C=j(H=>H.setPlatoonOrderHold),ae=j(H=>H.setPlatoonOrderRecon),Ae=j(H=>H.setPlatoonOrderIntel),G=j(H=>H.setOrderDraftType),ve=j(H=>H.intelByTerritory),be=j(H=>H.ownerByTerritory),we=j(H=>H.locksByTerritory),Oe=j(H=>H.contestsByTerritory),ue=j(H=>H.platoonsById),Ue=j(H=>H.customNations),Pe=j(H=>H.customs),Xe=j(H=>H.homelandsByNation),M=Vm(g,E),J=Y.useMemo(()=>["WE","EE","NA","PA"].filter(H=>D[H]).join("|")||"NONE",[D]),ie=Y.useMemo(()=>`war.map.vb.${J}`,[J]),{allowedShapeIds:de,shapeToTerritory:Ee,territoriesById:p}=Y.useMemo(()=>{const H=new Set,ne=new Map,le=new Map;if(y){for(const te of y.raw.theatres)if(D[te.theatreId])for(const ee of te.territories){const fe={id:ee.id,name:ee.name,theatreId:te.theatreId,theatreTitle:te.title,shapeRefs:ee.shapeRefs??[]};le.set(fe.id,fe);for(const Te of fe.shapeRefs)H.add(Te),ne.set(Te,fe)}}return{allowedShapeIds:H,shapeToTerritory:ne,territoriesById:le}},[D,y]),N=Y.useMemo(()=>{const H=new Map;if(!y?.raw.regions)return H;for(const ne of y.raw.regions)for(const le of ne.territories??[])H.set(le,ne.territories??[]);return H},[y]),$=Y.useMemo(()=>{const H=new Map;if(!y)return H;for(const ne of y.raw.theatres){if(!D[ne.theatreId])continue;const le=ne.adjacency??{};for(const[te,ee]of Object.entries(le)){const fe=H.get(te)??new Set;for(const Te of ee.land??[])fe.add(Te);for(const Te of ee.sea??[])fe.add(Te);H.set(te,fe)}}return H},[y,D]),P=Y.useCallback(H=>{for(const[ne,le]of Object.entries(be)){if(le!==x)continue;if($.get(ne)?.has(H))return!0}return!1},[$,be,x]),se=Y.useCallback(H=>{if(M||(be[H]??"neutral")===x)return"FULL";const le=ve[H]?.[x]??"NONE";return le!=="NONE"?le:P(H)?"KNOWN":"NONE"},[M,be,x,ve,P]),re=Y.useCallback(H=>{H.querySelectorAll("path").forEach(ne=>{ne.style.opacity="1",ne.style.stroke=th,ne.style.strokeWidth=nh,ne.style.vectorEffect="non-scaling-stroke",ne.style.cursor="default",ne.style.pointerEvents="none"})},[]),Se=Y.useCallback(H=>{re(H);const ne=Xe?.[x]??null;de.forEach(le=>{const te=H.querySelector(`#${CSS.escape(le)}`);if(!te)return;if(!te.dataset.baseFill){const Ne=te.getAttribute("fill");te.dataset.baseFill=Ne&&Ne!=="none"?Ne:"#444"}const ee=Ee.get(le);if(!ee)return;const fe=se(ee.id),Te=M||fe!=="NONE";if(te.style.stroke=th,te.style.strokeWidth=nh,te.style.vectorEffect="non-scaling-stroke",te.style.cursor=Te?"pointer":"default",te.style.pointerEvents=Te?"auto":"none",fe==="NONE")te.style.fillOpacity="0.78",te.style.fill="#000";else if(fe==="KNOWN")te.style.fillOpacity="0.45",te.style.fill="#111";else if(fe==="SCOUTED")te.style.fillOpacity="0.65",te.style.fill=te.dataset.baseFill;else{const Ne=be[ee.id]??"neutral";te.style.fillOpacity="0.9",te.style.fill=lh(Ne,Ue)}ne&&ee.id===ne&&(te.style.opacity="1",te.style.stroke=M?"#ffffff":"rgba(255,255,255,.85)",te.style.strokeWidth="2.6",te.style.vectorEffect="non-scaling-stroke",te.style.pointerEvents="auto",te.style.cursor="pointer")})},[de,re,Ee,se,be,Ue,Xe,x,M]),ze=Y.useCallback((H,ne)=>{const le=se(ne.id);if(!M&&le==="NONE")return;const te=N.get(ne.id);te?.length&&te.forEach(ee=>{const fe=p.get(ee);fe&&fe.shapeRefs.forEach(Te=>{const Ne=H.querySelector(`#${CSS.escape(Te)}`);Ne&&(Ne.style.stroke="rgba(251,191,36,.85)",Ne.style.strokeWidth="5.2",Ne.style.vectorEffect="non-scaling-stroke")})}),ne.shapeRefs.forEach(ee=>{const fe=H.querySelector(`#${CSS.escape(ee)}`);fe&&(fe.style.opacity="1",fe.style.stroke="#ffffff",fe.style.strokeWidth="2",fe.style.vectorEffect="non-scaling-stroke")})},[se,M,N,p]),De=Y.useMemo(()=>{if(L!=="ORDERS"||!B||!R||!ue[R])return[];const H=ue[R];return H?(B==="HOLD"?[H.territoryId]:Array.from($.get(H.territoryId)??new Set)).map(le=>p.get(le)).filter(Boolean):[]},[$,B,L,ue,R,p]),Ke=Y.useMemo(()=>new Set(De.map(H=>H.id)),[De]),X=Y.useRef({phase:L,orderDraftType:B,selectedPlatoonId:R,orderTargetIds:Ke,turnNumber:V,platoonsById:ue});Y.useEffect(()=>{X.current={phase:L,orderDraftType:B,selectedPlatoonId:R,orderTargetIds:Ke,turnNumber:V,platoonsById:ue}},[L,B,R,Ke,V,ue]);const pe=Y.useCallback(H=>{if(!De.length||!B)return;const ne=B==="MOVE"?"#38bdf8":B==="HOLD"?"#f59e0b":B==="RECON"?"#34d399":"#a855f7";De.forEach(le=>{le.shapeRefs.forEach(te=>{const ee=H.querySelector(`#${CSS.escape(te)}`);ee&&(ee.style.stroke=ne,ee.style.strokeWidth="2.2",ee.style.vectorEffect="non-scaling-stroke")})})},[B,De]),We=Y.useCallback((H,ne)=>{if(Se(H),pe(H),ne){const le=p.get(ne);le&&ze(H,le)}},[Se,pe,ze,p]),Le=Y.useCallback((H,ne)=>{let le=H.querySelector(`#${CSS.escape(ne)}`);return le||(le=document.createElementNS("http://www.w3.org/2000/svg","g"),le.setAttribute("id",ne),le.style.pointerEvents="none",H.appendChild(le)),le},[]),mt=Y.useRef(new Map),$e=Y.useCallback((H,ne)=>{const le=mt.current.get(ne.id);if(le)return le;const te=[];if(ne.shapeRefs.forEach(Te=>{const Ne=H.querySelector(`#${CSS.escape(Te)}`);Ne&&te.push(Ne.getBBox())}),!te.length)return null;const ee=te.reduce((Te,Ne)=>({x:Te.x+Ne.x+Ne.width/2,y:Te.y+Ne.y+Ne.height/2}),{x:0,y:0}),fe={x:ee.x/te.length,y:ee.y/te.length};return mt.current.set(ne.id,fe),fe},[]),vt=Y.useCallback((H,ne)=>{if(H===ne)return[H];const le=[H],te=new Map([[H,null]]);for(;le.length;){const ee=le.shift(),fe=$.get(ee);if(fe){for(const Te of fe)if(!te.has(Te)){if(te.set(Te,ee),Te===ne){const Ne=[ne];let je=ee;for(;je;)Ne.push(je),je=te.get(je)??null;return Ne.reverse()}le.push(Te)}}}return null},[$]),oe=Y.useCallback(H=>{const ne=Le(H,"platoon-markers"),le=Le(H,"supply-lines"),te=Le(H,"homeland-markers");ne.innerHTML="",le.innerHTML="",te.innerHTML="",mt.current.clear();const ee=new Map;Object.values(ue).filter(je=>{if(M||je.nation===x)return!0;const ge=Ym({viewerMode:E,viewerNation:x,territoryId:je.territoryId,ownerByTerritory:be,intelByTerritory:ve,data:y});return ge==="SCOUTED"||ge==="FULL"}).forEach(je=>{const ge=ee.get(je.territoryId)??[];ge.push(je.nation),ee.set(je.territoryId,ge)});const Te=Xe?.[x]??null,Ne=R?ue[R]?.territoryId??null:null;if(Te){const je=p.get(Te);if(je){const ge=$e(H,je);if(ge){const w=ih(x,Ue),he=document.createElementNS("http://www.w3.org/2000/svg","circle");he.setAttribute("cx",ge.x.toString()),he.setAttribute("cy",ge.y.toString()),he.setAttribute("r","6"),he.setAttribute("fill",w),he.setAttribute("stroke","rgba(15,23,42,.9)"),he.setAttribute("stroke-width","1.2"),te.appendChild(he);const Ye=document.createElementNS("http://www.w3.org/2000/svg","text");Ye.setAttribute("x",ge.x.toString()),Ye.setAttribute("y",(ge.y+2).toString()),Ye.setAttribute("text-anchor","middle"),Ye.setAttribute("font-size","5"),Ye.setAttribute("font-weight","700"),Ye.setAttribute("fill","#0f172a"),Ye.textContent="H",te.appendChild(Ye)}}}ee.forEach((je,ge)=>{const w=p.get(ge);if(!w)return;const he=$e(H,w);if(!he)return;if(Ne&&Ne===ge){const ke=document.createElementNS("http://www.w3.org/2000/svg","circle");ke.setAttribute("cx",he.x.toString()),ke.setAttribute("cy",he.y.toString()),ke.setAttribute("r","6"),ke.setAttribute("fill","none"),ke.setAttribute("stroke","#facc15"),ke.setAttribute("stroke-width","1.2"),ne.appendChild(ke)}const Ye=document.createElementNS("http://www.w3.org/2000/svg","circle");Ye.setAttribute("cx",he.x.toString()),Ye.setAttribute("cy",he.y.toString()),Ye.setAttribute("r","3"),Ye.setAttribute("fill",lh(je[0],Ue)),Ye.setAttribute("stroke","#111827"),Ye.setAttribute("stroke-width","0.5"),ne.appendChild(Ye);const ot=document.createElementNS("http://www.w3.org/2000/svg","text");if(ot.setAttribute("x",he.x.toString()),ot.setAttribute("y",(he.y+1).toString()),ot.setAttribute("text-anchor","middle"),ot.setAttribute("font-size","3"),ot.setAttribute("fill","#f8fafc"),ot.textContent=String(je.length),ne.appendChild(ot),Te&&je.includes(x)){const ke=vt(ge,Te);if(ke&&ke.length>1){const at=ke.map(Re=>{const Wt=p.get(Re);return Wt?$e(H,Wt):null}).filter(Boolean);if(at.length>1){const Re=document.createElementNS("http://www.w3.org/2000/svg","polyline");Re.setAttribute("points",at.map(Wt=>`${Wt.x},${Wt.y}`).join(" ")),Re.setAttribute("fill","none"),Re.setAttribute("stroke","rgba(145, 224, 162, 0.94)"),Re.setAttribute("stroke-width","1.4"),Re.setAttribute("stroke-dasharray","4 4"),le.appendChild(Re)}}}})},[vt,Ue,y,Le,$e,M,Xe,ve,be,ue,R,p,E,x]),yt=Y.useCallback(H=>{const ne=Array.from(de).map(ge=>H.querySelector(`#${CSS.escape(ge)}`)).filter(Boolean);if(ne.length===0)return;let le=ne[0].getBBox(),te=le.x,ee=le.y,fe=le.x+le.width,Te=le.y+le.height;for(let ge=1;ge<ne.length;ge++)le=ne[ge].getBBox(),te=Math.min(te,le.x),ee=Math.min(ee,le.y),fe=Math.max(fe,le.x+le.width),Te=Math.max(Te,le.y+le.height);const Ne=20,je={x:te-Ne,y:ee-Ne,w:fe-te+Ne*2,h:Te-ee+Ne*2};v.current?.set(je)},[de]);return Y.useEffect(()=>{zc().then(H=>b(H)).catch(H=>console.error("Failed to load theatres_all.json",H))},[]),Y.useEffect(()=>{if(!y)return;const H=o.current;if(!H)return;const ne=uh("mapchart_world.svg");let le=null;return fetch(ne).then(te=>te.text()).then(te=>{if(!H)return;H.innerHTML=te;const ee=H.querySelector("svg");if(!ee)return;ee.setAttribute("width","100%"),ee.setAttribute("height","100%"),ee.setAttribute("preserveAspectRatio","xMidYMid meet"),ee.style.display="block",Qm(ee),Se(ee),oe(ee);const{api:fe,cleanup:Te}=Zm(ee,H,ge=>{u(ge);try{localStorage.setItem(ie,JSON.stringify(ge))}catch{}});v.current=fe,le=Te;const Ne=(()=>{try{const ge=localStorage.getItem(ie);if(!ge)return null;const w=JSON.parse(ge);return w&&[w.x,w.y,w.w,w.h].every(he=>typeof he=="number"&&Number.isFinite(he))?w:null}catch{return null}})();Ne?fe.set(Ne):(yt(ee),m.current||(m.current=!0,fe.zoom("in"),fe.zoom("in"))),de.forEach(ge=>{const w=ee.querySelector(`#${CSS.escape(ge)}`);if(!w)return;const he=at=>{at.stopPropagation();const Re=Ee.get(ge);if(!Re)return;const Wt=se(Re.id);if(!M&&Wt==="NONE")return;const xt=X.current;if(xt.phase==="ORDERS"&&xt.orderDraftType&&xt.selectedPlatoonId&&xt.orderTargetIds.has(Re.id)){const k=xt.platoonsById[xt.selectedPlatoonId];k&&(xt.orderDraftType==="HOLD"?C(xt.turnNumber,k.faction,k.id):xt.orderDraftType==="RECON"?ae(xt.turnNumber,k.faction,k.id,[Re.id]):xt.orderDraftType==="INTEL"?Ae(xt.turnNumber,k.faction,k.id,Re.id):xt.orderDraftType==="MOVE"&&z(xt.turnNumber,k.faction,k.id,[Re.id],!1),G(null))}Q(Re.id),We(ee,Re.id)},Ye=at=>{const Re=Ee.get(ge);Re&&d({tid:Re.id,x:at.clientX,y:at.clientY})},ot=at=>{d(Re=>Re?{...Re,x:at.clientX,y:at.clientY}:null)},ke=()=>d(null);w.addEventListener("click",he),w.addEventListener("mouseenter",Ye),w.addEventListener("mousemove",ot),w.addEventListener("mouseleave",ke),w.__cleanup=()=>{w.removeEventListener("click",he),w.removeEventListener("mouseenter",Ye),w.removeEventListener("mousemove",ot),w.removeEventListener("mouseleave",ke)}});const je=()=>{Q(null),We(ee,null)};ee.addEventListener("click",je),ee.__cleanupAll=()=>{ee.removeEventListener("click",je),ee.querySelectorAll("path").forEach(ge=>{const w=ge.__cleanup;typeof w=="function"&&w()})}}).catch(te=>console.error("Failed to load SVG",te)),()=>{const te=H.querySelector("svg");te?.__cleanupAll&&te.__cleanupAll(),le?.(),v.current=null}},[y,J,ie,de,Ee,M,Se,yt,oe,se,C,Ae,z,ae,G,Q,We]),Y.useEffect(()=>{const H=o.current?.querySelector("svg");H&&We(H,Z)},[Z,We]),Y.useEffect(()=>{const H=o.current?.querySelector("svg");H&&oe(H)},[ue,Xe,oe]),a.jsxs("div",{style:{position:"relative",height:"100%",minHeight:0},children:[a.jsx("div",{ref:o,style:{height:"100%",minHeight:0,background:"#3a372f",overflow:"hidden",position:"relative"}}),a.jsxs("div",{style:{position:"absolute",top:10,left:10,display:"flex",gap:6,padding:8,background:"rgba(0,0,0,.35)",border:"1px solid rgba(255,255,255,.15)",borderRadius:8,zIndex:5},children:[a.jsx("button",{onClick:()=>v.current?.zoom("in"),children:"+"}),a.jsx("button",{onClick:()=>v.current?.zoom("out"),children:"-"}),a.jsx("button",{onClick:()=>v.current?.fit(),children:"Fit"}),a.jsx("button",{onClick:()=>v.current?.reset(),children:"Reset"}),f&&a.jsxs("div",{style:{marginLeft:10,fontSize:11,opacity:.85,color:"#fff"},children:["VB ",f.w.toFixed(0),"",f.h.toFixed(0)]})]}),a.jsxs("div",{style:{position:"absolute",top:10,right:10,padding:"6px 8px",background:"rgba(0,0,0,.35)",border:"1px solid rgba(255,255,255,.15)",borderRadius:8,fontSize:12,opacity:.9,zIndex:5,pointerEvents:"none",color:"#fff"},children:["Pan: hold ",a.jsx("b",{children:"Shift"})," + drag (or middle mouse). Wheel to zoom."]}),r&&(()=>{const H=r.tid,ne=p.get(H);if(!ne)return null;const le=be[H]??"neutral",te=le===x,ee=!!we[H],fe=Oe[H],Te=se(H),Ne=Xm(Te,te,M),je=(Xe?.[x]??null)===H,ge=ih(x,Ue);return a.jsxs("div",{style:{position:"fixed",left:r.x+12,top:r.y+12,zIndex:20,background:"rgba(0,0,0,.80)",border:`1px solid ${je?ge:"rgba(255,255,255,.18)"}`,boxShadow:je?"0 0 0 2px rgba(0,0,0,.2)":void 0,borderRadius:10,padding:"8px 10px",fontSize:12,maxWidth:300,pointerEvents:"none",color:"#fff"},children:[a.jsx("div",{style:{fontWeight:800,marginBottom:4},children:Ne.showName?a.jsxs(a.Fragment,{children:[ne.name," ",a.jsxs("span",{style:{opacity:.75},children:["(",H,")"]})]}):a.jsx(a.Fragment,{children:"Unknown territory"})}),a.jsxs("div",{style:{opacity:.9},children:[a.jsx("b",{children:"Intel:"})," ",Te]}),Ne.showOwner&&a.jsxs("div",{style:{opacity:.9},children:[a.jsx("b",{children:"Owner:"})," ",pn(le,Ue)]}),Ne.showCombat&&ee&&a.jsxs("div",{style:{opacity:.95,marginTop:4},children:[a.jsx("b",{children:"Locked:"})," COMBAT"]}),Ne.showCombat&&fe&&a.jsxs("div",{style:{opacity:.95,marginTop:4},children:[a.jsx("b",{children:"Contest:"})," ",Gt(fe.attackerFaction,Pe)," vs"," ",Gt(fe.defenderFaction,Pe)," (",fe.status,")"]}),je&&a.jsx("div",{style:{marginTop:6,fontSize:11,opacity:.9},children:a.jsx("b",{style:{color:ge},children:"Homeland"})})]})})()]})}function Wm({data:o,tab:f}){const u=j(Z=>Z.mode),r=j(Z=>Z.viewerMode),d=j(Z=>Z.setViewerMode),y=j(Z=>Z.phase),b=j(Z=>Z.turnNumber),v=j(Z=>Z.nextPhase),m=j(Z=>Z.resolveCurrentTurn),g=j(Z=>Z.addNote),[E,x]=Y.useState(""),L=Y.useMemo(()=>o?(Z,R)=>{const Q=o.territoryById.get(Z);return!!Q&&Q.adj.includes(R)}:null,[o]),D=u==="SETUP"||r==="GM";return a.jsxs("div",{style:{padding:16,display:"grid",gap:12},children:[a.jsxs("div",{children:[a.jsx("h2",{style:{margin:0},children:"GM Tools"}),a.jsxs("div",{style:{opacity:.8},children:["Tab: ",a.jsx("b",{children:f}),"  Data: ",a.jsx("b",{children:o?"loaded":"null"})]}),a.jsxs("div",{style:{opacity:.8,marginTop:6},children:["Mode: ",a.jsx("b",{children:u}),"  Viewer: ",a.jsx("b",{children:r}),"  Phase: ",a.jsx("b",{children:y}),"  Turn: ",a.jsx("b",{children:b})]})]}),a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12},children:[a.jsx("h3",{style:{marginTop:0},children:"Viewer Mode"}),a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[a.jsx("button",{type:"button",onClick:()=>d("PLAYER"),children:"PLAYER"}),a.jsx("button",{type:"button",onClick:()=>d("GM"),children:"GM"})]})]}),a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12},children:[a.jsx("h3",{style:{marginTop:0},children:"Turn Controls"}),a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[a.jsx("button",{type:"button",onClick:()=>{L&&v(L)},disabled:!D||!L,title:o?void 0:"Load theatres_all.json so adjacency exists.",children:"Next Phase"}),a.jsx("button",{type:"button",onClick:()=>{L&&m(L)},disabled:!D||!L,title:o?void 0:"Load theatres_all.json so adjacency exists.",children:"Resolve Turn Now"})]}),o?null:a.jsx("div",{style:{marginTop:8,fontSize:12,opacity:.75},children:"Resolver needs adjacency. Data is null right now."})]}),a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12},children:[a.jsx("h3",{style:{marginTop:0},children:"GM Note"}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("input",{value:E,onChange:Z=>x(Z.target.value),placeholder:"Add a note to the log",style:{flex:1}}),a.jsx("button",{type:"button",onClick:()=>{const Z=E.trim();Z&&(g(Z),x(""))},disabled:!E.trim(),children:"Add"})]})]})]})}const Oc=["SHATTERED","DEPLETED","WORN","FRESH"],Aa=(o,f,u)=>Math.min(Math.max(o,f),u);function ah(o,f=1){const u=Oc.indexOf(o);return u<0?o:Oc[Aa(u+f,0,Oc.length-1)]}function Ni(o,f){j.setState(u=>({turnLog:[{id:String(crypto.randomUUID()),ts:Date.now(),type:o,text:f},...u.turnLog]}))}function Ri(o,f){j.setState(u=>{const r=u.platoonsById?.[o];return r?{platoonsById:{...u.platoonsById,[o]:{...r,...f}}}:u})}function $m({data:o}){const f=j(A=>A.viewerNation),u=j(A=>A.viewerFaction),r=j(A=>A.customNations),d=j(A=>A.customs),y=j(A=>A.turnNumber),b=j(A=>A.phase),v=j(A=>A.platoonsById),m=j(A=>A.ordersByTurn),g=j(A=>A.selectedTerritoryId),E=j(A=>A.selectedPlatoonId),x=j(A=>A.setSelectedPlatoonId),L=j(A=>A.setSelectedTerritory),D=j(A=>A.orderDraftType),Z=j(A=>A.setOrderDraftType),R=j(A=>A.submitFactionOrders),Q=j(A=>A.cancelDraftOrder),B=j(A=>A.territoryNameById),V=j(A=>A.createPlatoonWithLoadout),z=j(A=>A.ensureSupplies),C=j(A=>A.getSupplies),ae=j(A=>A.spendSupplies),Ae=j(A=>A.nationDoctrineState),G=j(A=>A.nationResearchState),ve=j(A=>A.nationUpgradesState),be=Y.useMemo(()=>rh({nationDoctrineState:Ae,nationResearchState:G},f),[Ae,G,ve,f]),[we,Oe]=Y.useState(null),[ue,Ue]=Y.useState(null),[Pe,Xe]=Y.useState(null),[M,J]=Y.useState(""),[ie,de]=Y.useState(10),[Ee,p]=Y.useState(!1),[N,$]=Y.useState(0),[P,se]=Y.useState(""),[re,Se]=Y.useState(""),[ze,De]=Y.useState(1),Ke=(f.startsWith("custom:")?r.find(A=>A.id===f)?.name:Lt[f]?.name)??f,X=Y.useMemo(()=>Object.values(v).filter(A=>A.nation===f),[v,f]),pe=Y.useMemo(()=>{const A=m?.[y]??{};return Object.values(A).flat().filter(Fe=>v[Fe.platoonId]?.nation===f&&!Fe.submittedAt)},[m,v,y,f]),We=Y.useMemo(()=>{const A=m?.[y]??{},Fe=new Map;return Object.values(A).flat().forEach(ht=>{if(ht.submittedAt){Fe.set(ht.platoonId,"submitted");return}Fe.get(ht.platoonId)!=="submitted"&&Fe.set(ht.platoonId,"draft")}),Fe},[m,y]),Le=Y.useMemo(()=>C(f),[C,f]),mt=be.orderFlexibility>0,$e=eo({viewerNation:f,viewerFaction:u,customNations:r,customs:d});Y.useEffect(()=>{b!=="ORDERS"&&(Oe(null),Ue(null),Z(null))},[b,Z]),Y.useEffect(()=>{D&&E&&Ue(E)},[D,E]),Y.useEffect(()=>{!D&&ue&&(Oe(null),Ue(null))},[D,ue]),Y.useEffect(()=>{z()},[z]),Y.useEffect(()=>{J(""),de(10)},[Pe]);const vt=["Specialism","Mobility","Name"],oe=Pe?v[Pe]:void 0,yt=1,H=25,ne=15,le=10,te=20,ee=20,fe=30,Te={RECON:te,ENGINEERS:ee,ARMOURED:fe},Ne={RECON:Bi("RECON").summary,ENGINEERS:Bi("ENGINEERS").summary,ARMOURED:Bi("ARMOURED").summary},je=A=>Le>=A,ge=oe?oe.nation===f:!1,w={FRESH:"#22c55e",WORN:"#eab308",DEPLETED:"#f97316",SHATTERED:"#ef4444"},he={INFANTRY:{label:gl("INFANTRY").label,color:"#94a3b8"},RECON:{label:gl("RECON").label,color:"#38bdf8"},ENGINEERS:{label:gl("ENGINEERS").label,color:"#fbbf24"},ARMOURED:{label:gl("ARMOURED").label,color:"#a78bfa"}},Ye=A=>Js(A).id,ot=A=>{const Fe=(A??[]).map(ht=>Mi(ht)).filter(ht=>!!ht);return Fe.length?Fe.join(", "):""},ke=A=>A>=75?w.FRESH:A>=50?w.WORN:A>=25?w.DEPLETED:w.SHATTERED,at=()=>{if(!oe)return;const A=M.trim();A&&(Ri(oe.id,{name:A}),Ni("PLATOON",`Renamed platoon ${oe.id} to "${A}"`),J(""))},Re=()=>{if(!oe)return;const A=oe.strengthPct??0,Fe=Aa(A+ie,0,100),ht=Fe-A,Fn=ht*yt;if(ht<=0||!ge||!ae(oe.nation,Fn,"Refit"))return;const bl=Fe>=80&&oe.condition!=="FRESH"?ah(oe.condition,1):oe.condition;Ri(oe.id,{strengthPct:Fe,condition:bl}),Ni("PLATOON",`Refit ${oe.name}: +${ht}% strength (cost ${Fn})`)},Wt=()=>{if(!oe)return;const A=oe.mpBase??1;A>=3||!ge||!ae(oe.nation,H,"Mobility upgrade")||(Ri(oe.id,{mpBase:A+1}),Ni("PLATOON",`Upgraded mobility for ${oe.name}: MP ${A}  ${A+1} (cost ${H})`))},xt=()=>{if(!oe||oe.condition==="FRESH"||!ge||!ae(oe.nation,ne,"Readiness upgrade"))return;const Fe=ah(oe.condition,1);Ri(oe.id,{condition:Fe}),Ni("PLATOON",`Upgraded readiness for ${oe.name}: ${oe.condition}  ${Fe} (cost ${ne})`)},k=(oe?.traits??[]).map(A=>Mi(A)).filter(A=>!!A),Ce=A=>k.includes(A),rt=Js(k),Nt=rt.id,Rt=(A,Fe)=>{!oe||!ge||Ce(A)||!ae(oe.nation,Fe,`Trait: ${A}`)||(Ri(oe.id,{traits:[...k,A]}),Ni("PLATOON",`Purchased trait ${A} for ${oe.name} (cost ${Fe})`))},Rn=()=>{if(!oe||!ge)return;const A=!!oe.entrenched;!A&&!ae(oe.nation,le,"Entrench")||(Ri(oe.id,{entrenched:!A}),Ni("PLATOON",`${oe.name} is now ${A?"NOT entrenched":"ENTRENCHED"}`))},vl=()=>{g&&(se(""),Se(""),De(1),$(0),p(!0))},to=()=>{p(!1)},_i=A=>{$(Aa(A,0,vt.length-1))},zi=()=>{if(!g)return;const A=P.trim();A&&(V(u,g,{name:A,traits:re?[re]:[],mpBase:ze,condition:"FRESH",strengthPct:100}),p(!1))};return a.jsxs("div",{style:{padding:16,display:"grid",gap:12,border:`1px solid ${$e}55`,borderRadius:12,background:`linear-gradient(135deg, ${$e}12, rgba(0,0,0,0))`},children:[a.jsxs("div",{children:[a.jsxs("h2",{style:{margin:0},children:[Ke," Command"]}),a.jsxs("div",{style:{opacity:.8},children:["Nation overview  Faction alignment:"," ",a.jsx("b",{children:Gt(u,d)}),"  Turn"," ",a.jsx("b",{children:y})]}),a.jsxs("div",{style:{opacity:.7,fontSize:12,marginTop:4},children:["Supplies snapshot: ",a.jsx("b",{children:Le}),"  Territory data:"," ",a.jsx("b",{children:o?"loaded":"not loaded"})]})]}),a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12},children:[a.jsx("h3",{style:{marginTop:0},children:"Nation Platoons"}),a.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:a.jsxs("button",{onClick:vl,disabled:!g,title:g?void 0:"Select a territory on the map to create a platoon.",children:["+ Create Platoon"," ",g?`(as ${pn(f,r)})`:""]})}),Ee?a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"grid",placeItems:"center",zIndex:50},children:a.jsxs("div",{style:{width:"min(720px, 92vw)",background:"#0f172a",borderRadius:12,padding:16,border:`1px solid ${$e}55`,display:"grid",gap:12,backgroundImage:`linear-gradient(135deg, ${$e}22, rgba(0,0,0,0))`},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("div",{style:{fontWeight:900},children:"Platoon Creation Wizard"}),a.jsx("button",{type:"button",onClick:to,children:"Close"})]}),a.jsxs("div",{style:{display:"grid",gap:4},children:[a.jsxs("div",{style:{fontSize:12,opacity:.8},children:["Step ",N+1," of ",vt.length," "," ",a.jsx("b",{children:vt[N]})]}),a.jsx("div",{style:{display:"flex",gap:6},children:vt.map((A,Fe)=>a.jsx("div",{style:{flex:1,height:6,borderRadius:999,background:Fe<=N?$e:"rgba(255,255,255,.12)"}},A))}),a.jsx("div",{style:{fontSize:12,opacity:.75},children:"Changes are staged locally and only saved when you click Deploy."})]}),N===0?a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:700},children:"Choose a platoon specialism"}),a.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("input",{type:"radio",name:"specialism",value:"",checked:re==="",onChange:()=>Se("")}),a.jsxs("span",{style:{display:"grid",gap:2},children:[a.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:8},children:[a.jsx("span",{style:{width:18,height:18,borderRadius:"50%",background:he.INFANTRY.color,display:"inline-block"}}),"None (standard infantry)"]}),a.jsxs("span",{style:{fontSize:12,opacity:.75},children:["Cost: ",a.jsx("b",{children:"0"}),"  Balanced infantry platoon."]})]})]}),["RECON","ENGINEERS","ARMOURED"].map(A=>a.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("input",{type:"radio",name:"specialism",value:A,checked:re===A,onChange:()=>Se(A)}),a.jsxs("span",{style:{display:"grid",gap:2},children:[a.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:8},children:[a.jsx("span",{style:{width:18,height:18,borderRadius:"50%",background:he[A].color,display:"inline-block"}}),he[A].label]}),a.jsxs("span",{style:{fontSize:12,opacity:.75},children:["Cost: ",a.jsx("b",{children:Te[A]})," "," ",Ne[A]]})]})]},A))]}):null,N===1?a.jsxs("div",{style:{display:"grid",gap:12},children:[a.jsx("div",{style:{fontWeight:700},children:"Configure mobility"}),a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsx("label",{style:{fontSize:12,opacity:.8},children:"Mobility (MP)"}),a.jsx("select",{value:ze,onChange:A=>De(Aa(Number(A.target.value||1),1,3)),children:[1,2,3].map(A=>a.jsxs("option",{value:A,children:[A," MP"]},A))})]}),a.jsx("div",{style:{fontSize:12,opacity:.7},children:"New platoons always deploy at full readiness and strength."})]}):null,N===2?a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:700},children:"Name your platoon"}),a.jsx("input",{value:P,onChange:A=>se(A.target.value),placeholder:"e.g. 1st Infantry"}),a.jsxs("div",{style:{fontSize:12,opacity:.7},children:["Territory: ",a.jsx("b",{children:g??""}),"  Nation:"," ",a.jsx("b",{children:pn(f,r)})]}),a.jsxs("div",{style:{fontSize:12,opacity:.7},children:["Specialism:"," ",a.jsx("b",{children:re?he[re].label:he.INFANTRY.label})," "," MP ",a.jsx("b",{children:ze}),"  Readiness ",a.jsx("b",{children:"FRESH"}),"  Strength ",a.jsx("b",{children:"100%"})]})]}):null,a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8},children:[a.jsx("button",{type:"button",onClick:()=>_i(N-1),disabled:N===0,children:"Back"}),a.jsx("div",{style:{display:"flex",gap:8},children:N<vt.length-1?a.jsx("button",{type:"button",onClick:()=>_i(N+1),children:"Next"}):a.jsx("button",{type:"button",onClick:zi,disabled:!P.trim(),children:"Deploy"})})]})]})}):null,a.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",fontSize:12,marginBottom:10},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[a.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:"#d14b47"}}),"No order"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[a.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:"#e2b340"}}),"Drafted"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[a.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:"#38b56f"}}),"Submitted"]})]}),X.length?a.jsx("div",{style:{display:"grid",gap:8},children:X.map(A=>{const Fe=Ye(A.traits),ht=We.get(A.id)??"none",Fn=ht==="submitted"?"#38b56f":ht==="draft"?"#e2b340":"#d14b47",Ui=ht==="submitted"?"Submitted order":ht==="draft"?"Draft order":"No order",bl=b==="ORDERS"&&we===A.id,Sl=Pe===A.id;return a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{x(A.id),L(A.territoryId),b==="ORDERS"&&(Oe(A.id),Z(null),Ue(null))},onKeyDown:Ht=>{(Ht.key==="Enter"||Ht.key===" ")&&(x(A.id),L(A.territoryId),b==="ORDERS"&&(Oe(A.id),Z(null),Ue(null)))},style:{textAlign:"left",padding:10,borderRadius:10,border:"1px solid rgba(255,255,255,.12)",background:E===A.id?"rgba(255,255,255,.06)":"rgba(0,0,0,.12)",cursor:"pointer",display:"grid",gap:6},children:[a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",justifyContent:"space-between"},children:[a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"2px 8px",borderRadius:999,fontSize:10,fontWeight:700,textTransform:"uppercase",background:"rgba(15,23,42,.9)",border:`1px solid ${he[Fe].color}`,color:he[Fe].color},title:`Class: ${he[Fe].label}`,children:he[Fe].label}),a.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:ke(A.strengthPct??0),boxShadow:"0 0 6px rgba(0,0,0,.4)"},title:`Strength ${A.strengthPct}% (${A.condition})`}),a.jsx("div",{style:{fontWeight:800},children:A.name})]}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{type:"button",onClick:Ht=>{Ht.stopPropagation(),Xe(Sl?null:A.id),x(A.id),L(A.territoryId)},children:Sl?"Collapse":"Expand"}),a.jsx("span",{title:Ui,style:{width:10,height:10,borderRadius:"50%",background:Fn,boxShadow:`0 0 6px ${Fn}66`,flexShrink:0,alignSelf:"center"}})]})]}),a.jsxs("div",{style:{fontSize:12,opacity:.85},children:[pn(A.nation,r)," "," ",A.condition,"  ",A.strengthPct,"%  MP"," ",A.mpBase,A.entrenched?"  ENTRENCHED":"",ot(A.traits)?`  ${ot(A.traits)}`:""]}),a.jsxs("div",{style:{fontSize:12,opacity:.7},children:["Territory:"," ",Nn(A.territoryId,B)," "," Faction: ",Gt(A.faction,d)]})]}),bl?a.jsxs("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:10,background:"rgba(0,0,0,.18)",display:"grid",gap:8},children:[a.jsxs("div",{style:{fontWeight:700},children:["Issue order  Turn ",y]}),a.jsx("div",{style:{fontSize:12,opacity:.7},children:"Choose an order type, then select a highlighted territory on the map."}),a.jsx("div",{style:{display:"grid",gap:6,gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))"},children:[["MOVE","Move"],["HOLD","Hold"],["RECON","Recon"],["INTEL","Intel"]].map(([Ht,Da])=>{const Sn=D===Ht&&E===A.id;return a.jsx("button",{type:"button",onClick:()=>{x(A.id),Z(Ht),Ue(A.id)},style:{textAlign:"left",padding:"6px 8px",borderRadius:8,border:"1px solid rgba(255,255,255,.12)",background:Sn?"rgba(59,130,246,.2)":"rgba(0,0,0,.12)",fontWeight:600},children:Da},Ht)})}),a.jsx("div",{style:{fontSize:12,opacity:.75},children:D&&E===A.id?"Targets are highlighted on the map. Click one to draft the order.":"No order type selected yet."})]}):null,Sl&&oe?a.jsxs("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:10,background:"rgba(0,0,0,.18)",display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:900},children:"Platoon Details"}),a.jsxs("div",{style:{display:"grid",gap:4},children:[a.jsxs("div",{children:[a.jsx("b",{children:"Name:"})," ",oe.name]}),a.jsxs("div",{children:[a.jsx("b",{children:"Nation:"})," ",pn(oe.nation,r)]}),a.jsxs("div",{children:[a.jsx("b",{children:"Faction:"})," ",Gt(oe.faction,d)]}),a.jsxs("div",{children:[a.jsx("b",{children:"Condition:"})," ",oe.condition]}),a.jsxs("div",{children:[a.jsx("b",{children:"Strength:"})," ",oe.strengthPct,"%"]}),a.jsxs("div",{children:[a.jsx("b",{children:"Move:"})," MP ",oe.mpBase]}),a.jsxs("div",{children:[a.jsx("b",{children:"Entrenched:"})," ",oe.entrenched?"Yes":"No"]}),a.jsxs("div",{children:[a.jsx("b",{children:"Traits:"})," ",ot(oe.traits)||""]}),a.jsxs("div",{children:[a.jsx("b",{children:"Class:"})," ",he[Nt].label]}),a.jsxs("div",{children:[a.jsx("b",{children:"Campaign Role:"})," ",rt.role]}),a.jsxs("div",{children:[a.jsx("b",{children:"Strengths:"})," ",rt.strengths.join(", ")]}),a.jsxs("div",{children:[a.jsx("b",{children:"Weaknesses:"})," ",rt.weaknesses.join(", ")]})]}),a.jsx("hr",{style:{borderColor:"rgba(255,255,255,.12)",margin:"10px 0"}}),a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsx("div",{style:{fontWeight:800},children:"Rename"}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("input",{value:M,onChange:Ht=>J(Ht.target.value),placeholder:"New name...",style:{flex:1}}),a.jsx("button",{type:"button",onClick:at,disabled:!M.trim(),children:"Save"})]})]}),a.jsx("hr",{style:{borderColor:"rgba(255,255,255,.12)",margin:"10px 0"}}),a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8},children:[a.jsx("div",{style:{fontWeight:800},children:"Refit"}),a.jsxs("div",{style:{fontSize:12,opacity:.8},children:["Cost: ",a.jsx("b",{children:ie*yt})," (per +",ie,"%)"]})]}),a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsx("input",{type:"number",value:ie,onChange:Ht=>de(Aa(Number(Ht.target.value||0),1,100)),style:{width:90}}),a.jsx("div",{style:{fontSize:12,opacity:.8},children:"Strength goes up (max 100%). May improve condition if 80%."})]}),a.jsxs("button",{type:"button",onClick:Re,disabled:oe.strengthPct>=100||!ge||!je(ie*yt),title:ge?void 0:"Switch Viewer nation to match platoon nation to spend supplies.",children:["Refit (+",ie,"%)"]})]}),a.jsx("hr",{style:{borderColor:"rgba(255,255,255,.12)",margin:"10px 0"}}),a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:800},children:"Upgrades"}),a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsxs("button",{type:"button",onClick:Wt,disabled:oe.mpBase>=3||!ge||!je(H),children:["Mobility +1 MP (cost ",H,")"," ",oe.mpBase>=3?" MAX":""]}),a.jsxs("button",{type:"button",onClick:xt,disabled:oe.condition==="FRESH"||!ge||!je(ne),children:["Readiness +1 step (cost ",ne,")"," ",oe.condition==="FRESH"?" MAX":""]})]})]}),a.jsx("hr",{style:{borderColor:"rgba(255,255,255,.12)",margin:"10px 0"}}),a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:800},children:"Specialisms"}),a.jsxs("button",{type:"button",onClick:()=>Rt("RECON",te),disabled:Ce("RECON")||!ge||!je(te),children:["Recon (cost ",te,")"," ",Ce("RECON")?" OWNED":""]}),a.jsxs("button",{type:"button",onClick:()=>Rt("ENGINEERS",ee),disabled:Ce("ENGINEERS")||!ge||!je(ee),children:["Engineers (cost ",ee,")"," ",Ce("ENGINEERS")?" OWNED":""]}),a.jsxs("button",{type:"button",onClick:()=>Rt("ARMOURED",fe),disabled:Ce("ARMOURED")||!ge||!je(fe),children:["Armoured (cost ",fe,")"," ",Ce("ARMOURED")?" OWNED":""]}),a.jsx("div",{style:{fontSize:12,opacity:.75},children:"Effects get wired into turn resolution next (Reconintel, Engineersfortifications, Armouredbreakthrough/logistics)."})]}),a.jsx("hr",{style:{borderColor:"rgba(255,255,255,.12)",margin:"10px 0"}}),a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:800},children:"Fortify"}),a.jsx("button",{type:"button",onClick:Rn,disabled:!ge||!oe.entrenched&&!je(le),children:oe.entrenched?"Remove Entrenchment":`Entrench (cost ${le})`}),a.jsx("div",{style:{fontSize:12,opacity:.75},children:"Well apply entrenchment as a combat modifier when we wire battle resolution."})]}),a.jsx("div",{style:{fontSize:12,opacity:.75},children:"Note: supplies are spent from the platoons nation  switch Viewer nation to match to apply upgrades/orders."})]}):null]},A.id)})}):a.jsx("div",{style:{fontSize:12,opacity:.8},children:"No platoons assigned to this nation yet."})]}),a.jsxs("section",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:12},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,flexWrap:"wrap"},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:0},children:"Draft Orders"}),a.jsx("button",{type:"button",onClick:()=>R(y,f),disabled:!pe.length,children:"Submit Orders"})]}),a.jsxs("div",{style:{fontSize:12,opacity:.75,marginBottom:6},children:["Order flexibility: ",a.jsx("b",{children:be.orderFlexibility})," ",mt?"(draft orders can be canceled)":"(no edits without doctrine/upgrades)"]}),pe.length?a.jsx("ul",{style:{margin:0,paddingLeft:18},children:pe.map(A=>{const Fe=v[A.platoonId]?.name??A.platoonId;return a.jsxs("li",{style:{display:"flex",gap:8,alignItems:"center"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsx("b",{children:A.type}),"  ",Fe," ",A.type==="RECON"||A.type==="INTEL"?` ${A.reconTargets?.length?Wy(A.reconTargets??[],B):""}`:` ${A.path?.length?Wy(A.path??[],B):Nn(A.from,B)}`]}),a.jsx("button",{type:"button",onClick:()=>Q(y,A.id),disabled:!mt,title:mt?"Cancel draft order":"Requires order flexibility",children:"Cancel"})]},A.id)})}):a.jsx("div",{style:{fontSize:12,opacity:.8},children:"No draft orders yet. Select a platoon above to issue actions."})]})]})}function Jm(){const[o,f]=Y.useState(null),u=j(x=>x.mode),r=j(x=>x.viewerMode),d=j(x=>x.leftPanelView),y=j(x=>x.commandHubExpanded),b=j(x=>x.setAdjacencyByTerritory),v=j(x=>x.setTerritoryNameById);Y.useEffect(()=>{zc().then(x=>{f(x);const L={};for(const D of x.territories)L[D.id]=D.adj??[];b(L),v(Object.fromEntries(x.territories.map(D=>[D.id,D.name])))}).catch(console.error)},[b,v]);const m=u==="SETUP"&&r==="GM",g=r==="GM"&&(u==="SETUP"||d!=="NONE")||r==="PLAYER"&&d!=="NONE",E=g?"380px 1fr 420px":"1fr 420px";return a.jsxs("div",{style:{display:"grid",gridTemplateRows:"auto 1fr",height:"100vh"},children:[a.jsx(Pm,{data:o}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:E,minHeight:0,gap:12,padding:12},children:[" ",g?a.jsxs("div",{style:{display:"grid",gap:12,alignContent:"start",minHeight:0,overflow:"auto"},children:[m&&a.jsx(um,{}),r==="GM"&&u!=="SETUP"?a.jsx(Wm,{data:o,tab:"DASHBOARD"}):d==="FACTION_COMMAND"?a.jsx(Cc,{data:o,variant:"full"}):d==="NATION_COMMAND"?a.jsx($m,{data:o}):null]}):null,a.jsxs("div",{style:{display:"grid",gap:12,minHeight:0},children:[a.jsx("div",{style:{border:"1px solid rgba(255,255,255,.15)",borderRadius:8,overflow:"hidden",minHeight:0},children:a.jsx(Km,{})}),y&&r==="PLAYER"?a.jsx("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,overflow:"hidden"},children:a.jsx(Cc,{data:o,variant:"full"})}):null]}),a.jsx("div",{style:{minHeight:0,overflow:"auto"},children:a.jsx(Hm,{data:o})})]})]})}function Pm({data:o}){const f=j(G=>G.viewerMode),u=j(G=>G.setViewerMode),r=j(G=>G.viewerNation),d=j(G=>G.setViewerNation),y=j(G=>G.customNations),b=j(G=>G.playMode),v=j(G=>G.mode),m=j(G=>G.phase),g=j(G=>G.turnNumber),E=j(G=>G.nextPhase),x=j(G=>G.resetAll),L=j(G=>G.ordersByTurn),D=j(G=>G.platoonsById),Z=j(G=>G.suppliesByNation),R=j(G=>G.nationsEnabled),Q=j(G=>G.leftPanelView),B=j(G=>G.setLeftPanelView),V=Y.useMemo(()=>o?(G,ve)=>{const be=o.territoryById.get(G);return!!be&&be.adj.includes(ve)}:null,[o]),z=Y.useMemo(()=>{const G=L?.[g]??{};return Object.values(G).flat().filter(ve=>D[ve.platoonId]?.nation===r&&!ve.submittedAt).length},[L,D,g,r]),C=Y.useMemo(()=>{const G=Z?.[r]??0;return[{key:"",value:Math.max(0,Math.round(G*1.5)),label:"Manpower"},{key:"",value:G,label:"Industry"},{key:"",value:Math.max(0,Math.round(G*.6)),label:"Fuel"},{key:"",value:Math.max(0,Math.round(G*.3)),label:"Intel"}]},[Z,r]),ae=Y.useMemo(()=>{const G=ml.map(ue=>({id:ue.id,name:ue.name,flag:ue.flag})),ve=y.map(ue=>({id:ue.id,name:ue.name})),be=[...G,...ve],we=be.filter(ue=>R[ue.id]);if(we.length===0)return be;if(we.some(ue=>ue.id===r))return we;const Oe=be.find(ue=>ue.id===r);return Oe?[...we,Oe]:we},[y,R,r]),Ae=()=>{const G=f==="GM"?"PLAYER":"GM";u(G),B(G==="GM"?"GM_TOOLS":"NONE")};return a.jsxs("div",{style:{padding:"10px 16px",borderBottom:"1px solid rgba(255,255,255,.12)",display:"grid",gridTemplateColumns:"auto 1fr auto",gap:12,alignItems:"center"},children:[a.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap",justifyContent:"center"},children:[a.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[a.jsxs("div",{style:{fontWeight:800},children:["Turn ",g]}),a.jsxs("div",{style:{fontSize:12,opacity:.75},children:["Phase: ",m]}),a.jsxs("div",{style:{fontSize:12,opacity:.75},children:["Play Mode: ",b]}),a.jsxs("div",{style:{fontSize:12,opacity:.75},children:["Outstanding orders: ",z]})]}),C.map(G=>a.jsxs("div",{style:{padding:"4px 8px",borderRadius:999,border:"1px solid rgba(255,255,255,.12)",background:"rgba(255,255,255,.06)",fontSize:12,display:"inline-flex",gap:6,alignItems:"center"},title:G.label,children:[a.jsx("span",{children:G.key}),a.jsx("span",{children:G.value})]},G.label))]}),a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap",justifyContent:"flex-end"},children:[f==="GM"&&a.jsxs("label",{style:{display:"flex",gap:6,alignItems:"center",fontSize:12},children:["Player Nation",a.jsx("select",{value:r,onChange:G=>d(G.target.value),children:ae.map(G=>a.jsx("option",{value:G.id,children:G.name},G.id))})]}),f==="PLAYER"?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>B(Q==="FACTION_COMMAND"?"NONE":"FACTION_COMMAND"),children:"Faction Command"}),a.jsx("button",{type:"button",onClick:()=>B(Q==="NATION_COMMAND"?"NONE":"NATION_COMMAND"),children:"Nation Command"})]}):a.jsx("button",{type:"button",onClick:()=>B(Q==="GM_TOOLS"?"NONE":"GM_TOOLS"),children:"GM Tools"}),a.jsx("button",{type:"button",onClick:Ae,children:f==="GM"?"Switch to Player View":"Switch to GM View"}),a.jsx("button",{type:"button",disabled:f!=="GM"||!V||v==="SETUP",onClick:()=>{V&&E(V)},title:V?void 0:"Load theatres_all.json so adjacency exists.",children:"Advance Phase"}),a.jsx("button",{type:"button",disabled:f!=="GM",onClick:()=>x(),title:"Reset campaign state and return to setup.",children:"New Campaign"})]})]})}Hg.createRoot(document.getElementById("root")).render(a.jsx(Y.StrictMode,{children:a.jsx(Jm,{})}));
